"use strict";(self.webpackChunkmy_chat=self.webpackChunkmy_chat||[]).push([[179],{2011:(st,be,k)=>{k.d(be,{Dh:()=>he,GT:()=>de,cc:()=>Ae,hO:()=>Ve,on:()=>U,pX:()=>re,xv:()=>pe});var g=k(4650),ee=k(127),O=k(5813);st=k.hmd(st);const oe=["ngOnDestroy"],re=(fe,Ze,et,Se={})=>new Proxy(fe,{get:(ye,Ee)=>et.runOutsideAngular(()=>{var Be;if(fe[Ee])return!(null===(Be=Se?.spy)||void 0===Be)&&Be.get&&Se.spy.get(Ee,fe[Ee]),fe[Ee];if(oe.indexOf(Ee)>-1)return()=>{};const je=Ze.toPromise().then(V=>{const ge=V&&V[Ee];return"function"==typeof ge?ge.bind(V):ge&&ge.then?ge.then(Z=>et.run(()=>Z)):et.run(()=>ge)});return new Proxy(()=>{},{get:(V,ge)=>je[ge],apply:(V,ge,Z)=>je.then(X=>{var ie;const te=X&&X(...Z);return!(null===(ie=Se?.spy)||void 0===ie)&&ie.apply&&Se.spy.apply(Ee,Z,te),te})})})}),de=(fe,Ze)=>{Ze.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Se=>{Object.defineProperty(fe.prototype,Se,Object.getOwnPropertyDescriptor(et.prototype||et,Se))})})};class ue{constructor(Ze){return Ze}}const he=new g.OlP("angularfire2.app.options"),pe=new g.OlP("angularfire2.app.name");function U(fe,Ze,et){const ye="object"==typeof et&&et||{};ye.name=ye.name||"string"==typeof et&&et||"[DEFAULT]";const Be=ee.Z.apps.filter(je=>je&&je.name===ye.name)[0]||Ze.runOutsideAngular(()=>ee.Z.initializeApp(fe,ye));try{JSON.stringify(fe)!==JSON.stringify(Be.options)&&j("error",`${Be.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(Be)}const j=(fe,...Ze)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ze)},K={provide:ue,useFactory:U,deps:[he,g.R0b,[new g.FiY,pe]]};let Ve=(()=>{class fe{constructor(et){ee.Z.registerVersion("angularfire",O.q4.full,"core"),ee.Z.registerVersion("angularfire",O.q4.full,"app-compat"),ee.Z.registerVersion("angular",g.q4F.full,et.toString())}static initializeApp(et,Se){return{ngModule:fe,providers:[{provide:he,useValue:et},{provide:pe,useValue:Se}]}}}return fe.\u0275fac=function(et){return new(et||fe)(g.LFG(g.Lbi))},fe.\u0275mod=g.oAB({type:fe}),fe.\u0275inj=g.cJS({providers:[K]}),fe})();function Ae(fe,Ze,et,Se,ye){const[,Ee,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===fe)||[];if(Ee)return function we(fe,Ze){try{return fe.toString()===Ze.toString()}catch{return fe===Ze}}(ye,Be)||(me("error",`${Ze} was already initialized on the ${et} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:ye,was:Be})),Ee;{const je=Se();return globalThis.\u0275AngularfireInstanceCache.push([fe,je,ye]),je}}const Je=!!st.hot,me=(fe,...Ze)=>{(0,g.X6Q)()&&typeof console<"u"&&console[fe](...Ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,be,k)=>{k.d(be,{q4:()=>rt,iC:()=>es,HU:()=>Lo,vb:()=>Ss,JM:()=>Ia});var g=k(4650),ee=k(5867),O=k(5861),oe=k(9681),re=k(2090),de=k(4859),ue=k(1877),he=k(8766);const pe="@firebase/installations",U="0.5.12",K=`w:${U}`,Ve="FIS_v2",Ze=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Se({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ye(D){return{token:D.token,requestStatus:2,expiresIn:X(D.expiresIn),creationTime:Date.now()}}function Ee(D,b){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ze.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:b}){const x=je(D);return x.append("Authorization",function ie(D){return`${Ve} ${D}`}(b)),x}function ge(D){return Z.apply(this,arguments)}function Z(){return(Z=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function X(D){return Number(D.replace("s","000"))}function te(D,b){return ke.apply(this,arguments)}function ke(){return(ke=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=Se(D),Y=je(D),ne=b.getImmediate({optional:!0});if(ne){const pt=yield ne.getHeartbeatsHeader();pt&&Y.append("x-firebase-client",pt)}const Me={method:"POST",headers:Y,body:JSON.stringify({fid:x,authVersion:Ve,appId:D.appId,sdkVersion:K})},Xe=yield ge(()=>fetch(F,Me));if(Xe.ok){const pt=yield Xe.json();return{fid:pt.fid||x,registrationStatus:2,refreshToken:pt.refreshToken,authToken:ye(pt.authToken)}}throw yield Ee("Create Installation",Xe)})).apply(this,arguments)}function Oe(D){return new Promise(b=>{setTimeout(b,D)})}const Bt=/^[cdef][\w-]{21}$/;function ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function en(D){return function ct(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Bt.test(x)?x:""}catch{return""}}function bn(D){return`${D.appName}!${D.appId}`}const Ht=new Map;function Gt(D,b){const x=bn(D);Jt(x,b),function Yo(D,b){const x=function hr(){return!Nr&&"BroadcastChannel"in self&&(Nr=new BroadcastChannel("[Firebase] FID Change"),Nr.onmessage=D=>{Jt(D.data.key,D.data.fid)}),Nr}();x&&x.postMessage({key:D,fid:b}),function Or(){0===Ht.size&&Nr&&(Nr.close(),Nr=null)}()}(x,b)}function Jt(D,b){const x=Ht.get(D);if(x)for(const F of x)F(b)}let Nr=null;const Pr="firebase-installations-store";let ci=null;function vo(){return ci||(ci=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Pr)}})),ci}function We(D,b){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*(D,b){const x=bn(D),Y=(yield vo()).transaction(Pr,"readwrite"),ne=Y.objectStore(Pr),Ie=yield ne.get(x);return yield ne.put(b,x),yield Y.done,(!Ie||Ie.fid!==b.fid)&&Gt(D,b.fid),b})).apply(this,arguments)}function $i(D){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,O.Z)(function*(D){const b=bn(D),F=(yield vo()).transaction(Pr,"readwrite");yield F.objectStore(Pr).delete(b),yield F.done})).apply(this,arguments)}function li(D,b){return qr.apply(this,arguments)}function qr(){return(qr=(0,O.Z)(function*(D,b){const x=bn(D),Y=(yield vo()).transaction(Pr,"readwrite"),ne=Y.objectStore(Pr),Ie=yield ne.get(x),Me=b(Ie);return void 0===Me?yield ne.delete(x):yield ne.put(Me,x),yield Y.done,Me&&(!Ie||Ie.fid!==Me.fid)&&Gt(D,Me.fid),Me})).apply(this,arguments)}function Sn(D){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(D){let b;const x=yield li(D.appConfig,F=>{const Y=cn(F),ne=lt(D,Y);return b=ne.registrationPromise,ne.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function cn(D){return yt(D||{fid:ze(),registrationStatus:0})}function lt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ze.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(D,b){return tn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:er(D)}:{installationEntry:b}}function tn(){return(tn=(0,O.Z)(function*(D,b){try{const x=yield te(D,b);return We(D.appConfig,x)}catch(x){throw et(x)&&409===x.customData.serverCode?yield $i(D.appConfig):yield We(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function er(D){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*(D){let b=yield _r(D.appConfig);for(;1===b.registrationStatus;)yield Oe(100),b=yield _r(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Sn(D);return F||x}return b})).apply(this,arguments)}function _r(D){return li(D,b=>{if(!b)throw Ze.create("installation-not-found");return yt(b)})}function yt(D){return function Hi(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function zt(D,b){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=$t(D,x),Y=V(D,x),ne=b.getImmediate({optional:!0});if(ne){const pt=yield ne.getHeartbeatsHeader();pt&&Y.append("x-firebase-client",pt)}const Me={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:K,appId:D.appId}})},Xe=yield ge(()=>fetch(F,Me));if(Xe.ok)return ye(yield Xe.json());throw yield Ee("Generate Auth Token",Xe)})).apply(this,arguments)}function $t(D,{fid:b}){return`${Se(D)}/${b}/authTokens:generate`}function q(D){return B.apply(this,arguments)}function B(){return(B=(0,O.Z)(function*(D,b=!1){let x;const F=yield li(D.appConfig,ne=>{if(!tt(ne))throw Ze.create("not-registered");const Ie=ne.authToken;if(!b&&an(Ie))return ne;if(1===Ie.requestStatus)return x=L(D,b),ne;{if(!navigator.onLine)throw Ze.create("app-offline");const Me=Gn(ne);return x=De(D,Me),Me}});return x?yield x:F.authToken})).apply(this,arguments)}function L(D,b){return $.apply(this,arguments)}function $(){return($=(0,O.Z)(function*(D,b){let x=yield z(D.appConfig);for(;1===x.authToken.requestStatus;)yield Oe(100),x=yield z(D.appConfig);const F=x.authToken;return 0===F.requestStatus?q(D,b):F})).apply(this,arguments)}function z(D){return li(D,b=>{if(!tt(b))throw Ze.create("not-registered");return function Ot(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function De(D,b){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(D,b){try{const x=yield zt(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield We(D.appConfig,F),x}catch(x){if(!et(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield We(D.appConfig,F)}else yield $i(D.appConfig);throw x}})).apply(this,arguments)}function tt(D){return void 0!==D&&2===D.registrationStatus}function an(D){return 2===D.requestStatus&&!function qt(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function Gn(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function fn(){return(fn=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield Sn(b);return F?F.catch(console.error):q(b).catch(console.error),x.fid})).apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*(D,b=!1){const x=D;return yield wr(x),(yield q(x,b)).token})).apply(this,arguments)}function wr(D){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,O.Z)(function*(D){const{registrationPromise:b}=yield Sn(D);b&&(yield b)})).apply(this,arguments)}function fs(D){return Ze.create("missing-app-config-values",{valueName:D})}const _o="installations",pn=D=>{const b=D.getProvider("app").getImmediate(),x=function ln(D){if(!D||!D.options)throw fs("App Configuration");if(!D.name)throw fs("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw fs(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Hs=D=>{const b=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(b,_o).getImmediate();return{getId:()=>function Tt(D){return fn.apply(this,arguments)}(x),getToken:Y=>function On(D){return bi.apply(this,arguments)}(x,Y)}};(function nc(){(0,oe._registerComponent)(new de.wA(_o,pn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("installations-internal",Hs,"PRIVATE"))})(),(0,oe.registerVersion)(pe,U),(0,oe.registerVersion)(pe,U,"esm2017");const Ti="@firebase/remote-config",Fn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class hh{constructor(b,x,F,Y){this.client=b,this.storage=x,this.storageCache=F,this.logger=Y}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Y=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Y}.`),Y}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,Y]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Y&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return Y;b.eTag=Y&&Y.eTag;const ne=yield x.client.fetch(b),Ie=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&Ie.push(x.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(Ie),ne})()}}function ac(D=navigator){return D.languages&&D.languages[0]||D.language}class uc{constructor(b,x,F,Y,ne,Ie){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=Y,this.apiKey=ne,this.appId=Ie}fetch(b){var x=this;return(0,O.Z)(function*(){var F,Y,ne;const[Ie,Me]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),pt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,wt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},ot={sdk_version:x.sdkVersion,app_instance_id:Ie,app_instance_id_token:Me,app_id:x.appId,language_code:ac()},mn={method:"POST",headers:wt,body:JSON.stringify(ot)},ur=fetch(pt,mn),Vo=new Promise((Uo,ro)=>{b.signal.addEventListener(()=>{const _i=new Error("The operation was aborted.");_i.name="AbortError",ro(_i)})});let Ms;try{yield Promise.race([ur,Vo]),Ms=yield ur}catch(Uo){let ro="fetch-client-network";throw"AbortError"===(null===(F=Uo)||void 0===F?void 0:F.name)&&(ro="fetch-timeout"),Fn.create(ro,{originalErrorMessage:null===(Y=Uo)||void 0===Y?void 0:Y.message})}let It=Ms.status;const Ri=Ms.headers.get("ETag")||void 0;let Rs,Jr;if(200===Ms.status){let Uo;try{Uo=yield Ms.json()}catch(ro){throw Fn.create("fetch-client-parse",{originalErrorMessage:null===(ne=ro)||void 0===ne?void 0:ne.message})}Rs=Uo.entries,Jr=Uo.state}if("INSTANCE_STATE_UNSPECIFIED"===Jr?It=500:"NO_CHANGE"===Jr?It=304:("NO_TEMPLATE"===Jr||"EMPTY_CONFIG"===Jr)&&(Rs={}),304!==It&&200!==It)throw Fn.create("fetch-status",{httpStatus:It});return{status:It,eTag:Ri,config:Rs}})()}}class dp{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var Y=this;return(0,O.Z)(function*(){yield function qn(D,b){return new Promise((x,F)=>{const Y=Math.max(b-Date.now(),0),ne=setTimeout(x,Y);D.addEventListener(()=>{clearTimeout(ne),F(Fn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const ne=yield Y.client.fetch(b);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function bl(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ne))throw ne;const Ie={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(Ie),Y.attemptFetch(b,Ie)}})()}}class cc{constructor(b,x,F,Y,ne){this.app=b,this._client=x,this._storageCache=F,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function lc(D,b){var x;const F=D.target.error||void 0;return Fn.create(b,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const ys="app_namespace_store";class gp{constructor(b,x,F,Y=function pp(){return new Promise((D,b)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Y=>{b(lc(Y,"storage-open"))},F.onsuccess=Y=>{D(Y.target.result)},F.onupgradeneeded=Y=>{0===Y.oldVersion&&Y.target.result.createObjectStore(ys,{keyPath:"compositeKey"})}}catch(F){b(Fn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,ne)=>{var Ie;const Xe=F.transaction([ys],"readonly").objectStore(ys),pt=x.createCompositeKey(b);try{const wt=Xe.get(pt);wt.onerror=ot=>{ne(lc(ot,"storage-get"))},wt.onsuccess=ot=>{const mn=ot.target.result;Y(mn?mn.value:void 0)}}catch(wt){ne(Fn.create("storage-get",{originalErrorMessage:null===(Ie=wt)||void 0===Ie?void 0:Ie.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((ne,Ie)=>{var Me;const pt=Y.transaction([ys],"readwrite").objectStore(ys),wt=F.createCompositeKey(b);try{const ot=pt.put({compositeKey:wt,value:x});ot.onerror=mn=>{Ie(lc(mn,"storage-set"))},ot.onsuccess=()=>{ne()}}catch(ot){Ie(Fn.create("storage-set",{originalErrorMessage:null===(Me=ot)||void 0===Me?void 0:Me.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Y,ne)=>{var Ie;const Xe=F.transaction([ys],"readwrite").objectStore(ys),pt=x.createCompositeKey(b);try{const wt=Xe.delete(pt);wt.onerror=ot=>{ne(lc(ot,"storage-delete"))},wt.onsuccess=()=>{Y()}}catch(wt){ne(Fn.create("storage-delete",{originalErrorMessage:null===(Ie=wt)||void 0===Ie?void 0:Ie.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Sl{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),Y=b.storage.getActiveConfig(),ne=yield x;ne&&(b.lastFetchStatus=ne);const Ie=yield F;Ie&&(b.lastSuccessfulFetchTimestampMillis=Ie);const Me=yield Y;Me&&(b.activeConfig=Me)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Wa(){return fh.apply(this,arguments)}function fh(){return(fh=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function vs(){(0,oe._registerComponent)(new de.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),Y=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fn.create("registration-window");if(!(0,re.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:ne,apiKey:Ie,appId:Me}=F.options;if(!ne)throw Fn.create("registration-project-id");if(!Ie)throw Fn.create("registration-api-key");if(!Me)throw Fn.create("registration-app-id");const Xe=new gp(Me,F.name,x=x||"firebase"),pt=new Sl(Xe),wt=new ue.Yd(Ti);wt.logLevel=ue.in.ERROR;const ot=new uc(Y,oe.SDK_VERSION,x,ne,Ie,Me),mn=new dp(ot,Xe),ur=new hh(mn,Xe,pt,wt),Vo=new cc(F,ur,pt,Xe,wt);return function Ln(D){const b=(0,re.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Vo),Vo},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Ti,"0.3.11"),(0,oe.registerVersion)(Ti,"0.3.11","esm2017")}();const Si="/firebase-messaging-sw.js",zi="/firebase-cloud-messaging-push-scope",qi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xo="google.c.a.c_id",Za="google.c.a.c_l",dc="google.c.a.ts",ph="google.c.a.e";var Wi=(()=>{return(D=Wi||(Wi={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Wi;var D})();function Zr(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fr(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Y=new Uint8Array(F.length);for(let ne=0;ne<F.length;++ne)Y[ne]=F.charCodeAt(ne);return Y}const wo="fcm_token_details_db",ar="fcm_token_object_Store";function gh(D){return mh.apply(this,arguments)}function mh(){return mh=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(wo))return null;let b=null;return(yield(0,he.X3)(wo,5,{upgrade:(F=(0,O.Z)(function*(Y,ne,Ie,Me){var Xe;if(ne<2||!Y.objectStoreNames.contains(ar))return;const pt=Me.objectStore(ar),wt=yield pt.index("fcmSenderId").get(D);if(yield pt.clear(),wt)if(2===ne){const ot=wt;if(!ot.auth||!ot.p256dh||!ot.endpoint)return;b={token:ot.fcmToken,createTime:null!==(Xe=ot.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:ot.auth,p256dh:ot.p256dh,endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:"string"==typeof ot.vapidKey?ot.vapidKey:Zr(ot.vapidKey)}}}else if(3===ne){const ot=wt;b={token:ot.fcmToken,createTime:ot.createTime,subscriptionOptions:{auth:Zr(ot.auth),p256dh:Zr(ot.p256dh),endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:Zr(ot.vapidKey)}}}else if(4===ne){const ot=wt;b={token:ot.fcmToken,createTime:ot.createTime,subscriptionOptions:{auth:Zr(ot.auth),p256dh:Zr(ot.p256dh),endpoint:ot.endpoint,swScope:ot.swScope,vapidKey:Zr(ot.vapidKey)}}}}),function(ne,Ie,Me,Xe){return F.apply(this,arguments)})})).close(),yield(0,he.Lj)(wo),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),_n(b)?b:null;var F}),mh.apply(this,arguments)}function _n(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Kr="firebase-messaging-store";let Er=null;function Ya(){return Er||(Er=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Kr)}})),Er}function Io(D){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,O.Z)(function*(D){const b=pi(D),F=yield(yield Ya()).transaction(Kr).objectStore(Kr).get(b);if(F)return F;{const Y=yield gh(D.appConfig.senderId);if(Y)return yield Ut(D,Y),Y}})).apply(this,arguments)}function Ut(D,b){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(D,b){const x=pi(D),Y=(yield Ya()).transaction(Kr,"readwrite");return yield Y.objectStore(Kr).put(b,x),yield Y.done,b})).apply(this,arguments)}function Ws(D){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(D){const b=pi(D),F=(yield Ya()).transaction(Kr,"readwrite");yield F.objectStore(Kr).delete(b),yield F.done})).apply(this,arguments)}function pi({appConfig:D}){return D.appId}const vn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vt(D,b){return eu.apply(this,arguments)}function eu(){return(eu=(0,O.Z)(function*(D,b){var x;const F=yield fc(D),Y=Ce(b),ne={method:"POST",headers:F,body:JSON.stringify(Y)};let Ie;try{Ie=yield(yield fetch(Ki(D.appConfig),ne)).json()}catch(Me){throw vn.create("token-subscribe-failed",{errorInfo:null===(x=Me)||void 0===x?void 0:x.toString()})}if(Ie.error)throw vn.create("token-subscribe-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw vn.create("token-subscribe-no-token");return Ie.token})).apply(this,arguments)}function vh(D,b){return tu.apply(this,arguments)}function tu(){return(tu=(0,O.Z)(function*(D,b){var x;const F=yield fc(D),Y=Ce(b.subscriptionOptions),ne={method:"PATCH",headers:F,body:JSON.stringify(Y)};let Ie;try{Ie=yield(yield fetch(`${Ki(D.appConfig)}/${b.token}`,ne)).json()}catch(Me){throw vn.create("token-update-failed",{errorInfo:null===(x=Me)||void 0===x?void 0:x.toString()})}if(Ie.error)throw vn.create("token-update-failed",{errorInfo:Ie.error.message});if(!Ie.token)throw vn.create("token-update-no-token");return Ie.token})).apply(this,arguments)}function nu(D,b){return hc.apply(this,arguments)}function hc(){return(hc=(0,O.Z)(function*(D,b){var x;const Y={method:"DELETE",headers:yield fc(D)};try{const Ie=yield(yield fetch(`${Ki(D.appConfig)}/${b}`,Y)).json();if(Ie.error)throw vn.create("token-unsubscribe-failed",{errorInfo:Ie.error.message})}catch(ne){throw vn.create("token-unsubscribe-failed",{errorInfo:null===(x=ne)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Ki({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function fc(D){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ce({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const Y={web:{endpoint:x,auth:b,p256dh:D}};return F!==qi&&(Y.web.applicationPubKey=F),Y}const Pt=6048e5;function ru(D){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(D){const b=yield pc(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Zr(b.getKey("auth")),p256dh:Zr(b.getKey("p256dh"))},F=yield Io(D.firebaseDependencies);if(F){if(Rl(F.subscriptionOptions,x))return Date.now()>=F.createTime+Pt?Eo(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield nu(D.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return na(D.firebaseDependencies,x)}return na(D.firebaseDependencies,x)})).apply(this,arguments)}function wn(D){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(D){const b=yield Io(D.firebaseDependencies);b&&(yield nu(D.firebaseDependencies,b.token),yield Ws(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Eo(D,b){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,O.Z)(function*(D,b){try{const x=yield vh(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield Ut(D.firebaseDependencies,F),x}catch(x){throw yield wn(D),x}})).apply(this,arguments)}function na(D,b){return ra.apply(this,arguments)}function ra(){return(ra=(0,O.Z)(function*(D,b){const F={token:yield vt(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Ut(D,F),F.token})).apply(this,arguments)}function pc(D,b){return gc.apply(this,arguments)}function gc(){return(gc=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fr(b)})})).apply(this,arguments)}function Rl(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function ia(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function In(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const Y=b.notification.image;Y&&(D.notification.image=Y)}(b,D),function Ai(D,b){!b.data||(D.data=b.data)}(b,D),function mc(D,b){var x,F,Y,ne,Ie;if(!(b.fcmOptions||null!==(x=b.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const Me=null!==(Y=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Y?Y:null===(ne=b.notification)||void 0===ne?void 0:ne.click_action;Me&&(D.fcmOptions.link=Me);const Xe=null===(Ie=b.fcmOptions)||void 0===Ie?void 0:Ie.analytics_label;Xe&&(D.fcmOptions.analyticsLabel=Xe)}(b,D),b}function Zs(D){return"object"==typeof D&&!!D&&Xo in D}function Yi(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function sa(D){return vn.create("missing-app-config-values",{valueName:D})}Yi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yp{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function mp(D){if(!D||!D.options)throw sa("App Configuration Object");if(!D.name)throw sa("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw sa(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Y,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function yc(D){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(D){var b;try{D.swRegistration=yield navigator.serviceWorker.register(Si,{scope:zi}),D.swRegistration.update().catch(()=>{})}catch(x){throw vn.create("failed-service-worker-registration",{browserErrorMessage:null===(b=x)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function oa(D,b){return vc.apply(this,arguments)}function vc(){return(vc=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield yc(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw vn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function aa(D,b){return _c.apply(this,arguments)}function _c(){return(_c=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=qi)})).apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(D,b){if(!navigator)throw vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw vn.create("permission-blocked");return yield aa(D,b?.vapidKey),yield oa(D,b?.serviceWorkerRegistration),ru(D)})).apply(this,arguments)}function wc(D,b,x){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,O.Z)(function*(D,b,x){const F=Ec(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Xo],message_name:x[Za],message_time:x[dc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ec(D){switch(D){case Wi.NOTIFICATION_CLICKED:return"notification_open";case Wi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ks(){return(Ks=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Wi.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ia(x)):D.onMessageHandler.next(ia(x)));const F=x.data;Zs(F)&&"1"===F[ph]&&(yield wc(D,x.messageType,F))})).apply(this,arguments)}const Ys="@firebase/messaging",Wn=D=>{const b=new yp(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Nl(D,b){return Ks.apply(this,arguments)}(b,x)),b},Lr=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function au(D,b){return uu.apply(this,arguments)}(b,F)}};function Ol(){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dn(){(0,oe._registerComponent)(new de.wA("messaging",Wn,"PUBLIC")),(0,oe._registerComponent)(new de.wA("messaging-internal",Lr,"PRIVATE")),(0,oe.registerVersion)(Ys,"0.9.16"),(0,oe.registerVersion)(Ys,"0.9.16","esm2017")}();const bo="analytics",Fl="firebase_id",Qs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",du="https://www.googletagmanager.com/gtag/js",En=new ue.Yd("@firebase/analytics");function hu(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function fu(D,b){const x=document.createElement("script");x.src=`${du}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function wh(D,b,x,F,Y,ne){return To.apply(this,arguments)}function To(){return(To=(0,O.Z)(function*(D,b,x,F,Y,ne){const Ie=F[Y];try{if(Ie)yield b[Ie];else{const Xe=(yield hu(x)).find(pt=>pt.measurementId===Y);Xe&&(yield b[Xe.appId])}}catch(Me){En.error(Me)}D("config",Y,ne)})).apply(this,arguments)}function So(D,b,x,F,Y){return Js.apply(this,arguments)}function Js(){return(Js=(0,O.Z)(function*(D,b,x,F,Y){try{let ne=[];if(Y&&Y.send_to){let Ie=Y.send_to;Array.isArray(Ie)||(Ie=[Ie]);const Me=yield hu(x);for(const Xe of Ie){const pt=Me.find(ot=>ot.measurementId===Xe),wt=pt&&b[pt.appId];if(!wt){ne=[];break}ne.push(wt)}}0===ne.length&&(ne=Object.values(b)),yield Promise.all(ne),D("event",F,Y||{})}catch(ne){En.error(ne)}})).apply(this,arguments)}function Vl(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(du))return b;return null}const rr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),da=new class xi{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Bl(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ha(D){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,Y={method:"GET",headers:Bl(F)},ne=Qs.replace("{app-id}",x),Ie=yield fetch(ne,Y);if(200!==Ie.status&&304!==Ie.status){let Me="";try{const Xe=yield Ie.json();null!==(b=Xe.error)&&void 0!==b&&b.message&&(Me=Xe.error.message)}catch{}throw rr.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:Me})}return Ie.json()})).apply(this,arguments)}function An(D){return gi.apply(this,arguments)}function gi(){return(gi=(0,O.Z)(function*(D,b=da,x){const{appId:F,apiKey:Y,measurementId:ne}=D.options;if(!F)throw rr.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:F};throw rr.create("no-api-key")}const Ie=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Me=new yu;return setTimeout((0,O.Z)(function*(){Me.abort()}),void 0!==x?x:6e4),gu({appId:F,apiKey:Y,measurementId:ne},Ie,Me,b)})).apply(this,arguments)}function gu(D,b,x){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,Y=da){var ne,Ie;const{appId:Me,measurementId:Xe}=D;try{yield fa(F,b)}catch(pt){if(Xe)return En.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${null===(ne=pt)||void 0===ne?void 0:ne.message}]`),{appId:Me,measurementId:Xe};throw pt}try{const pt=yield ha(D);return Y.deleteThrottleMetadata(Me),pt}catch(pt){const wt=pt;if(!mu(wt)){if(Y.deleteThrottleMetadata(Me),Xe)return En.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${wt?.message}]`),{appId:Me,measurementId:Xe};throw pt}const ot=503===Number(null===(Ie=wt?.customData)||void 0===Ie?void 0:Ie.httpStatus)?(0,re.$s)(x,Y.intervalMillis,30):(0,re.$s)(x,Y.intervalMillis),mn={throttleEndTimeMillis:Date.now()+ot,backoffCount:x+1};return Y.setThrottleMetadata(Me,mn),En.debug(`Calling attemptFetch again in ${ot} millis`),gu(D,mn,F,Y)}})).apply(this,arguments)}function fa(D,b){return new Promise((x,F)=>{const Y=Math.max(b-Date.now(),0),ne=setTimeout(x,Y);D.addEventListener(()=>{clearTimeout(ne),F(rr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function mu(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class yu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Is,ga;function Es(){return(Es=(0,O.Z)(function*(D,b,x,F,Y){if(Y&&Y.global)D("event",x,F);else{const ne=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:ne}))}})).apply(this,arguments)}function to(D){ga=D}function xc(D){Is=D}function Ji(){return _u.apply(this,arguments)}function _u(){return(_u=(0,O.Z)(function*(){var D;if(!(0,re.hl)())return En.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(b){return En.warn(rr.create("indexeddb-unavailable",{errorInfo:null===(D=b)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Mo(){return(Mo=(0,O.Z)(function*(D,b,x,F,Y,ne,Ie){var Me;const Xe=An(D);Xe.then(ur=>{x[ur.measurementId]=ur.appId,D.options.measurementId&&ur.measurementId!==D.options.measurementId&&En.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${ur.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ur=>En.error(ur)),b.push(Xe);const pt=Ji().then(ur=>{if(ur)return F.getId()}),[wt,ot]=yield Promise.all([Xe,pt]);Vl()||fu(ne,wt.measurementId),ga&&(Y("consent","default",ga),to(void 0)),Y("js",new Date);const mn=null!==(Me=Ie?.config)&&void 0!==Me?Me:{};return mn.origin="firebase",mn.update=!0,null!=ot&&(mn[Fl]=ot),Y("config",wt.measurementId,mn),Is&&(Y("set",Is),xc(void 0)),wt.measurementId})).apply(this,arguments)}class wu{constructor(b){this.app=b}_delete(){return delete Vr[this.app.options.appId],Promise.resolve()}}let Vr={},Ds=[];const Ro={};let Oo,no,No="dataLayer",ma=!1;function Xm(D,b,x){!function vp(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),x=rr.create("invalid-analytics-context",{errorInfo:b});En.warn(x.message)}}();const F=D.options.appId;if(!F)throw rr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw rr.create("no-api-key");En.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vr[F])throw rr.create("already-exists",{id:F});if(!ma){!function Ll(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(No);const{wrappedGtag:ne,gtagCore:Ie}=function ua(D,b,x,F,Y){let ne=function(...Ie){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function pu(D,b,x,F){function ne(){return(ne=(0,O.Z)(function*(Ie,Me,Xe){try{"event"===Ie?yield So(D,b,x,Me,Xe):"config"===Ie?yield wh(D,b,x,F,Me,Xe):"consent"===Ie?D("consent","update",Xe):D("set",Me)}catch(pt){En.error(pt)}})).apply(this,arguments)}return function Y(Ie,Me,Xe){return ne.apply(this,arguments)}}(ne,D,b,x),{gtagCore:ne,wrappedGtag:window[Y]}}(Vr,Ds,Ro,No,"gtag");no=ne,Oo=Ie,ma=!0}return Vr[F]=function xo(D,b,x,F,Y,ne,Ie){return Mo.apply(this,arguments)}(D,Ds,Ro,b,Oo,No,x),new wu(D)}function ty(){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const nt="@firebase/analytics";!function gn(){(0,oe._registerComponent)(new de.wA(bo,(b,{options:x})=>Xm(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new de.wA("analytics-internal",function D(b){try{const x=b.getProvider(bo).getImmediate();return{logEvent:(F,Y,ne)=>function rn(D,b,x,F){D=(0,re.m9)(D),function jl(D,b,x,F,Y){return Es.apply(this,arguments)}(no,Vr[D.app.options.appId],b,x,F).catch(Y=>En.error(Y))}(x,F,Y,ne)}}catch(x){throw rr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(nt,"0.8.0"),(0,oe.registerVersion)(nt,"0.8.0","esm2017")}();var yi=k(4408),Dr=k(7565);const Eu=new class Cs extends Dr.v{}(class ya extends yi.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):b.flush(this)}});var Rc=k(4986),va=k(8505),Po=k(9468),bs=k(5363);const rt=new g.GfV("7.4.1"),_a="__angularfire_symbol__analyticsIsSupportedValue",Ts="__angularfire_symbol__analyticsIsSupported",wa="__angularfire_symbol__remoteConfigIsSupportedValue",ko="__angularfire_symbol__remoteConfigIsSupported",Zn="__angularfire_symbol__messagingIsSupportedValue",Nc="__angularfire_symbol__messagingIsSupported";function Ia(D,b,x){if(b){if(1===b.length)return b[0];const ne=b.filter(Ie=>Ie.app===x);if(1===ne.length)return ne[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ts]||(globalThis[Ts]=ty().then(D=>globalThis[_a]=D).catch(()=>globalThis[_a]=!1)),globalThis[Nc]||(globalThis[Nc]=Ol().then(D=>globalThis[Zn]=D).catch(()=>globalThis[Zn]=!1)),globalThis[ko]||(globalThis[ko]=Wa().then(D=>globalThis[wa]=D).catch(()=>globalThis[wa]=!1));const Ss=(D,b)=>{const x=b?[b]:(0,ee.C6)(),F=[];return x.forEach(Y=>{Y.container.getProvider(D).instances.forEach(Ie=>{F.includes(Ie)||F.push(Ie)})}),F};function As(){}class vi{constructor(b,x=Eu){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const Y=this.zone;return this.delegate.schedule(function(Ie){Y.runGuarded(()=>{b.apply(this,[Ie])})},x,F)}}class Pc{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",As,{},As,As)),x.pipe((0,va.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Lo=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new vi(Zone.current)),this.insideAngular=x.run(()=>new vi(Zone.current,Rc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Ur(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function es(D){return Ur(),function Vn(D){return function(x){return(x=x.lift(new Pc(D.ngZone))).pipe((0,Po.R)(D.outsideAngular),(0,bs.Q)(D.insideAngular))}}(Ur())(D)}},2090:(st,be,k)=>{k.d(be,{$s:()=>Hi,BH:()=>Ve,G6:()=>je,L:()=>he,LL:()=>ke,Sg:()=>Ae,UG:()=>me,US:()=>de,ZB:()=>j,ZR:()=>te,b$:()=>et,eu:()=>ge,hl:()=>V,jU:()=>fe,m9:()=>$t,ne:()=>vo,pd:()=>Pr,r3:()=>vr,ru:()=>Ze,tV:()=>pe,uI:()=>Je,vZ:()=>Nr,w1:()=>ye,xO:()=>hs,xb:()=>Jt,z$:()=>we,zI:()=>Z,zd:()=>Ci});const oe=function(q){const B=[];let L=0;for(let $=0;$<q.length;$++){let z=q.charCodeAt($);z<128?B[L++]=z:z<2048?(B[L++]=z>>6|192,B[L++]=63&z|128):55296==(64512&z)&&$+1<q.length&&56320==(64512&q.charCodeAt($+1))?(z=65536+((1023&z)<<10)+(1023&q.charCodeAt(++$)),B[L++]=z>>18|240,B[L++]=z>>12&63|128,B[L++]=z>>6&63|128,B[L++]=63&z|128):(B[L++]=z>>12|224,B[L++]=z>>6&63|128,B[L++]=63&z|128)}return B},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,B){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let z=0;z<q.length;z+=3){const De=q[z],Ue=z+1<q.length,tt=Ue?q[z+1]:0,an=z+2<q.length,qt=an?q[z+2]:0;let Tt=(15&tt)<<2|qt>>6,fn=63&qt;an||(fn=64,Ue||(Tt=64)),$.push(L[De>>2],L[(3&De)<<4|tt>>4],L[Tt],L[fn])}return $.join("")},encodeString(q,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(q):this.encodeByteArray(oe(q),B)},decodeString(q,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(q):function(q){const B=[];let L=0,$=0;for(;L<q.length;){const z=q[L++];if(z<128)B[$++]=String.fromCharCode(z);else if(z>191&&z<224){const De=q[L++];B[$++]=String.fromCharCode((31&z)<<6|63&De)}else if(z>239&&z<365){const an=((7&z)<<18|(63&q[L++])<<12|(63&q[L++])<<6|63&q[L++])-65536;B[$++]=String.fromCharCode(55296+(an>>10)),B[$++]=String.fromCharCode(56320+(1023&an))}else{const De=q[L++],Ue=q[L++];B[$++]=String.fromCharCode((15&z)<<12|(63&De)<<6|63&Ue)}}return B.join("")}(this.decodeStringToByteArray(q,B))},decodeStringToByteArray(q,B){this.init_();const L=B?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let z=0;z<q.length;){const De=L[q.charAt(z++)],tt=z<q.length?L[q.charAt(z)]:0;++z;const qt=z<q.length?L[q.charAt(z)]:64;++z;const Ot=z<q.length?L[q.charAt(z)]:64;if(++z,null==De||null==tt||null==qt||null==Ot)throw Error();$.push(De<<2|tt>>4),64!==qt&&($.push(tt<<4&240|qt>>2),64!==Ot&&$.push(qt<<6&192|Ot))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},he=function(q){return function(q){const B=oe(q);return de.encodeByteArray(B,!0)}(q).replace(/\./g,"")},pe=function(q){try{return de.decodeString(q,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function j(q,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return B}for(const L in B)!B.hasOwnProperty(L)||!K(L)||(q[L]=j(q[L],B[L]));return q}function K(q){return"__proto__"!==q}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,L)=>{this.resolve=B,this.reject=L})}wrapCallback(B){return(L,$)=>{L?this.reject(L):this.resolve($),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(L):B(L,$))}}}function Ae(q,B){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=B||"demo-project",z=q.iat||0,De=q.sub||q.user_id;if(!De)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:z,exp:z+3600,auth_time:z,sub:De,user_id:De,firebase:{sign_in_provider:"custom",identities:{}}},q);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ue)),""].join(".")}function we(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function me(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return"object"==typeof self&&self.self===self}function Ze(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){const q=we();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function je(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){return"object"==typeof indexedDB}function ge(){return new Promise((q,B)=>{try{let L=!0;const $="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open($);z.onsuccess=()=>{z.result.close(),L||self.indexedDB.deleteDatabase($),q(!0)},z.onupgradeneeded=()=>{L=!1},z.onerror=()=>{var De;B((null===(De=z.error)||void 0===De?void 0:De.message)||"")}}catch(L){B(L)}})}function Z(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class te extends Error{constructor(B,L,$){super(L),this.code=B,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}}class ke{constructor(B,L,$){this.service=B,this.serviceName=L,this.errors=$}create(B,...L){const $=L[0]||{},z=`${this.service}/${B}`,De=this.errors[B],Ue=De?function Oe(q,B){return q.replace(ct,(L,$)=>{const z=B[$];return null!=z?String(z):`<${$}?>`})}(De,$):"Error";return new te(z,`${this.serviceName}: ${Ue} (${z}).`,$)}}const ct=/\{\$([^}]+)}/g;function vr(q,B){return Object.prototype.hasOwnProperty.call(q,B)}function Jt(q){for(const B in q)if(Object.prototype.hasOwnProperty.call(q,B))return!1;return!0}function Nr(q,B){if(q===B)return!0;const L=Object.keys(q),$=Object.keys(B);for(const z of L){if(!$.includes(z))return!1;const De=q[z],Ue=B[z];if(hr(De)&&hr(Ue)){if(!Nr(De,Ue))return!1}else if(De!==Ue)return!1}for(const z of $)if(!L.includes(z))return!1;return!0}function hr(q){return null!==q&&"object"==typeof q}function hs(q){const B=[];for(const[L,$]of Object.entries(q))Array.isArray($)?$.forEach(z=>{B.push(encodeURIComponent(L)+"="+encodeURIComponent(z))}):B.push(encodeURIComponent(L)+"="+encodeURIComponent($));return B.length?"&"+B.join("&"):""}function Ci(q){const B={};return q.replace(/^\?/,"").split("&").forEach($=>{if($){const[z,De]=$.split("=");B[decodeURIComponent(z)]=decodeURIComponent(De)}}),B}function Pr(q){const B=q.indexOf("?");if(!B)return"";const L=q.indexOf("#",B);return q.substring(B,L>0?L:void 0)}function vo(q,B){const L=new We(q,B);return L.subscribe.bind(L)}class We{constructor(B,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{B(this)}).catch($=>{this.error($)})}next(B){this.forEachObserver(L=>{L.next(B)})}error(B){this.forEachObserver(L=>{L.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,L,$){let z;if(void 0===B&&void 0===L&&void 0===$)throw new Error("Missing Observer.");z=function $i(q,B){if("object"!=typeof q||null===q)return!1;for(const L of B)if(L in q&&"function"==typeof q[L])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:L,complete:$},void 0===z.next&&(z.next=Tn),void 0===z.error&&(z.error=Tn),void 0===z.complete&&(z.complete=Tn);const De=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),De}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,B)}sendOne(B,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{L(this.observers[B])}catch($){typeof console<"u"&&console.error&&console.error($)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tn(){}function Hi(q,B=1e3,L=2){const $=B*Math.pow(L,q),z=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+z)}function $t(q){return q&&q._delegate?q._delegate:q}},2040:(st,be,k)=>{var g=k(4650);let ee=null;function O(){return ee}const ue=new g.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function pe(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const U=new g.OlP("Location Initialized");let j=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ve(){return new j((0,g.LFG)(ue))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ze)},providedIn:"root"}),n})();const fe=new g.OlP("appBaseHref");let Ze=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Je(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Je(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),et=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Je(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(he),g.LFG(fe,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Be(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function Ee(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Je,n.joinWithSlash=Ae,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(g.LFG(me))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ye(){return new Se((0,g.LFG)(me))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class Qo{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zs=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Qo(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),ms(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ms(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ms(n,e){n.context.$implicit=e.item}let Ln=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class sc{constructor(){this.$implicit=null,this.ngIf=null}}function nr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}class bl{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class dp{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Gi=new dp,hp=new bl;let cc=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,g.QGY)(t))return Gi;if((0,g.F4k)(t))return hp;throw function qn(n,e){return new g.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.sBO,16))},n.\u0275pipe=g.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),ea=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function ar(n){return"server"===n}let Ka=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new yh((0,g.LFG)(ue),window)}),n})();class yh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Er(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Kr(this.window.history)||Kr(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Kr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ks extends class Nl extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new Ks)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function cu(){return Ys=Ys||document.querySelector("base"),Ys?Ys.getAttribute("href"):null}();return null==t?null:function Lr(n){Wn=Wn||document.createElement("a"),Wn.setAttribute("href",n);const e=Wn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function za(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Wn,Ys=null;const dn=new g.OlP("TRANSITION_ID"),Dc=[{provide:g.ip1,useFactory:function Ol(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[dn,ue,g.zs3],multi:!0}];let Cc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const lu=new g.OlP("EventManagerPlugins");let Pl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(lu),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class bc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Do=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Co=(()=>{class n extends Do{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(kl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(kl))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function kl(n){O().remove(n)}const bo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fl=/%COMP%/g;function fu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?fu(n,o,t):(o=o.replace(Fl,n),t.push(o))}return t}function Ll(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let To=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new So(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Vl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new Ul(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=fu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Pl),g.LFG(Co),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class So{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ua(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ua(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=bo[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=bo[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ll(r)):this.eventManager.addEventListener(e,t,Ll(r))}}function ua(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Vl extends So{constructor(e,t,r,o){super(e),this.component=r;const u=fu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function En(n){return"_ngcontent-%COMP%".replace(Fl,n)}(o+"-"+r.id),this.hostAttr=function hu(n){return"_nghost-%COMP%".replace(Fl,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ul extends So{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=fu(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let rr=(()=>{class n extends bc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ca=["alt","control","meta","shift"],la={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let da=(()=>{class n extends bc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),ca.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=d,w}static matchEventFullKeyCode(t,r){let o=la[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),ca.forEach(d=>{d!==o&&(0,xi[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const yu=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function gu(){Ks.makeCurrent()},multi:!0},{provide:ue,useFactory:function fa(){return(0,g.RDi)(document),document},deps:[]}]),Is=new g.OlP(""),jl=[{provide:g.rWj,useClass:class _h{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Es=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Xs(){return new g.qLn},deps:[]},{provide:lu,useClass:rr,multi:!0,deps:[ue,g.R0b,g.Lbi]},{provide:lu,useClass:da,multi:!0,deps:[ue]},{provide:To,useClass:To,deps:[Pl,Co,g.AFp]},{provide:g.FYo,useExisting:To},{provide:Do,useExisting:Co},{provide:Co,useClass:Co,deps:[ue]},{provide:Pl,useClass:Pl,deps:[lu,g.R0b]},{provide:class Io{},useClass:Cc,deps:[]},[]];let Sc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:dn,useExisting:g.AFp},Dc]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Is,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Es,...jl],imports:[ea,g.hGG]}),n})(),Qi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ue))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ao(){return new Qi((0,g.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var rn=k(8996),mi=k(7669);function nt(...n){const e=(0,mi.yG)(n);return(0,rn.D)(n,e)}var Qr=k(7579);class gn extends Qr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ya=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Dr=k(9751);const{isArray:Cs}=Array,{getPrototypeOf:Eu,prototype:wp,keys:Rc}=Object;function va(n){if(1===n.length){const e=n[0];if(Cs(e))return{args:e,keys:null};if(function Po(n){return n&&"object"==typeof n&&Eu(n)===wp}(e)){const t=Rc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var bs=k(4671),rt=k(4004);const{isArray:_a}=Array;function wa(n){return(0,rt.U)(e=>function Ts(n,e){return _a(e)?n(...e):n(e)}(n,e))}function ko(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Zn=k(5403),Nc=k(9672);function Fo(...n){const e=(0,mi.yG)(n),t=(0,mi.jO)(n),{args:r,keys:o}=va(n);if(0===r.length)return(0,rn.D)([],e);const u=new Dr.y(function Ip(n,e,t=bs.y){return r=>{Oc(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Oc(e,()=>{const C=(0,rn.D)(n[w],e);let A=!1;C.subscribe((0,Zn.x)(r,R=>{u[w]=R,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>ko(o,d):bs.y));return t?u.pipe(wa(t)):u}function Oc(n,e,t){n?(0,Nc.f)(t,n,e):e()}var Du=k(8189);function Ss(...n){return function Ia(){return(0,Du.J)(1)}()((0,rn.D)(n,(0,mi.yG)(n)))}var As=k(8421);function vi(n){return new Dr.y(e=>{(0,As.Xf)(n()).subscribe(e)})}var Pc=k(9635),Lo=k(576);function Ur(n,e){const t=(0,Lo.m)(n)?n:()=>n,r=o=>o.error(t());return new Dr.y(e?o=>e.schedule(r,0,o):r)}var Xi=k(515),Mi=k(727),pr=k(4482);function xs(){return(0,pr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class es extends Dr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,pr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mi.w0.EMPTY)}return e}refCount(){return xs()(this)}}function Vn(n,e){return(0,pr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Zn.x)(r,w=>{o?.unsubscribe();let C=0;const A=u++;(0,As.Xf)(n(w,A)).subscribe(o=(0,Zn.x)(r,R=>r.next(e?e(w,R,A,C++):R),()=>{o=null,m()}))},()=>{d=!0,m()}))})}function hn(n){return n<=0?()=>Xi.E:(0,pr.e)((e,t)=>{let r=0;e.subscribe((0,Zn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function Cu(...n){const e=(0,mi.yG)(n);return(0,pr.e)((t,r)=>{(e?Ss(n,t,e):Ss(n,t)).subscribe(r)})}function D(n,e){return(0,pr.e)((t,r)=>{let o=0;t.subscribe((0,Zn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var b=k(5577);function x(n){return(0,pr.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function F(n=Y){return(0,pr.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Y(){return new ya}function ne(n,e){const t=arguments.length>=2;return r=>r.pipe(n?D((o,u)=>n(o,u,r)):bs.y,hn(1),t?x(e):F(()=>new ya))}function Ie(n,e){return(0,Lo.m)(e)?(0,b.z)(n,e,1):(0,b.z)(n,1)}var Me=k(8505);function Xe(n){return(0,pr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Zn.x)(t,void 0,void 0,d=>{u=(0,As.Xf)(n(d,Xe(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function pt(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,Zn.x)(d,A=>{const R=C++;w=m?n(w,A,R):(m=!0,A),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function wt(n,e){return(0,pr.e)(pt(n,e,arguments.length>=2,!0))}function ot(n){return n<=0?()=>Xi.E:(0,pr.e)((e,t)=>{let r=[];e.subscribe((0,Zn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function mn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?D((o,u)=>n(o,u,r)):bs.y,ot(1),t?x(e):F(()=>new ya))}function Ms(n){return(0,pr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const It="primary",Ri=Symbol("RouteTitle");class Rs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Jr(n){return new Rs(n)}function Uo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function _i(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Eh(n[o],e[o]))return!1;return!0}function Eh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Ep(n){return Array.prototype.concat.apply([],n)}function Dp(n){return n.length>0?n[n.length-1]:null}function Kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ni(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,rn.D)(Promise.resolve(n)):nt(n)}const Mw={exact:function bp(n,e,t){if(!so(n.segments,e.segments)||!io(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bp(n.children[r],e.children[r],t))return!1;return!0},subset:Ea},Ch={exact:function bh(n,e){return _i(n,e)},subset:function Tp(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Eh(n[t],e[t]))},ignored:()=>!0};function sy(n,e,t){return Mw[t.paths](n.root,e.root,t.matrixParams)&&Ch[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ea(n,e,t){return Hl(n,e,e.segments,t)}function Hl(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!so(o,t)||e.hasChildren()||!io(o,t,r))}if(n.segments.length===t.length){if(!so(n.segments,t)||!io(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Ea(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(so(n.segments,o)&&io(n.segments,o,r)&&n.children[It])&&Hl(n.children[It],e,u,r)}}function io(n,e,t){return e.every((r,o)=>Ch[t](n[o].parameters,r.parameters))}class Da{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jr(this.queryParams)),this._queryParamMap}toString(){return ql.serialize(this)}}class kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Kn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wl(this)}}class Gl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Jr(this.parameters)),this._parameterMap}toString(){return xp(this)}}function so(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Th=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new zl},providedIn:"root"}),n})();class zl{parse(e){const t=new cy(e);return new Da(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ca(e.root,!0)}`,r=function Nw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Fc(t)}=${Fc(o)}`).join("&"):`${Fc(t)}=${Fc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function oy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ql=new zl;function Wl(n){return n.segments.map(e=>xp(e)).join("/")}function Ca(n,e){if(!n.hasChildren())return Wl(n);if(e){const t=n.children[It]?Ca(n.children[It],!1):"",r=[];return Kn(n.children,(o,u)=>{u!==It&&r.push(`${u}:${Ca(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Sp(n,e){let t=[];return Kn(n.children,(r,o)=>{o===It&&(t=t.concat(e(r,o)))}),Kn(n.children,(r,o)=>{o!==It&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===It?[Ca(n.children[It],!1)]:[`${o}:${Ca(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[It]?`${Wl(n)}/${t[0]}`:`${Wl(n)}/(${t.join("//")})`}}function Ap(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fc(n){return Ap(n).replace(/%3B/gi,";")}function Oi(n){return Ap(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bo(n){return decodeURIComponent(n)}function Sh(n){return Bo(n.replace(/\+/g,"%20"))}function xp(n){return`${Oi(n.path)}${function Rw(n){return Object.keys(n).map(e=>`;${Oi(e)}=${Oi(n[e])}`).join("")}(n.parameters)}`}const Ow=/^[^\/()?;=#]+/;function Mp(n){const e=n.match(Ow);return e?e[0]:""}const jo=/^[^=?&#]+/,uy=/^[^&#]+/;class cy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[It]=new kt(e,t)),r}parseSegment(){const e=Mp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new Gl(Bo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Mp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Mp(this.remaining);o&&(r=o,this.capture(r))}e[Bo(t)]=Bo(r)}parseQueryParam(e){const t=function ay(n){const e=n.match(jo);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Ah(n){const e=n.match(uy);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Sh(t),u=Sh(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Mp(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=It);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[It]:new kt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function ba(n){return n.segments.length>0?new kt([],{[It]:n}):n}function Pi(n){const e={};for(const r of Object.keys(n.children)){const u=Pi(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Lc(n){if(1===n.numberOfChildren&&n.children[It]){const e=n.children[It];return new kt(n.segments.concat(e.segments),e.children)}return n}(new kt(n.segments,e))}function Ns(n){return n instanceof Da}function kw(n,e,t,r,o){if(0===t.length)return Vc(e.root,e.root,e.root,r,o);const u=function Op(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Uc(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Kn(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Uc(t,e,r)}(t);return u.toRoot()?Vc(e.root,e.root,new kt([],{}),r,o):function d(w){const C=function Mh(n,e,t,r){if(n.isAbsolute)return new bu(e.root,!0,0);if(-1===r)return new bu(t,t===e.root,0);return function Rh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new bu(r,!1,o-u)}(t,r+(Ta(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?Aa(C.segmentGroup,C.index,u.commands):Tu(C.segmentGroup,C.index,u.commands);return Vc(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function Ta(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Sa(n){return"object"==typeof n&&null!=n&&n.outlets}function Vc(n,e,t,r,o){let d,u={};r&&Kn(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),d=n===e?t:Np(n,e,t);const m=ba(Pi(d));return new Da(m,u,o)}function Np(n,e,t){const r={};return Kn(n.children,(o,u)=>{r[u]=o===e?t:Np(o,e,t)}),new kt(n.segments,r)}class Uc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ta(r[0]))throw new g.vHH(4003,!1);const o=r.find(Sa);if(o&&o!==Dp(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Tu(n,e,t){if(n||(n=new kt([],{})),0===n.segments.length&&n.hasChildren())return Aa(n,e,t);const r=function dy(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Sa(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!Yl(w,C,d))return u;r+=2}else{if(!Yl(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new kt(n.segments.slice(0,r.pathIndex),{});return u.children[It]=new kt(n.segments.slice(r.pathIndex),n.children),Aa(u,0,o)}return r.match&&0===o.length?new kt(n.segments,{}):r.match&&!n.hasChildren()?xn(n,e,t):r.match?Aa(n,0,o):xn(n,e,t)}function Aa(n,e,t){if(0===t.length)return new kt(n.segments,{});{const r=function Kl(n){return Sa(n[0])?n[0].outlets:{[It]:n}}(t),o={};return Kn(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Tu(n.children[d],e,u))}),Kn(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new kt(n.segments,o)}}function xn(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Sa(u)){const w=Pp(u.outlets);return new kt(r,w)}if(0===o&&Ta(t[0])){r.push(new Gl(n.segments[e].path,kp(t[0]))),o++;continue}const d=Sa(u)?u.outlets[It]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&Ta(m)?(r.push(new Gl(d,kp(m))),o+=2):(r.push(new Gl(d,{})),o++)}return new kt(r,{})}function Pp(n){const e={};return Kn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=xn(new kt([],{}),0,t))}),e}function kp(n){const e={};return Kn(n,(t,r)=>e[r]=`${t}`),e}function Yl(n,e,t){return n==t.path&&_i(e,t.parameters)}class Os{constructor(e,t){this.id=e,this.url=t}}class Nh extends Os{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ts extends Os{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ql extends Os{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Oh extends Os{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hy extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fw extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lw extends Os{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bc extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jl extends Os{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xl{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ed{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ph{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fy{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class td{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fp{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cr{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=jc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=jc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Su(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Su(e,this._root).map(t=>t.value)}}function jc(n,e){if(n===e.value)return e;for(const t of e.children){const r=jc(n,t);if(r)return r}return null}function Su(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Su(n,t);if(r.length)return r.unshift(e),r}return[]}class ki{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Fi(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Fh extends kh{constructor(e,t){super(e),this.snapshot=t,cr(this,e)}toString(){return this.snapshot.toString()}}function rd(n,e){const t=function ns(n,e){const d=new Ps([],{},{},"",{},It,e,null,n.root,-1,{});return new od("",new ki(d,[]))}(n,e),r=new gn([new Gl("",{})]),o=new gn({}),u=new gn({}),d=new gn({}),m=new gn(""),w=new $o(r,o,d,m,u,It,e,t.root);return w.snapshot=t.root,new Fh(new ki(w,[]),t)}class $o{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.pipe((0,rt.U)(C=>C[Ri]))??nt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(e=>Jr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(e=>Jr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function id(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function sd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ps{constructor(e,t,r,o,u,d,m,w,C,A,R,G){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.title=this.data?.[Ri],this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._correctedLastPathIndex=G??A,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class od extends kh{constructor(e,t){super(t),this.url=e,cr(this,t)}toString(){return ad(this._root)}}function cr(n,e){e.value._routerState=n,e.children.forEach(t=>cr(n,t))}function ad(n){const e=n.children.length>0?` { ${n.children.map(ad).join(", ")} } `:"";return`${n.value}${e}`}function $c(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_i(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_i(e.params,t.params)||n.params.next(t.params),function ro(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_i(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_i(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ud(n,e){const t=_i(n.params,e.params)&&function kc(n,e){return so(n,e)&&n.every((t,r)=>_i(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ud(n.parent,e.parent))}function oo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Lp(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return oo(n,r,o);return oo(n,r)})}(n,e,t);return new ki(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>oo(n,m)),d}}const r=function Vp(n){return new $o(new gn(n.url),new gn(n.params),new gn(n.queryParams),new gn(n.fragment),new gn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>oo(n,u));return new ki(r,o)}}const Lh="ngNavigationCancelingError";function Au(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=Up(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function Up(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Lh]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Vh(n){return Bp(n)&&Ns(n.url)}function Bp(n){return n&&n[Lh]}class jp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new y,this.attachRef=null}}let y=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jp,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const h=!1;let p=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||It,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,h);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,h);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,h);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,h);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new _(t,m,o.injector);if(r&&function S(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(d,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(y),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class _{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$o?this.route:e===y?this.childContexts:this.parent.get(e,t)}}let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[p],encapsulation:2}),n})();function W(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function cd(n){const e=n.children&&n.children.map(cd),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==It&&(t.component=N),t}function ei(n){return n.outlet||It}function Hc(n,e){const t=n.filter(r=>ei(r)===e);return t.push(...n.filter(r=>ei(r)!==e)),t}function Gc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ld{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$c(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Fi(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),Kn(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Fi(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Fi(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Fi(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Fp(u.value.snapshot))}),e.children.length&&this.forwardEvent(new fy(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if($c(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),$c(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=Gc(o.snapshot),w=m?.get(g._Vd)??null;d.attachRef=null,d.route=o,d.resolver=w,d.injector=m,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class Hp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zc{constructor(e,t){this.component=e,this.route=t}}function py(n,e,t){const r=n._root;return qc(r,e?e._root:null,t,[r.value])}function xa(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function qc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Fi(e);return n.children.forEach(d=>{(function Uw(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function gy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!so(n.url,e.url);case"pathParamsOrQueryParamsChange":return!so(n.url,e.url)||!_i(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ud(n,e)||!_i(n.queryParams,e.queryParams);default:return!ud(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Hp(r)):(u.data=d.data,u._resolvedData=d._resolvedData),qc(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new zc(m.outlet.component,d))}else d&&dd(e,m,o),o.canActivateChecks.push(new Hp(r)),qc(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),Kn(u,(d,m)=>dd(d,t.getContext(m),o)),o}function dd(n,e,t){const r=Fi(n),o=n.value;Kn(r,(u,d)=>{dd(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new zc(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function hd(n){return"function"==typeof n}function Gp(n){return n instanceof ya||"EmptyError"===n?.name}const zp=Symbol("INITIAL_VALUE");function fd(){return Vn(n=>Fo(n.map(e=>e.pipe(hn(1),Cu(zp)))).pipe((0,rt.U)(e=>{for(const t of e)if(!0!==t){if(t===zp)return zp;if(!1===t||t instanceof Da)return t}return!0}),D(e=>e!==zp),hn(1)))}function ti(n){return(0,Pc.z)((0,Me.b)(e=>{if(Ns(e))throw Au(0,e)}),(0,rt.U)(e=>!0===e))}const qp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wp(n,e,t,r,o){const u=br(n,e,t);return u.matched?function _y(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?nt(o.map(d=>{const m=xa(d,n);return Ni(function OD(n){return n&&hd(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(fd(),ti()):nt(!0)}(r=W(e,r),e,t).pipe((0,rt.U)(d=>!0===d?u:{...qp})):nt(u)}function br(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Uo)(t,n,e);if(!o)return{...qp};const u={};Kn(o.posParams,(m,w)=>{u[w]=m.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function Mu(n,e,t,r,o="corrected"){if(t.length>0&&function HD(n,e,t){return t.some(r=>Zp(n,e,r)&&ei(r)!==It)}(n,t,r)){const d=new kt(e,function $D(n,e,t,r){const o={};o[It]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ei(u)!==It){const d=new kt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[ei(u)]=d}return o}(n,e,r,new kt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Hw(n,e,t){return t.some(r=>Zp(n,e,r))}(n,t,r)){const d=new kt(n.segments,function $w(n,e,t,r,o,u){const d={};for(const m of r)if(Zp(n,t,m)&&!o[ei(m)]){const w=new kt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[ei(m)]=w}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new kt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Zp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function wy(n,e,t,r){return!!(ei(n)===r||r!==It&&Zp(e,t,n))&&("**"===n.path||br(e,n,t).matched)}function Gw(n,e,t){return 0===e.length&&!n.children[t]}const Bh=!1;class Kp{constructor(e){this.segmentGroup=e||null}}class zw{constructor(e){this.urlTree=e}}function jh(n){return Ur(new Kp(n))}function qw(n){return Ur(new zw(n))}class zD{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Mu(this.urlTree.root,[],[],this.config).segmentGroup,t=new kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,It).pipe((0,rt.U)(u=>this.createUrlTree(Pi(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Xe(u=>{if(u instanceof zw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Kp?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,It).pipe((0,rt.U)(o=>this.createUrlTree(Pi(o),e.queryParams,e.fragment))).pipe(Xe(o=>{throw o instanceof Kp?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,Bh)}createUrlTree(e,t,r){const o=ba(e);return new Da(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,rt.U)(u=>new kt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,rn.D)(o).pipe(Ie(u=>{const d=r.children[u],m=Hc(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,rt.U)(w=>({segment:w,outlet:u})))}),wt((u,d)=>(u[d.outlet]=d.segment,u),{}),mn())}expandSegment(e,t,r,o,u,d){return(0,rn.D)(r).pipe(Ie(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(Xe(C=>{if(C instanceof Kp)return nt(null);throw C}))),ne(m=>!!m),Xe((m,w)=>{if(Gp(m))return Gw(t,o,u)?nt(new kt([],{})):jh(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return wy(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):jh(t):jh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?qw(u):this.lineralizeSegments(r,u).pipe((0,b.z)(d=>{const m=new kt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=br(t,o,u);if(!m)return jh(t);const R=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?qw(R):this.lineralizeSegments(o,R).pipe((0,b.z)(G=>this.expandSegment(e,t,r,G.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=W(r,e),r.loadChildren?(r._loadedRoutes?nt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,rt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new kt(o,{})))):nt(new kt(o,{}))):Wp(t,r,o,e).pipe(Vn(({matched:d,consumedSegments:m,remainingSegments:w})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,b.z)(A=>{const R=A.injector??e,G=A.routes,{segmentGroup:J,slicedSegments:ae}=Mu(t,m,w,G),Ne=new kt(J.segments,J.children);if(0===ae.length&&Ne.hasChildren())return this.expandChildren(R,G,Ne).pipe((0,rt.U)(Lt=>new kt(m,Lt)));if(0===G.length&&0===ae.length)return nt(new kt(m,{}));const Le=ei(r)===u;return this.expandSegment(R,Ne,G,ae,Le?It:u,!0).pipe((0,rt.U)(bt=>new kt(m.concat(bt.segments),bt.children)))})):jh(t)))}getChildConfig(e,t,r){return t.children?nt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?nt({routes:t._loadedRoutes,injector:t._loadedInjector}):function jD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?nt(!0):nt(o.map(d=>{const m=xa(d,n);return Ni(function my(n){return n&&hd(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(fd(),ti())}(e,t,r).pipe((0,b.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Me.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function pd(n){return Ur(Up(Bh,3))}())):nt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return nt(r);if(o.numberOfChildren>1||!o.children[It])return Ur(new g.vHH(4e3,Bh));o=o.children[It]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Da(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Kn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return Kn(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new kt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,Bh);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class _A{}class Ho{constructor(e,t,r,o,u,d,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=Mu(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,It).pipe((0,rt.U)(t=>{if(null===t)return null;const r=new Ps([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ki(r,t),u=new od(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=id(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,rn.D)(Object.keys(r.children)).pipe(Ie(o=>{const u=r.children[o],d=Hc(t,o);return this.processSegmentGroup(e,d,u,o)}),wt((o,u)=>o&&u?(o.push(...u),o):null),function ur(n,e=!1){return(0,pr.e)((t,r)=>{let o=0;t.subscribe((0,Zn.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),x(null),mn(),(0,rt.U)(o=>{if(null===o)return null;const u=Cy(o);return function Ey(n){n.sort((e,t)=>e.value.outlet===It?-1:t.value.outlet===It?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,rn.D)(t).pipe(Ie(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),ne(d=>!!d),Xe(d=>{if(Gp(d))return Gw(r,o,u)?nt([]):nt(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!wy(t,r,o,u))return nt(null);let d;if("**"===t.path){const m=o.length>0?Dp(o).parameters:{},w=Zw(r)+o.length;d=nt({snapshot:new Ps(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yp(t),ei(t),t.component??t._loadedComponent??null,t,gd(r),w,Qp(t),w),consumedSegments:[],remainingSegments:[]})}else d=Wp(r,t,o,e).pipe((0,rt.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const R=Zw(r)+w.length;return{snapshot:new Ps(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yp(t),ei(t),t.component??t._loadedComponent??null,t,gd(r),R,Qp(t),R),consumedSegments:w,remainingSegments:C}}));return d.pipe(Vn(m=>{if(null===m)return nt(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const R=t._loadedInjector??e,G=function Dy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:J,slicedSegments:ae}=Mu(r,C,A,G.filter(Le=>void 0===Le.redirectTo),this.relativeLinkResolution);if(0===ae.length&&J.hasChildren())return this.processChildren(R,G,J).pipe((0,rt.U)(Le=>null===Le?null:[new ki(w,Le)]));if(0===G.length&&0===ae.length)return nt([new ki(w,[])]);const Ne=ei(t)===u;return this.processSegment(R,G,J,ae,Ne?It:u).pipe((0,rt.U)(Le=>null===Le?null:[new ki(w,Le)]))}))}}function WD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Cy(n){const e=[],t=new Set;for(const r of n){if(!WD(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Cy(r.children);e.push(new ki(r.value,o))}return e.filter(r=>!t.has(r))}function gd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Zw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Yp(n){return n.data||{}}function Qp(n){return n.resolve||{}}function Jp(n){return"string"==typeof n.title||null===n.title}function Ty(n){return Vn(e=>{const t=n(e);return t?(0,rn.D)(t).pipe((0,rt.U)(()=>e)):nt(e)})}let Jw=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===It);return r}getResolvedTitleForRoute(t){return t.data[Ri]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Xw)},providedIn:"root"}),n})(),Xw=(()=>{class n extends Jw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qi))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class YD{}class e0 extends class QD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const $h=new g.OlP("",{providedIn:"root",factory:()=>({})}),Ay=new g.OlP("ROUTES");let xy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return nt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ni(t.loadComponent()).pipe((0,Me.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ms(()=>{this.componentLoaders.delete(t)})),o=new es(r,()=>new Qr.x).pipe(xs());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return nt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,rt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=Ep(w.get(Ay,[],g.XFs.Self|g.XFs.Optional)));return{routes:C.map(cd),injector:w}}),Ms(()=>{this.childrenLoaders.delete(r)})),d=new es(u,()=>new Qr.x).pipe(xs());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Ni(t()).pipe((0,b.z)(r=>r instanceof g.YKP||Array.isArray(r)?nt(r):(0,rn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class t0{}class n0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function r0(n){throw n}function s0(n,e,t){return e.parse("/")}const JD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function o0(){const n=(0,g.f3M)(Th),e=(0,g.f3M)(y),t=(0,g.f3M)(Se),r=(0,g.f3M)(g.zs3),o=(0,g.f3M)(g.Sil),u=(0,g.f3M)(Ay,{optional:!0})??[],d=(0,g.f3M)($h,{optional:!0})??{},m=(0,g.f3M)(Xw),w=(0,g.f3M)(Jw,{optional:!0}),C=(0,g.f3M)(t0,{optional:!0}),A=(0,g.f3M)(YD,{optional:!0}),R=new Qn(null,n,e,t,r,o,Ep(u));return C&&(R.urlHandlingStrategy=C),A&&(R.routeReuseStrategy=A),R.titleStrategy=w??m,function eg(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,R),R}let Qn=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qr.x,this.errorHandler=r0,this.malformedUriErrorHandler=s0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>nt(void 0),this.urlHandlingStrategy=new n0,this.routeReuseStrategy=new e0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(xy),this.configLoader.onLoadEndListener=G=>this.triggerEvent(new ed(G)),this.configLoader.onLoadStartListener=G=>this.triggerEvent(new Xl(G)),this.ngModule=d.get(g.h0i),this.console=d.get(g.c2e);const R=d.get(g.R0b);this.isNgZoneEnabled=R instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Cp(){return new Da(new kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=rd(this.currentUrlTree,this.rootComponentType),this.transitions=new gn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(D(o=>0!==o.id),(0,rt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Vn(o=>{let u=!1,d=!1;return nt(o).pipe((0,Me.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Vn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return My(m.source)&&(this.browserUrlTree=m.extractedUrl),nt(m).pipe(Vn(R=>{const G=this.transitions.getValue();return r.next(new Nh(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),G!==this.transitions.getValue()?Xi.E:Promise.resolve(R)}),function qD(n,e,t,r){return Vn(o=>function Ma(n,e,t,r,o){return new zD(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,rt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Me.b)(R=>{this.currentNavigation={...this.currentNavigation,finalUrl:R.urlAfterRedirects},o.urlAfterRedirects=R.urlAfterRedirects}),function Yw(n,e,t,r,o,u){return(0,b.z)(d=>function wA(n,e,t,r,o,u,d="emptyOnly",m="legacy"){return new Ho(n,e,t,r,o,d,m,u).recognize().pipe(Vn(w=>null===w?function Ww(n){return new Dr.y(e=>e.error(n))}(new _A):nt(w)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,rt.U)(m=>({...d,targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Me.b)(R=>{if(o.targetSnapshot=R.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const J=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(J,R)}this.browserUrlTree=R.urlAfterRedirects}const G=new hy(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(G)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:J,source:ae,restoredState:Ne,extras:Le}=m,Et=new Nh(G,this.serializeUrl(J),ae,Ne);r.next(Et);const bt=rd(J,this.rootComponentType).snapshot;return nt(o={...m,targetSnapshot:bt,urlAfterRedirects:J,extras:{...Le,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=m.rawUrl,m.resolve(null),Xi.E}),(0,Me.b)(m=>{const w=new Fw(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,rt.U)(m=>o={...m,guards:py(m.targetSnapshot,m.currentSnapshot,this.rootContexts)}),function kD(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?nt({...t,guardsResult:!0}):function FD(n,e,t,r){return(0,rn.D)(n).pipe((0,b.z)(o=>function BD(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?nt(u.map(m=>{const w=Gc(e)??o,C=xa(m,w);return Ni(function Uh(n){return n&&hd(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(ne())})).pipe(fd()):nt(!0)}(o.component,o.route,t,e,r)),ne(o=>!0!==o,!0))}(d,r,o,n).pipe((0,b.z)(m=>m&&function Bw(n){return"boolean"==typeof n}(m)?function vy(n,e,t,r){return(0,rn.D)(e).pipe(Ie(o=>Ss(function VD(n,e){return null!==n&&e&&e(new Ph(n)),nt(!0)}(o.route.parent,r),function LD(n,e){return null!==n&&e&&e(new td(n)),nt(!0)}(o.route,r),function jw(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Vw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>vi(()=>nt(d.guards.map(w=>{const C=Gc(d.node)??t,A=xa(w,C);return Ni(function yy(n){return n&&hd(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(ne())})).pipe(fd())));return nt(u).pipe(fd())}(n,o.path,t),function UD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return nt(!0);const o=r.map(u=>vi(()=>{const d=Gc(e)??t,m=xa(u,d);return Ni(function ND(n){return n&&hd(n.canActivate)}(m)?m.canActivate(e,n):d.runInContext(()=>m(e,n))).pipe(ne())}));return nt(o).pipe(fd())}(n,o.route,t))),ne(o=>!0!==o,!0))}(r,u,n,e):nt(m)),(0,rt.U)(m=>({...t,guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Me.b)(m=>{if(o.guardsResult=m.guardsResult,Ns(m.guardsResult))throw Au(0,m.guardsResult);const w=new Lw(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),D(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),Ty(m=>{if(m.guards.canActivateChecks.length)return nt(m).pipe((0,Me.b)(w=>{const C=new Bc(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Vn(w=>{let C=!1;return nt(w).pipe(function IA(n,e){return(0,b.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return nt(t);let u=0;return(0,rn.D)(o).pipe(Ie(d=>function md(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Jp(o)&&(u[Ri]=o.title),function by(n,e,t,r){const o=function Qw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return nt({});const u={};return(0,rn.D)(o).pipe((0,b.z)(d=>function KD(n,e,t,r){const o=Gc(e)??r,u=xa(n,o);return Ni(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(ne(),(0,Me.b)(m=>{u[d]=m}))),ot(1),function Vo(n){return(0,rt.U)(()=>n)}(u),Xe(d=>Gp(d)?Xi.E:Ur(d)))}(u,n,e,r).pipe((0,rt.U)(d=>(n._resolvedData=d,n.data=id(n,t).resolve,o&&Jp(o)&&(n.data[Ri]=o.title),null)))}(d.route,r,n,e)),(0,Me.b)(()=>u++),ot(1),(0,b.z)(d=>u===o.length?nt(t):Xi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Me.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,Me.b)(w=>{const C=new Jl(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),Ty(m=>{const w=C=>{const A=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,Me.b)(R=>{C.component=R}),(0,rt.U)(()=>{})));for(const R of C.children)A.push(...w(R));return A};return Fo(w(m.targetSnapshot.root)).pipe(x(),hn(1))}),Ty(()=>this.afterPreactivation()),(0,rt.U)(m=>{const w=function Xr(n,e,t){const r=oo(n,e._root,t?t._root:void 0);return new Fh(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o={...m,targetRouterState:w}}),(0,Me.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,rt.U)(r=>(new ld(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Me.b)({next(){u=!0},complete(){u=!0}}),Ms(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Xe(m=>{if(d=!0,Bp(m)){Vh(m)||(this.navigated=!0,this.restoreHistory(o,!0));const w=new Ql(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(w),Vh(m)){const C=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||My(o.source)};this.scheduleNavigation(C,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Oh(o.id,this.serializeUrl(o.extractedUrl),m,o.targetSnapshot??void 0);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Xi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const m={...u};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(o.state=m)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(cd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,A=w?this.currentUrlTree.fragment:d;let R=null;switch(m){case"merge":R={...this.currentUrlTree.queryParams,...u};break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),kw(C,this.currentUrlTree,t,R,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Ns(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function a0(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...JD}:!1===r?{...DA}:r,Ns(t))return sy(this.currentUrlTree,t,o);const u=this.parseUrl(t);return sy(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ts(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let m,w,C;d?(m=d.resolve,w=d.reject,C=d.promise):C=new Promise((G,J)=>{m=G,w=J});const A=++this.navigationId;let R;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),R=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):R=0,this.setTransition({id:A,targetPageId:R,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(G=>Promise.reject(G))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new Ql(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return o0()},providedIn:"root"}),n})();function My(n){return"imperative"!==n}let Ra=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Qr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,g.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,g.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,g.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Qn),g.Y36($o),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),n})();class Ry{}let Ny=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(D(t=>t instanceof ts),Ie(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,m=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,rn.D)(o).pipe((0,Du.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):nt(null);const u=o.pipe((0,b.z)(d=>null===d?nt(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,rn.D)([u,d]).pipe((0,Du.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qn),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Ry),g.LFG(xy))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wc=new g.OlP("");let c0=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Nh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ts&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Cr&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Cr(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Zc(n,e){return{\u0275kind:n,\u0275providers:e}}function Gh(n){return[{provide:Ay,multi:!0,useValue:n}]}function tC(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(Qn),o=n.get(Oy);1===n.get(Py)&&r.initialNavigation(),n.get(ks,null,g.XFs.Optional)?.setUpPreloading(),n.get(Wc,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.next(),o.complete()}}const Oy=new g.OlP("",{factory:()=>new Qr.x}),Py=new g.OlP("",{providedIn:"root",factory:()=>1});const ks=new g.OlP("");function iC(n){return Zc(0,[{provide:ks,useExisting:Ny},{provide:Ry,useExisting:n}])}const h0=new g.OlP("ROUTER_FORROOT_GUARD"),oC=[Se,{provide:Th,useClass:zl},{provide:Qn,useFactory:o0},y,{provide:$o,useFactory:function l0(n){return n.routerState.root},deps:[Qn]},xy];function f0(){return new g.PXZ("Router",Qn)}let p0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[oC,[],Gh(t),{provide:h0,useFactory:g0,deps:[[Qn,new g.FiY,new g.tp0]]},{provide:$h,useValue:r||{}},r?.useHash?{provide:me,useClass:et}:{provide:me,useClass:Ze},{provide:Wc,useFactory:()=>{const n=(0,g.f3M)(Qn),e=(0,g.f3M)(Ka),t=(0,g.f3M)($h);return t.scrollOffset&&e.setOffset(t.scrollOffset),new c0(n,e,t)}},r?.preloadingStrategy?iC(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:f0},r?.initialNavigation?m0(r):[],[{provide:ky,useFactory:tC},{provide:g.tb,multi:!0,useExisting:ky}]]}}static forChild(t){return{ngModule:n,providers:[Gh(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(h0,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[N]}),n})();function g0(n){return"guarded"}function m0(n){return["disabled"===n.initialNavigation?Zc(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(Qn);return()=>{e.setUpLocationChangeListener()}}},{provide:Py,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Zc(2,[{provide:Py,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(U,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(Qn),m=e.get(Oy);(function o(u){e.get(Qn).events.pipe(D(m=>m instanceof ts||m instanceof Ql||m instanceof Oh),(0,rt.U)(m=>m instanceof ts||m instanceof Ql&&(0===m.code||1===m.code)&&null),D(m=>null!==m),hn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||m.closed?nt(void 0):m),d.initialNavigation()}))}}]).\u0275providers:[]]}const ky=new g.OlP("");var y0=k(6451),sg=k(5363),v0=k(6063);class lC extends Qr.x{constructor(e=1/0,t=1/0,r=v0.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var dC=k(3099);function hC(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,dC.B)({connector:()=>new lC(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Fy(n,e){return(0,Lo.m)(e)?Vn(()=>n,e):Vn(()=>n)}var og=k(9468),Jn=k(5813),ao=k(2011);k(5867);var ve=k(5861),Kc=k(9681),ug=k(4859),Yt=k(2090),Ru=k(1877);const Vy=new Map,w0={activated:!1,tokenObservers:[]},Uy={initialized:!1,enabled:!1};function Br(n){return Vy.get(n)||w0}function rs(n,e){Vy.set(n,e)}function cg(){return Uy}class C0{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new Yt.BH,yield function vC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Yt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Un=new Yt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jy(n){if(!Br(n).activated)throw Un.create("use-before-activation",{appName:n.name})}function lg(n,e){return b0.apply(this,arguments)}function b0(){return(b0=(0,ve.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const J=yield d.getHeartbeatsHeader();J&&(u["X-Firebase-Client"]=J)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,C;try{w=yield fetch(n,m)}catch(J){throw Un.create("fetch-network-error",{originalErrorMessage:null===(r=J)||void 0===r?void 0:r.message})}if(200!==w.status)throw Un.create("fetch-status-error",{httpStatus:w.status});try{C=yield w.json()}catch(J){throw Un.create("fetch-parse-error",{originalErrorMessage:null===(o=J)||void 0===o?void 0:o.message})}const A=C.ttl.match(/^([\d.]+)(s)$/);if(!A||!A[2]||isNaN(Number(A[1])))throw Un.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${C.ttl}`});const R=1e3*Number(A[1]),G=Date.now();return{token:C.token,expireTimeMillis:G+R,issuedAtTimeMillis:G}})).apply(this,arguments)}function Hy(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const fg="firebase-app-check-store";let pg=null;function S0(){return pg||(pg=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(Un.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(fg,{keyPath:"compositeKey"})}}catch(r){e(Un.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),pg)}function gg(){return(gg=(0,ve.Z)(function*(n,e){const r=(yield S0()).transaction(fg,"readwrite"),u=r.objectStore(fg).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(Un.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const yg=new Ru.Yd("@firebase/app-check");function EC(n,e){return(0,Yt.hl)()?function A0(n,e){return function IC(n,e){return gg.apply(this,arguments)}(function mg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{yg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function DC(){return cg().enabled}function CC(){return R0.apply(this,arguments)}function R0(){return(R0=(0,ve.Z)(function*(){const n=cg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Nu={error:"UNKNOWN_ERROR"};function Zy(n){return Yt.US.encodeString(JSON.stringify(n),!1)}function vg(n){return _g.apply(this,arguments)}function _g(){return(_g=(0,ve.Z)(function*(n,e=!1){const t=n.app;jy(t);const r=Br(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&Kh(w)&&(o=w)}if(!e&&o&&Kh(o))return{token:o.token};let m,d=!1;if(DC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lg(Hy(t,yield CC()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield EC(t,w),rs(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?yg.warn(w.message):yg.error(w),u=w}return o?(m={token:o.token},rs(t,Object.assign(Object.assign({},r),{token:o})),yield EC(t,o)):m=TC(u),d&&Na(t,m),m})).apply(this,arguments)}function wg(n,e){const t=Br(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),rs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Ig(n){const{app:e}=n,t=Br(e);let r=t.tokenRefresher;r||(r=function bC(n){const{app:e}=n;return new C0((0,ve.Z)(function*(){let r;if(r=Br(e).token?yield vg(n,!0):yield vg(n),r.error)throw r.error}),()=>!0,()=>{const t=Br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),rs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Na(n,e){const t=Br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Kh(n){return n.expireTimeMillis-Date.now()>0}function TC(n){return{token:Zy(Nu),error:n}}class SC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Br(this.app);for(const t of e)wg(this.app,t.next);return Promise.resolve()}}const V0="app-check-internal";!function nv(){(0,Kc._registerComponent)(new ug.wA("app-check",n=>function N0(n,e){return new SC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(V0).initialize()})),(0,Kc._registerComponent)(new ug.wA(V0,n=>function AC(n){return{getToken:e=>vg(n,e),addTokenListener:e=>function Zh(n,e,t,r){const{app:o}=n,u=Br(o),d={next:t,error:r,type:e};if(rs(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&Kh(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),Ig(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Ig(n))}(n,"INTERNAL",e),removeTokenListener:e=>wg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Kc.registerVersion)("@firebase/app-check","0.5.12")}();class sv{constructor(){return(0,Jn.vb)("app-check")}}typeof window<"u"&&window,k(127);const $0=new g.OlP("angularfire2.auth.use-emulator"),bg=new g.OlP("angularfire2.auth.settings"),H0=new g.OlP("angularfire2.auth.tenant-id"),G0=new g.OlP("angularfire2.auth.langugage-code"),Qh=new g.OlP("angularfire2.auth.use-device-language"),Tg=new g.OlP("angularfire.auth.persistence"),Jh=(n,e,t,r,o,u,d,m)=>(0,ao.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,A]of Object.entries(d))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let Ed=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,R,G,J){const ae=new Qr.x,Ne=nt(void 0).pipe((0,sg.Q)(d.outsideAngular),Vn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2476)))),(0,rt.U)(()=>(0,ao.on)(t,u,r)),(0,rt.U)(Le=>Jh(Le,u,m,C,A,R,w,G)),hC({bufferSize:1,refCount:!1}));if(ar(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=nt(null);else{Ne.pipe(ne()).subscribe();const Et=Ne.pipe(Vn(Mt=>Mt.getRedirectResult().then(Nt=>Nt,()=>null)),Jn.iC,hC({bufferSize:1,refCount:!1})),bt=Ne.pipe(Vn(Mt=>new Dr.y(Nt=>({unsubscribe:u.runOutsideAngular(()=>Mt.onAuthStateChanged(jt=>Nt.next(jt),jt=>Nt.error(jt),()=>Nt.complete()))})))),Lt=Ne.pipe(Vn(Mt=>new Dr.y(Nt=>({unsubscribe:u.runOutsideAngular(()=>Mt.onIdTokenChanged(jt=>Nt.next(jt),jt=>Nt.error(jt),()=>Nt.complete()))}))));this.authState=Et.pipe(Fy(bt),(0,og.R)(d.outsideAngular),(0,sg.Q)(d.insideAngular)),this.user=Et.pipe(Fy(Lt),(0,og.R)(d.outsideAngular),(0,sg.Q)(d.insideAngular)),this.idToken=this.user.pipe(Vn(Mt=>Mt?(0,rn.D)(Mt.getIdToken()):nt(null))),this.idTokenResult=this.user.pipe(Vn(Mt=>Mt?(0,rn.D)(Mt.getIdTokenResult()):nt(null))),this.credential=(0,y0.T)(Et,ae,this.authState.pipe(D(Mt=>!Mt))).pipe((0,rt.U)(Mt=>Mt?.user?Mt:null),(0,og.R)(d.outsideAngular),(0,sg.Q)(d.insideAngular))}return(0,ao.pX)(this,Ne,u,{spy:{apply:(Le,Et,bt)=>{(Le.startsWith("signIn")||Le.startsWith("createUser"))&&bt.then(Lt=>ae.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ao.Dh),g.LFG(ao.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Jn.HU),g.LFG($0,8),g.LFG(bg,8),g.LFG(H0,8),g.LFG(G0,8),g.LFG(Qh,8),g.LFG(Tg,8),g.LFG(sv,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function ZA(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div"),g._uU(1," User is logged in "),g._UZ(2,"br"),g.TgZ(3,"button",4),g.NdJ("click",function(){g.CHM(t);const o=g.oxw();return g.KtG(o.logout())}),g._uU(4," Log out "),g.qZA()()}}function q0(n,e){1&n&&(g.TgZ(0,"div"),g._uU(1," User is not logged in\n"),g.qZA())}let ov=(()=>{class n{constructor(t){this.afAuth=t}ngOnInit(){}logout(){this.afAuth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ed))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-home"]],decls:10,vars:6,consts:[["mat-raised-button","","color","primary","routerLink","/signup"],["mat-raised-button","","color","primary","routerLink","/login"],["mat-raised-button","","color","primary","routerLink","/dashboard"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"button",0),g._uU(1," Signup\n"),g.qZA(),g.TgZ(2,"button",1),g._uU(3," Login\n"),g.qZA(),g.TgZ(4,"button",2),g._uU(5," Dashboard\n"),g.qZA(),g.YNc(6,ZA,5,0,"div",3),g.ALo(7,"async"),g.YNc(8,q0,2,0,"div",3),g.ALo(9,"async")),2&t&&(g.xp6(6),g.Q6J("ngIf",g.lcZ(7,2,r.afAuth.user)),g.xp6(2),g.Q6J("ngIf",!g.lcZ(9,4,r.afAuth.user)))},dependencies:[Ln,Ra,cc]}),n})(),av=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Oa=(()=>{class n extends av{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Tr=new g.OlP("NgValueAccessor"),ef={provide:Tr,useExisting:(0,g.Gpc)(()=>Qc),multi:!0},uv=new g.OlP("CompositionEventMode");let Qc=(()=>{class n extends av{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function FC(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(uv,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([ef]),g.qOj]}),n})();function Ou(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Dd(n){return null!=n&&"number"==typeof n.length}const ni=new g.OlP("NgValidators"),Jc=new g.OlP("NgAsyncValidators"),VC=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Cd{static min(e){return function Z0(n){return e=>{if(Ou(e.value)||Ou(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function K0(n){return e=>{if(Ou(e.value)||Ou(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Y0(n){return Ou(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function cv(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Ag(n){return Ou(n.value)||VC.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Q0(n){return e=>Ou(e.value)||!Dd(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function xg(n){return e=>Dd(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function J0(n){if(!n)return Mg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ou(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return UC(e)}static composeAsync(e){return rI(e)}}function Mg(n){return null}function X0(n){return null!=n}function eI(n){return(0,g.QGY)(n)?(0,rn.D)(n):n}function tI(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function nI(n,e){return e.map(t=>t(n))}function Pu(n){return n.map(e=>function Rg(n){return!n.validate}(e)?e:t=>e.validate(t))}function UC(n){if(!n)return null;const e=n.filter(X0);return 0==e.length?null:function(t){return tI(nI(t,e))}}function Xc(n){return null!=n?UC(Pu(n)):null}function rI(n){if(!n)return null;const e=n.filter(X0);return 0==e.length?null:function(t){return function W0(...n){const e=(0,mi.jO)(n),{args:t,keys:r}=va(n),o=new Dr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let A=0;A<d;A++){let R=!1;(0,As.Xf)(t[A]).subscribe((0,Zn.x)(u,G=>{R||(R=!0,C--),m[A]=G},()=>w--,void 0,()=>{(!w||!R)&&(C||u.next(r?ko(r,m):m),u.complete())}))}});return e?o.pipe(wa(e)):o}(nI(t,e).map(eI)).pipe((0,rt.U)(tI))}}function lv(n){return null!=n?rI(Pu(n)):null}function Ng(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iI(n){return n._rawValidators}function co(n){return n._rawAsyncValidators}function el(n){return n?Array.isArray(n)?n:[n]:[]}function gr(n,e){return Array.isArray(n)?n.includes(e):n===e}function ku(n,e){const t=el(e);return el(n).forEach(o=>{gr(t,o)||t.push(o)}),t}function tf(n,e){return el(e).filter(t=>!gr(n,t))}class is{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class jr extends is{get formDirective(){return null}get path(){return null}}class ss extends is{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class tl{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Pa=(()=>{class n extends tl{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ss,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),Fu=(()=>{class n extends tl{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(jr,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const nl="VALID",Pg="INVALID",Fa="PENDING",Vu="DISABLED";function af(n){return(cf(n)?n.validators:n)||null}function uI(n){return Array.isArray(n)?Xc(n):n||null}function uf(n,e){return(cf(e)?e.asyncValidators:n)||null}function kg(n){return Array.isArray(n)?lv(n):n||null}function cf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class hv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=uI(this._rawValidators),this._composedAsyncValidatorFn=kg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===nl}get invalid(){return this.status===Pg}get pending(){return this.status==Fa}get disabled(){return this.status===Vu}get enabled(){return this.status!==Vu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=uI(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=kg(e)}addValidators(e){this.setValidators(ku(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ku(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tf(e,this._rawAsyncValidators))}hasValidator(e){return gr(this._rawValidators,e)}hasAsyncValidator(e){return gr(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Fa,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vu,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=nl,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nl||this.status===Fa)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vu:nl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Fa,this._hasOwnPendingAsyncValidator=!0;const t=eI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Vu:this.errors?Pg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fa)?Fa:this._anyControlsHaveStatus(Pg)?Pg:nl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Td extends hv{constructor(e,t,r){super(af(t),uf(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Fg(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function dv(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function lf(n,e){return[...e.path,n]}function Sd(n,e){fv(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function pv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gv(n,e)})}(n,e),function dI(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function lI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gv(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function XC(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function df(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),hf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Lg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fv(n,e){const t=iI(n);null!==e.validator?n.setValidators(Ng(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=co(n);null!==e.asyncValidator?n.setAsyncValidators(Ng(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Lg(e._rawValidators,o),Lg(e._rawAsyncValidators,o)}function hf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=iI(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=co(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Lg(e._rawValidators,r),Lg(e._rawAsyncValidators,r),t}function gv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function wv(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Qc?t=u:function tb(n){return Object.getPrototypeOf(n.constructor)===Oa}(u)?r=u:o=u}),o||r||t||null}function pI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Iv(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Uu=class extends hv{constructor(e=null,t,r){super(af(t),uf(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cf(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Iv(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Iv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},qo={provide:ss,useExisting:(0,g.Gpc)(()=>Ev)},yI=(()=>Promise.resolve())();let Ev=(()=>{class n extends ss{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new Uu,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=wv(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),vv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Sd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){yI.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.D6c)(r);yI.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?lf(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(jr,9),g.Y36(ni,10),g.Y36(Jc,10),g.Y36(Tr,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([qo]),g.qOj,g.TTD]}),n})(),Ls=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),_I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const rl=new g.OlP("NgModelWithFormControlWarning"),db={provide:jr,useExisting:(0,g.Gpc)(()=>Ad)};let Ad=(()=>{class n extends jr{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Sd(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){df(t.control||null,t,!1),function mr(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function _v(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(df(r||null,t),(n=>n instanceof Uu)(o)&&(Sd(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function mv(n,e){fv(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function hI(n,e){return hf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fv(this.form,this),this._oldForm&&hf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ni,10),g.Y36(Jc,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([db]),g.qOj,g.TTD]}),n})();const bv={provide:ss,useExisting:(0,g.Gpc)(()=>il)};let il=(()=>{class n extends ss{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=wv(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),vv(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return lf(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(jr,13),g.Y36(ni,10),g.Y36(Jc,10),g.Y36(Tr,10),g.Y36(rl,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([bv]),g.qOj,g.TTD]}),n})(),Nv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[_I]}),n})(),FI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Nv]}),n})(),LI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:rl,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Nv]}),n})(),Hg=(()=>{class n{constructor(t,r){this.router=t,this.afAuth=r,this.userLoggedIn=!1,this.afAuth.onAuthStateChanged(o=>{this.userLoggedIn=!!o})}loginUser(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(()=>{console.log("Auth Service: loginUser: success")}).catch(o=>(console.log("Auth Service: login error..."),console.log("error code",o.code),console.log("error",o),{isValid:!1,message:o.message}))}signupUser(t){return this.afAuth.createUserWithEmailAndPassword(t.email,t.password).then(r=>{t.email.toLowerCase(),r.user&&r.user.sendEmailVerification()}).catch(r=>(console.log("Auth Service: signup error",r),{isValid:!1,message:r.message}))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qn),g.LFG(Ed))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function BI(n,e){if(1&n&&(g.TgZ(0,"div",7)(1,"span"),g._uU(2),g.qZA()()),2&n){const t=g.oxw();g.xp6(2),g.Oqu(t.firebaseErrorMessage)}}let XA=(()=>{class n{constructor(t,r,o){this.authService=t,this.router=r,this.afAuth=o,this.loginForm=new Td({email:new Uu("",[Cd.required,Cd.email]),password:new Uu("",Cd.required)}),this.firebaseErrorMessage=""}ngOnInit(){}loginUser(){this.loginForm.invalid||this.authService.loginUser(this.loginForm.value.email,this.loginForm.value.password).then(t=>{null==t?(console.log("logging in..."),this.router.navigate(["/dashboard"])):0==t.isValid&&(console.log("login error",t),this.firebaseErrorMessage=t.message)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hg),g.Y36(Qn),g.Y36(Ed))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:2,consts:[["mat-raised-button","","color","primary","routerLink","/home"],["type","",3,"formGroup","ngSubmit"],["appearance","outline"],["autocomplete","off","formControlName","email","type","email","matInput","","placeholder","Email"],["autocomplete","off","formControlName","password","type","password","matInput","","placeholder","Password"],["class","error-style",4,"ngIf"],["mat-raised-button","","color","primary"],[1,"error-style"]],template:function(t,r){1&t&&(g.TgZ(0,"button",0),g._uU(1," Home\n"),g.qZA(),g.TgZ(2,"div")(3,"form",1),g.NdJ("ngSubmit",function(){return r.loginUser()}),g.TgZ(4,"div")(5,"div",2)(6,"label"),g._uU(7,"Email"),g.qZA(),g._UZ(8,"input",3),g.qZA()(),g.TgZ(9,"div")(10,"div",2)(11,"label"),g._uU(12,"Password"),g.qZA(),g._UZ(13,"input",4),g.qZA()(),g.YNc(14,BI,3,1,"div",5),g.TgZ(15,"button",6),g._uU(16,"Login"),g.qZA()()()),2&t&&(g.xp6(3),g.Q6J("formGroup",r.loginForm),g.xp6(11),g.Q6J("ngIf",""!=r.firebaseErrorMessage))},dependencies:[Ln,Ra,Ls,Qc,Pa,Fu,Ad,il]}),n})();function mt(n,e){if(1&n&&(g.TgZ(0,"div",7)(1,"span"),g._uU(2),g.qZA()()),2&n){const t=g.oxw();g.xp6(2),g.Oqu(t.firebaseErrorMessage)}}let Db=(()=>{class n{constructor(t,r,o){this.authService=t,this.router=r,this.afAuth=o,this.firebaseErrorMessage="",this.signupForm=new Td({displayName:new Uu("",Cd.required),email:new Uu("",[Cd.required,Cd.email]),password:new Uu("",Cd.required)})}ngOnInit(){}signup(){this.signupForm.invalid||this.authService.signupUser(this.signupForm.value).then(t=>{null==t?this.router.navigate(["/dashboard"]):0==t.isValid&&(this.firebaseErrorMessage=t.message)}).catch(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hg),g.Y36(Qn),g.Y36(Ed))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-signup"]],decls:19,vars:2,consts:[["mat-raised-button","","color","primary","routerLink","/home"],[3,"formGroup","ngSubmit"],["autocomplete","off","formControlName","displayName","type","text","matInput","","placeholder","Display Name"],["formControlName","email","type","email","matInput","","placeholder","Email"],["autocomplete","off","formControlName","password","type","password","matInput","","placeholder","Password"],["class","error-style",4,"ngIf"],["mat-raised-button","","color","primary"],[1,"error-style"]],template:function(t,r){1&t&&(g.TgZ(0,"button",0),g._uU(1," Home\n"),g.qZA(),g.TgZ(2,"div")(3,"form",1),g.NdJ("ngSubmit",function(){return r.signup()}),g.TgZ(4,"div")(5,"label"),g._uU(6,"Full Name"),g.qZA(),g._UZ(7,"input",2),g.qZA(),g.TgZ(8,"div")(9,"label"),g._uU(10,"Email"),g.qZA(),g._UZ(11,"input",3),g.qZA(),g.TgZ(12,"div")(13,"label"),g._uU(14,"Password"),g.qZA(),g._UZ(15,"input",4),g.qZA(),g.YNc(16,mt,3,1,"div",5),g.TgZ(17,"button",6),g._uU(18,"Signup"),g.qZA()()()),2&t&&(g.xp6(3),g.Q6J("formGroup",r.signupForm),g.xp6(13),g.Q6J("ngIf",""!=r.firebaseErrorMessage))},dependencies:[Ln,Ra,Ls,Qc,Pa,Fu,Ad,il]}),n})(),Cb=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-dashboard"]],decls:8,vars:0,consts:[["mat-raised-button","","color","primary","routerLink","/home"],["mat-raised-button","","color","primary","routerLink","/chat"]],template:function(t,r){1&t&&(g.TgZ(0,"p"),g._uU(1,"dashboard works!"),g.qZA(),g.TgZ(2,"button",0),g._uU(3," Home\n"),g.qZA(),g.TgZ(4,"button",1),g._uU(5," Chat\n"),g.qZA(),g.TgZ(6,"h1"),g._uU(7,"SIMPLY THE BEST!!!"),g.qZA())},dependencies:[Ra]}),n})(),bb=(()=>{class n{constructor(t,r){this.router=t,this.afAuth=r}canActivate(t,r){return new Promise((o,u)=>{this.afAuth.onAuthStateChanged(d=>{d?o(!0):(console.log("Auth Guard: user is not logged in"),this.router.navigate(["/home"]),o(!1))})})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qn),g.LFG(Ed))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Rd=k(4986);function Ov(){return(0,pr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Zn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function zg(n,e){return n===e}k(2476);var ut,ex=k(3942),jI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wo={},qg=qg||{},Ct=jI||self;function mf(){}function yf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Pv="closure_uid_"+(1e9*Math.random()>>>0),_f=0;function Sb(n,e,t){return n.call.apply(n.bind,arguments)}function Ab(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function ri(n,e,t){return(ri=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Sb:Ab).apply(null,arguments)}function ol(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Sr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function La(){this.s=this.s,this.o=this.o}var xb={};La.prototype.s=!1,La.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Tb(n){return Object.prototype.hasOwnProperty.call(n,Pv)&&n[Pv]||(n[Pv]=++_f)}(this);delete xb[n]}},La.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Nd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function al(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function HI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(yf(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function ii(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ii.prototype.h=function(){this.defaultPrevented=!0};var Mb=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",mf,e),Ct.removeEventListener("test",mf,e)}catch{}return n}();function wf(n){return/^[\s\xa0]*$/.test(n)}var kv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Wg(n,e){return n<e?-1:n>e?1:0}function Zg(){var n=Ct.navigator;return n&&(n=n.userAgent)?n:""}function ho(n){return-1!=Zg().indexOf(n)}function Fv(n){return Fv[" "](n),n}Fv[" "]=mf;var Yg,n,tx=ho("Opera"),If=ho("Trident")||ho("MSIE"),Nb=ho("Edge"),GI=Nb||If,Lv=ho("Gecko")&&!(-1!=Zg().toLowerCase().indexOf("webkit")&&!ho("Edge"))&&!(ho("Trident")||ho("MSIE"))&&!ho("Edge"),Kg=-1!=Zg().toLowerCase().indexOf("webkit")&&!ho("Edge");function zI(){var n=Ct.document;return n?n.documentMode:void 0}e:{var Qg="",ul=(n=Zg(),Lv?/rv:([^\);]+)(\)|;)/.exec(n):Nb?/Edge\/([\d\.]+)/.exec(n):If?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Kg?/WebKit\/(\S+)/.exec(n):tx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ul&&(Qg=ul?ul[1]:""),If){var Vv=zI();if(null!=Vv&&Vv>parseFloat(Qg)){Yg=String(Vv);break e}}Yg=Qg}var Ob={};var WI=Ct.document&&If&&(zI()||parseInt(Yg,10))||void 0;function Ef(n,e){if(ii.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Lv){e:{try{Fv(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ef.X.h.call(this)}}Sr(Ef,ii);var kb={2:"touch",3:"pen",4:"mouse"};Ef.prototype.h=function(){Ef.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Va="closure_listenable_"+(1e6*Math.random()|0),Fb=0;function ZI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++Fb,this.ba=this.ea=!1}function Jg(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Xg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function KI(n){const e={};for(const t in n)e[t]=n[t];return e}const Bv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function YI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Bv.length;u++)t=Bv[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Od(n){this.src=n,this.g={},this.h=0}function jv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Nd(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Jg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function em(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Od.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=em(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new ZI(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var tm="closure_lm_"+(1e6*Math.random()|0),$v={};function QI(n,e,t,r,o){if(r&&r.once)return XI(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)QI(n,e[u],t,r,o);return null}return t=Zv(t),n&&n[Va]?n.N(e,t,vf(r)?!!r.capture:!!r,o):JI(n,e,t,!1,r,o)}function JI(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=vf(o)?!!o.capture:!!o,m=qv(n);if(m||(n[tm]=m=new Od(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function Hv(){const e=Lb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Mb||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(eE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function XI(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)XI(n,e[u],t,r,o);return null}return t=Zv(t),n&&n[Va]?n.O(e,t,vf(r)?!!r.capture:!!r,o):JI(n,e,t,!0,r,o)}function Gv(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Gv(n,e[u],t,r,o);else r=vf(r)?!!r.capture:!!r,t=Zv(t),n&&n[Va]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=em(u=n.g[e],t,r,o))&&(Jg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=qv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=em(e,t,r,o)),(t=-1<n?e[n]:null)&&zv(t))}function zv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Va])jv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(eE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=qv(e))?(jv(t,n),0==t.h&&(t.src=null,e[tm]=null)):Jg(n)}}}function eE(n){return n in $v?$v[n]:$v[n]="on"+n}function Lb(n,e){if(n.ba)n=!0;else{e=new Ef(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&zv(n),n=t.call(r,e)}return n}function qv(n){return(n=n[tm])instanceof Od?n:null}var Wv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zv(n){return"function"==typeof n?n:(n[Wv]||(n[Wv]=function(e){return n.handleEvent(e)}),n[Wv])}function Ar(){La.call(this),this.i=new Od(this),this.P=this,this.I=null}function $r(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ii(e,n);else if(e instanceof ii)e.target=e.target||n;else{var o=e;YI(e=new ii(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Df(d,r,!0,e)&&o}if(o=Df(d=e.g=n,r,!0,e)&&o,o=Df(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Df(d=e.g=t[u],r,!1,e)&&o}function Df(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var m=d.listener,w=d.ha||d.src;d.ea&&jv(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Sr(Ar,La),Ar.prototype[Va]=!0,Ar.prototype.removeEventListener=function(n,e,t,r){Gv(this,n,e,t,r)},Ar.prototype.M=function(){if(Ar.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jg(t[r]);delete n.g[e],n.h--}}this.I=null},Ar.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nm=Ct.JSON.stringify;function Vb(){var n=im;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Cf,Kv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Bb,n=>n.reset());class Bb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jb(n){Ct.setTimeout(()=>{throw n},0)}function tE(n,e){Cf||function Yv(){var n=Ct.Promise.resolve(void 0);Cf=function(){n.then($b)}}(),rm||(Cf(),rm=!0),im.add(n,e)}var rm=!1,im=new class Ub{constructor(){this.h=this.g=null}add(e,t){const r=Kv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function $b(){for(var n;n=Vb();){try{n.h.call(n.g)}catch(t){jb(t)}var e=Kv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}rm=!1}function sm(n,e){Ar.call(this),this.h=n||1,this.g=e||Ct,this.j=ri(this.kb,this),this.l=Date.now()}function bf(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Qv(n,e,t){if("function"==typeof n)t&&(n=ri(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ri(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function Jv(n){n.g=Qv(()=>{n.g=null,n.i&&(n.i=!1,Jv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Sr(sm,Ar),(ut=sm.prototype).ca=!1,ut.R=null,ut.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),$r(this,"tick"),this.ca&&(bf(this),this.start()))}},ut.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){sm.X.M.call(this),bf(this),delete this.g};class Pd extends La{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Jv(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kd(n){La.call(this),this.h=n,this.g={}}Sr(kd,La);var nE=[];function Hb(n,e,t,r){Array.isArray(t)||(t&&(nE[0]=t.toString()),t=nE);for(var o=0;o<t.length;o++){var u=QI(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Xv(n){Xg(n.g,function(e,t){this.g.hasOwnProperty(t)&&zv(e)},n),n.g={}}function Fd(){this.g=!0}function Ld(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function t_(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return nm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}kd.prototype.M=function(){kd.X.M.call(this),Xv(this)},kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fd.prototype.Aa=function(){this.g=!1},Fd.prototype.info=function(){};var Bu={},n_=null;function Tf(){return n_=n_||new Ar}function r_(n){ii.call(this,Bu.Oa,n)}function Sf(n){const e=Tf();$r(e,new r_(e,n))}function iE(n,e){ii.call(this,Bu.STAT_EVENT,n),this.stat=e}function wi(n){const e=Tf();$r(e,new iE(e,n))}function sE(n,e){ii.call(this,Bu.Pa,n),this.size=e}function Vd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}Bu.Oa="serverreachability",Sr(r_,ii),Bu.STAT_EVENT="statevent",Sr(iE,ii),Bu.Pa="timingevent",Sr(sE,ii);var i_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},s_={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function o_(){}function zb(){}o_.prototype.h=null;var c_,om={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function a_(){ii.call(this,"d")}function u_(){ii.call(this,"c")}function am(){}function Af(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new kd(this),this.O=qb,this.T=new sm(n=GI?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new aE}function aE(){this.i=null,this.g="",this.h=!1}Sr(a_,ii),Sr(u_,ii),Sr(am,o_),am.prototype.g=function(){return new XMLHttpRequest},am.prototype.i=function(){return{}},c_=new am;var qb=45e3,l_={},um={};function d_(n,e,t){n.K=1,n.v=Hd(os(e)),n.s=t,n.P=!0,uE(n,null)}function uE(n,e){n.F=Date.now(),Bd(n),n.A=os(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),gE(t.i,"t",r),n.C=0,t=n.l.H,n.h=new aE,n.g=SE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Pd(ri(n.Ka,n,n.g),n.N)),Hb(n.S,n.g,"readystatechange",n.hb),e=n.H?KI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Sf(1),function Gb(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var R=A.split("_");d=2<=R.length&&"type"==R[1]?d+(A+"=")+C+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function cE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Ud(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=lE(n,t),o==um){4==e&&(n.o=4,wi(14),r=!1),Ld(n.j,n.m,null,"[Incomplete Response]");break}if(o==l_){n.o=4,wi(15),Ld(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ld(n.j,n.m,o,null),f_(n,o)}cE(n)&&o!=um&&o!=l_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,wi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),S_(e),e.K=!0,wi(11))):(Ld(n.j,n.m,t,"[Invalid Chunked Response]"),ju(n),jd(n))}function lE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?um:(t=Number(e.substring(t,r)),isNaN(t)?l_:(r+=1)+t>e.length?um:(e=e.substr(r,t),n.C=r+t,e))}function Bd(n){n.V=Date.now()+n.O,h_(n,n.O)}function h_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Vd(ri(n.fb,n),e)}function xf(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function jd(n){0==n.l.G||n.I||rT(n.l,n)}function ju(n){xf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bf(n.T),Xv(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function f_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||m_(t.h,n)))if(!n.J&&m_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Kd(t),kf(t)}Hu(t),wi(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Vd(ri(t.bb,t),6e3));if(1>=gm(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Yd(t,11)}else if((n.J||t.g==n)&&Kd(t),!wf(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const R=C[4];null!=R&&(t.Ca=R,t.j.info("SVER="+t.Ca));const G=C[5];null!=G&&"number"==typeof G&&0<G&&(t.J=r=1.5*G,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const ae=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var u=r.h;u.g||-1==ae.indexOf("spdy")&&-1==ae.indexOf("quic")&&-1==ae.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(y_(u,u.h),u.h=null))}if(r.D){const Ne=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.za=Ne,Mn(r.F,r.D,Ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=TE(r,r.H?r.ka:null,r.V),d.J){yE(r.h,d);var m=d,w=r.J;w&&m.setTimeout(w),m.B&&(xf(m),Bd(m)),r.g=d}else T_(r);0<t.i.length&&dl(t)}else"stop"!=C[0]&&"close"!=C[0]||Yd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Yd(t,7):Pf(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}Sf(4)}catch{}}function hE(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(yf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function dE(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(yf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function nx(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(yf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ut=Af.prototype).setTimeout=function(n){this.O=n},ut.hb=function(n){n=n.target;const e=this.L;e&&3==po(n)?e.l():this.Ka(n)},ut.Ka=function(n){try{if(n==this.g)e:{const A=po(this.g);var e=this.g.Ea();const R=this.g.aa();if(!(3>A)&&(3!=A||GI||this.g&&(this.h.h||this.g.fa()||IE(this.g)))){this.I||4!=A||7==e||Sf(8==e||0>=R?3:2),xf(this);var t=this.g.aa();this.Y=t;t:if(cE(this)){var r=IE(this.g);n="";var o=r.length,u=4==po(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ju(this),jd(this);var d="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function e_(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wf(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,wi(12),ju(this),jd(this);break e}Ld(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,f_(this,t)}this.P?(Ud(this,A,d),GI&&this.i&&3==A&&(Hb(this.S,this.T,"tick",this.gb),this.T.start())):(Ld(this.j,this.m,d,null),f_(this,d)),4==A&&ju(this),this.i&&!this.I&&(4==A?rT(this.l,this):(this.i=!1,Bd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,wi(12)):(this.o=0,wi(13)),ju(this),jd(this)}}}catch{}},ut.gb=function(){if(this.g){var n=po(this.g),e=this.g.fa();this.C<e.length&&(xf(this),Ud(this,n,e),this.i&&4!=n&&Bd(this))}},ut.cancel=function(){this.I=!0,ju(this)},ut.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function rE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Sf(3),wi(17)),ju(this),this.o=2,jd(this)):h_(this,this.V-n)};var fE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof cl){this.h=void 0!==e?e:n.h,cm(this,n.j),this.s=n.s,this.g=n.g,$d(this,n.m),this.l=n.l,e=n.i;var t=new Gd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),fo(this,t),this.o=n.o}else n&&(t=String(n).match(fE))?(this.h=!!e,cm(this,t[1]||"",!0),this.s=Ua(t[2]||""),this.g=Ua(t[3]||"",!0),$d(this,t[4]),this.l=Ua(t[5]||"",!0),fo(this,t[6]||"",!0),this.o=Ua(t[7]||"")):(this.h=!!e,this.i=new Gd(null,this.h))}function os(n){return new cl(n)}function cm(n,e,t){n.j=t?Ua(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function $d(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function fo(n,e,t){e instanceof Gd?(n.i=e,function rx(n,e){e&&!n.j&&(Ba(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(hm(this,r),gE(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Mf(e,Kb)),n.i=new Gd(e,n.h))}function Mn(n,e,t){n.i.set(e,t)}function Hd(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Ua(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Mf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Zb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Zb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Mf(e,pE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Mf(e,pE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Mf(t,"/"==t.charAt(0)?dm:lm,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Mf(t,Yb)),n.join("")};var pE=/[#\/\?@]/g,lm=/[#\?:]/g,dm=/[#\?]/g,Kb=/[#\?@]/g,Yb=/#/g;function Gd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ba(n){n.g||(n.g=new Map,n.h=0,n.i&&function Wb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hm(n,e){Ba(n),e=zd(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function p_(n,e){return Ba(n),e=zd(n,e),n.g.has(e)}function gE(n,e,t){hm(n,e),0<t.length&&(n.i=null,n.g.set(zd(n,e),al(t)),n.h+=t.length)}function zd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function fm(n){this.l=n||mE,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ga&&Ct.g.Ga()&&Ct.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=Gd.prototype).add=function(n,e){Ba(this),this.i=null,n=zd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){Ba(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ut.oa=function(){Ba(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ut.W=function(n){Ba(this);let e=[];if("string"==typeof n)p_(this,n)&&(e=e.concat(this.g.get(zd(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ut.set=function(n,e){return Ba(this),this.i=null,p_(this,n=zd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var mE=10;function pm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function gm(n){return n.h?1:n.g?n.g.size:0}function m_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function y_(n,e){n.g?n.g.add(e):n.h=e}function yE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function vE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return al(n.i)}function mm(){}function v_(){this.g=new mm}function _E(n,e,t){const r=t||"";try{hE(n,function(o,u){let d=o;vf(o)&&(d=nm(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Rf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function qd(n){this.l=n.$b||null,this.j=n.ib||!1}function ym(n,e){Ar.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=vm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fm.prototype.cancel=function(){if(this.i=vE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},mm.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},mm.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},Sr(qd,o_),qd.prototype.g=function(){return new ym(this.l,this.j)},qd.prototype.i=function(n){return function(){return n}}({}),Sr(ym,Ar);var vm=0;function __(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function Nf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Wd(n)}function Wd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=ym.prototype).open=function(n,e){if(this.readyState!=vm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Wd(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nf(this)),this.readyState=vm},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Wd(this)),this.g&&(this.readyState=3,Wd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(typeof Ct.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;__(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Nf(this):Wd(this),3==this.readyState&&__(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,Nf(this))},ut.Ta=function(n){this.g&&(this.response=n,Nf(this))},ut.ga=function(){this.g&&Nf(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ym.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Jb=Ct.JSON.parse;function Wt(n){Ar.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ll,this.K=this.L=!1}Sr(Wt,Ar);var ll="",Xb=/^https?$/i,eT=["POST","PUT"];function tT(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,w_(n),$u(n)}function w_(n){n.D||(n.D=!0,$r(n,"complete"),$r(n,"error"))}function I_(n){if(n.h&&typeof qg<"u"&&(!n.C[1]||4!=po(n)||2!=n.aa()))if(n.v&&4==po(n))Qv(n.Ha,0,n);else if($r(n,"readystatechange"),4==po(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(fE)[1]||null;if(!o&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;o=u.substr(0,u.length-1)}r=!Xb.test(o?o.toLowerCase():"")}t=r}if(t)$r(n,"complete"),$r(n,"success");else{n.m=6;try{var d=2<po(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",w_(n)}}finally{$u(n)}}}function $u(n,e){if(n.g){wE(n);const t=n.g,r=n.C[0]?mf:null;n.g=null,n.C=null,e||$r(n,"ready");try{t.onreadystatechange=r}catch{}}}function wE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function po(n){return n.g?n.g.readyState:0}function IE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ll:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function E_(n){let e="";return Xg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function D_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=E_(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Of(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function EE(n){this.Ca=0,this.i=[],this.j=new Fd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=Of("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=Of("baseRetryDelayMs",5e3,n),this.ab=Of("retryDelaySeedMs",1e4,n),this.Za=Of("forwardChannelMaxRetries",2,n),this.ta=Of("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new fm(n&&n.concurrentRequestLimit),this.Fa=new v_,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Pf(n){if(C_(n),3==n.G){var e=n.U++,t=os(n.F);Mn(t,"SID",n.I),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),Zd(n,t),(e=new Af(n,n.j,e,void 0)).K=2,e.v=Hd(os(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=SE(e.l,null),e.g.da(e.v)),e.F=Date.now(),Bd(e)}bE(n)}function kf(n){n.g&&(S_(n),n.g.cancel(),n.g=null)}function C_(n){kf(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),Kd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function dl(n){pm(n.h)||n.m||(n.m=!0,tE(n.Ja,n),n.C=0)}function nT(n,e){var t;t=e?e.m:n.U++;const r=os(n.F);Mn(r,"SID",n.I),Mn(r,"RID",t),Mn(r,"AID",n.T),Zd(n,r),n.o&&n.s&&D_(r,n.o,n.s),t=new Af(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=DE(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),y_(n.h,t),d_(t,r,e)}function Zd(n,e){n.ia&&Xg(n.ia,function(t,r){Mn(e,r,t)}),n.l&&hE({},function(t,r){Mn(e,r,t)})}function DE(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ri(n.l.Qa,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const A=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{_E(A,d,"req"+C+"_")}catch{r&&r(A)}}if(m){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function T_(n){n.g||n.u||(n.Z=1,tE(n.Ia,n),n.A=0)}function Hu(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Vd(ri(n.Ia,n),CE(n,n.A)),n.A++,0))}function S_(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function A_(n){n.g=new Af(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=os(n.sa);Mn(e,"RID","rpc"),Mn(e,"SID",n.I),Mn(e,"CI",n.L?"0":"1"),Mn(e,"AID",n.T),Mn(e,"TYPE","xmlhttp"),Zd(n,e),n.o&&n.s&&D_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Hd(os(e)),t.s=null,t.P=!0,uE(t,n)}function Kd(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function rT(n,e){var t=null;if(n.g==e){Kd(n),S_(n),n.g=null;var r=2}else{if(!m_(n.h,e))return;t=e.D,yE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;$r(r=Tf(),new sE(r,t,e,o)),dl(n)}else T_(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function b_(n,e){return!(gm(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=Vd(ri(n.Ja,n,e),CE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Hu(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Yd(n,5);break;case 4:Yd(n,10);break;case 3:Yd(n,6);break;default:Yd(n,2)}}function CE(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function Yd(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ri(n.jb,n);t||(t=new cl("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||cm(t,"https"),Hd(t)),function Qb(n,e){const t=new Fd;if(Ct.Image){const r=new Image;r.onload=ol(Rf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ol(Rf,t,r,"TestLoadImage: error",!1,e),r.onabort=ol(Rf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ol(Rf,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else wi(2);n.G=0,n.l&&n.l.va(e),bE(n),C_(n)}function bE(n){if(n.G=0,n.la=[],n.l){const e=vE(n.h);(0!=e.length||0!=n.i.length)&&(HI(n.la,e),HI(n.la,n.i),n.h.i.length=0,al(n.i),n.i.length=0),n.l.ua()}}function TE(n,e,t){var r=t instanceof cl?os(t):new cl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),$d(r,r.m);else{var o=Ct.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new cl(null,void 0);r&&cm(u,r),e&&(u.g=e),o&&$d(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Mn(r,t,e),Mn(r,"VER",n.ma),Zd(n,r),r}function SE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wt(t&&n.Da&&!n.ra?new qd({ib:!0}):n.ra)).L=n.H,e}function x_(){}function Ff(){if(If&&!(10<=Number(WI)))throw Error("Environmental error: no available transport.")}function as(n,e){Ar.call(this),this.g=new EE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!wf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!wf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Qd(this)}function M_(n){a_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function R_(){u_.call(this),this.status=1}function Qd(n){this.g=n}(ut=Wt.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():c_.g(),this.C=function oE(n){return n.h||(n.h=n.i())}(this.u?this.u:c_),this.g.onreadystatechange=ri(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void tT(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Ct.FormData&&n instanceof Ct.FormData,!(0<=Nd(eT,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wE(this),0<this.B&&((this.K=function ix(n){return If&&function Pb(){return function Rb(n){var e=Ob;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=kv(String(Yg)).split("."),t=kv("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Wg(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Wg(0==o[2].length,0==u[2].length)||Wg(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ri(this.qa,this)):this.A=Qv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){tT(this,u)}},ut.qa=function(){typeof qg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$r(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$r(this,"complete"),$r(this,"abort"),$u(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$u(this,!0)),Wt.X.M.call(this)},ut.Ha=function(){this.s||(this.F||this.v||this.l?I_(this):this.eb())},ut.eb=function(){I_(this)},ut.aa=function(){try{return 2<po(this)?this.g.status:-1}catch{return-1}},ut.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ut.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Jb(e)}},ut.Ea=function(){return this.m},ut.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=EE.prototype).ma=8,ut.G=1,ut.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Af(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=KI(u),YI(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=DE(this,o,e),Mn(t=os(this.F),"RID",n),Mn(t,"CVER",22),this.D&&Mn(t,"X-HTTP-Session-Id",this.D),Zd(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(E_(u)))+"&"+e:this.o&&D_(t,this.o,u)),y_(this.h,o),this.Xa&&Mn(t,"TYPE","init"),this.O?(Mn(t,"$req",e),Mn(t,"SID","null"),o.Z=!0,d_(o,t,null)):d_(o,t,e),this.G=2}}else 3==this.G&&(n?nT(this,n):0==this.i.length||pm(this.h)||nT(this))},ut.Ia=function(){if(this.u=null,A_(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Vd(ri(this.cb,this),n)}},ut.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,wi(10),kf(this),A_(this))},ut.bb=function(){null!=this.v&&(this.v=null,kf(this),Hu(this),wi(19))},ut.jb=function(n){n?(this.j.info("Successfully pinged google.com"),wi(2)):(this.j.info("Failed to ping google.com"),wi(1))},(ut=x_.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Qa=function(){},Ff.prototype.g=function(n,e){return new as(n,e)},Sr(as,Ar),as.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;wi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=TE(n,null,n.V),dl(n)},as.prototype.close=function(){Pf(this.g)},as.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=nm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&dl(e)},as.prototype.M=function(){this.g.l=null,delete this.j,Pf(this.g),delete this.g,as.X.M.call(this)},Sr(M_,a_),Sr(R_,u_),Sr(Qd,x_),Qd.prototype.xa=function(){$r(this.g,"a")},Qd.prototype.wa=function(n){$r(this.g,new M_(n))},Qd.prototype.va=function(n){$r(this.g,new R_(n))},Qd.prototype.ua=function(){$r(this.g,"b")},Ff.prototype.createWebChannel=Ff.prototype.g,as.prototype.send=as.prototype.u,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,i_.NO_ERROR=0,i_.TIMEOUT=8,i_.HTTP_ERROR=6,s_.COMPLETE="complete",zb.EventType=om,om.OPEN="a",om.CLOSE="b",om.ERROR="c",om.MESSAGE="d",Ar.prototype.listen=Ar.prototype.N,Wt.prototype.listenOnce=Wt.prototype.O,Wt.prototype.getLastError=Wt.prototype.Na,Wt.prototype.getLastErrorCode=Wt.prototype.Ea,Wt.prototype.getStatus=Wt.prototype.aa,Wt.prototype.getResponseJson=Wt.prototype.Ra,Wt.prototype.getResponseText=Wt.prototype.fa,Wt.prototype.send=Wt.prototype.da;var iT=Wo.createWebChannelTransport=function(){return new Ff},AE=Wo.getStatEventTarget=function(){return Tf()},N_=Wo.ErrorCode=i_,xE=Wo.EventType=s_,ME=Wo.Event=Bu,O_=Wo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},RE=Wo.FetchXmlHttpFactory=qd,_m=Wo.WebChannel=zb,sT=Wo.XhrIo=Wt;const oT="@firebase/firestore";class yr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yr.UNAUTHENTICATED=new yr(null),yr.GOOGLE_CREDENTIALS=new yr("google-credentials-uid"),yr.FIRST_PARTY=new yr("first-party-uid"),yr.MOCK_USER=new yr("mock-user");let Lf="9.10.0";const hl=new Ru.Yd("@firebase/firestore");function NE(){return hl.logLevel}function Pe(n,...e){if(hl.logLevel<=Ru.in.DEBUG){const t=e.map(OE);hl.debug(`Firestore (${Lf}): ${n}`,...t)}}function lr(n,...e){if(hl.logLevel<=Ru.in.ERROR){const t=e.map(OE);hl.error(`Firestore (${Lf}): ${n}`,...t)}}function Jd(n,...e){if(hl.logLevel<=Ru.in.WARN){const t=e.map(OE);hl.warn(`Firestore (${Lf}): ${n}`,...t)}}function OE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${Lf}) INTERNAL ASSERTION FAILED: `+n;throw lr(e),new Error(e)}function Dt(n,e){n||Qe()}function Ge(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Yt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yr.UNAUTHENTICATED))}shutdown(){}}class aT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FE{constructor(e){this.t=e,this.currentUser=yr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Hr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ve.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Hr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new wm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new yr(e)}}class ox{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=yr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ax{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new ox(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(yr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uT{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.A=t.token,new LE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class lT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=cT(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function xt(n,e){return n<e?-1:n>e?1:0}function Vf(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function VE(n){return n+"\0"}class Rn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Rn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new Rn(0,0))}static max(){return new _t(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Im{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Im.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Im?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zt extends Im{construct(e,t,r){return new Zt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Zt(t)}static emptyPath(){return new Zt([])}}const UE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends Im{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return UE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Zt.fromString(e))}static fromName(e){return new qe(Zt.fromString(e).popFirst(5))}static empty(){return new qe(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Zt(e.slice()))}}class Vi{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function k_(n){return n.fields.find(e=>2===e.kind)}function ja(n){return n.fields.filter(e=>2!==e.kind)}Vi.UNKNOWN_ID=-1;class Ii{constructor(e,t){this.fieldPath=e,this.kind=t}}class fl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fl(0,Ei.min())}}function BE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new Rn(t+1,0):new Rn(t,r));return new Ei(o,qe.empty(),e)}function jE(n){return new Ei(n.readTime,n.key,-1)}class Ei{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ei(_t.min(),qe.empty(),-1)}static max(){return new Ei(_t.max(),qe.empty(),-1)}}function Em(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:xt(n.largestBatchId,e.largestBatchId))}const F_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $E{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function $a(n){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,ve.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==F_)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),Dm.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const u=e.length,d=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{d[C]=A,++m,m===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new se((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Uf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Hr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Us(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=GE(r.target.error);this.P.reject(new Us(e,o))}}static open(e,t,r,o){try{return new Uf(t,e.transaction(o,r))}catch(u){throw new Us(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new V_(t)}}class go{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===go.D((0,Yt.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Di(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Yt.hl)())return!1;if(go.N())return!0;const e=(0,Yt.z$)(),t=go.D(e),r=0<t&&t<10,o=go.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Us(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new xe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new xe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Us(e,m))},u.onupgradeneeded=d=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Uf.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),se.reject(A))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class L_{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Di(this.U.delete())}}class Us extends xe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ha(n){return"IndexedDbTransactionError"===n.name}class V_{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Di(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Di(this.store.add(e))}get(e){return Di(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Di(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Di(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new se((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new se((r,o)=>{t.onerror=u=>{const d=GE(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}H(e,t){const r=[];return new se((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new L_(m),C=t(m.primaryKey,m.value,w);if(C instanceof se){const A=C.catch(R=>(w.done(),se.reject(R)));r.push(A)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Di(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=GE(r.target.error);t(o)}})}let HE=!1;function GE(n){const e=go.D((0,Yt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HE||(HE=!0,setTimeout(()=>{throw r},0)),r}}return n}class fT{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ha(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield $a(r)}yield t.nt(6e4)}))}}class pT{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return se.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Pe("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(m=>{o-=m,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(m=>(Pe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=jE(u);Em(d,r)>0&&(r=d)}),new Ei(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ui{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function zE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ui.at=-1;class jn{constructor(e,t){this.comparator=e,this.root=t||xr.EMPTY}insert(e,t){return new jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cm(this.root,e,this.comparator,!0)}}class Cm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??xr.RED,this.left=o??xr.EMPTY,this.right=u??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new xr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return xr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1,xr.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bm(this.data.getIterator())}getIteratorFrom(e){return new bm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class bm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pl(n){return n.hasNext()?n.getNext():void 0}class Bi{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Bi([])}unionWith(e){let t=new yn(Bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new dr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const WE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=WE.exec(n);if(Dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dn(n.seconds),nanos:Dn(n.nanos)}}function Dn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zu(n){return"string"==typeof n?dr.fromBase64String(n):dr.fromUint8Array(n)}function U_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function B_(n){const e=n.mapValue.fields.__previous_value__;return U_(e)?B_(e):e}function Xd(n){const e=mo(n.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}class mT{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class qu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}function Tm(n){return null==n}function Sm(n){return 0===n&&1/n==-1/0}function j_(n){return"number"==typeof n&&Number.isInteger(n)&&!Sm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Am={nullValue:"NULL_VALUE"};function gl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?U_(n)?4:Mm(n)?9007199254740991:10:Qe()}function Ga(n,e){if(n===e)return!0;const t=gl(n);if(t!==gl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xd(n).isEqual(Xd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=mo(r.timestampValue),d=mo(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,zu(n.bytesValue).isEqual(zu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Dn(r.geoPointValue.latitude)===Dn(o.geoPointValue.latitude)&&Dn(r.geoPointValue.longitude)===Dn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Dn(r.integerValue)===Dn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Dn(r.doubleValue),d=Dn(o.doubleValue);return u===d?Sm(u)===Sm(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Vf(n.arrayValue.values||[],e.arrayValue.values||[],Ga);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(zE(u)!==zE(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Ga(u[m],d[m])))return!1;return!0}(n,e);default:return Qe()}var o}function xm(n,e){return void 0!==(n.values||[]).find(t=>Ga(t,e))}function ml(n,e){if(n===e)return 0;const t=gl(n),r=gl(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Dn(o.integerValue||o.doubleValue),m=Dn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return yT(n.timestampValue,e.timestampValue);case 4:return yT(Xd(n),Xd(e));case 5:return xt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=zu(o),m=zu(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=xt(d[w],m[w]);if(0!==C)return C}return xt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=xt(Dn(o.latitude),Dn(u.latitude));return 0!==d?d:xt(Dn(o.longitude),Dn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=ml(d[w],m[w]);if(C)return C}return xt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Wu.mapValue&&u===Wu.mapValue)return 0;if(o===Wu.mapValue)return 1;if(u===Wu.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const R=xt(m[A],C[A]);if(0!==R)return R;const G=ml(d[m[A]],w[C[A]]);if(0!==G)return G}return xt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function yT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return xt(n,e);const t=mo(n),r=mo(e),o=xt(t.seconds,r.seconds);return 0!==o?o:xt(t.nanos,r.nanos)}function Bf(n){return $_(n)}function $_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=mo(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zu(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=$_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${$_(r.fields[m])}`;return u+"}"}(n.mapValue):Qe();var e}function Zo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function H_(n){return!!n&&"integerValue"in n}function jf(n){return!!n&&"arrayValue"in n}function G_(n){return!!n&&"nullValue"in n}function Zu(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $f(n){return!!n&&"mapValue"in n}function yl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Mm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vT(n){return"nullValue"in n?Am:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zo(qu.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Qe()}function z_(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zo(qu.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wu:Qe()}function Rm(n,e){const t=ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Hf(n,e){const t=ml(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$f(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(t)}setAll(e){let t=Bn.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=yl(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());$f(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ga(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];$f(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Gu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new si(yl(this.value))}}function _T(n){const e=[];return Gu(n.fields,(t,r)=>{const o=new Bn([t]);if($f(r)){const u=_T(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Bi(e)}class Cn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Cn(e,0,_t.min(),_t.min(),si.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,_t.min(),si.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,_t.min(),si.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ux{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ht=null}}function q_(n,e=null,t=[],r=[],o=null,u=null,d=null){return new ux(n,e,t,r,o,u,d)}function vl(n){const e=Ge(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Bf(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Tm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bf(r)).join(",")),e.ht=t}return e.ht}function Gf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!bT(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Ga(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QE(n.startAt,e.startAt)&&QE(n.endAt,e.endAt)}function Nm(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function zf(n,e){return n.filters.filter(t=>t instanceof Gr&&t.field.isEqual(e))}function W_(n,e,t){let r=Am,o=!0;for(const u of zf(n,e)){let d=Am,m=!0;switch(u.op){case"<":case"<=":d=vT(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Am}Rm({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Rm({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Z_(n,e,t){let r=Wu,o=!0;for(const u of zf(n,e)){let d=Wu,m=!0;switch(u.op){case">=":case">":d=z_(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Wu}Hf({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Hf({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Gr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new IT(e,t,r):"array-contains"===t?new KE(e,r):"in"===t?new Y_(e,r):"not-in"===t?new DT(e,r):"array-contains-any"===t?new CT(e,r):new Gr(e,t,r)}static lt(e,t,r){return"in"===t?new ZE(e,r):new K_(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(ml(t,this.value)):null!==t&&gl(this.value)===gl(t)&&this.ft(ml(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class IT extends Gr{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.ft(t)}}class ZE extends Gr{constructor(e,t){super(e,"in",t),this.keys=ET(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class K_ extends Gr{constructor(e,t){super(e,"not-in",t),this.keys=ET(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ET(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class KE extends Gr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jf(t)&&xm(t.arrayValue,this.value)}}class Y_ extends Gr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xm(this.value.arrayValue,t)}}class DT extends Gr{constructor(e,t){super(e,"not-in",t)}matches(e){if(xm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xm(this.value.arrayValue,t)}}class CT extends Gr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xm(this.value.arrayValue,r))}}class _l{constructor(e,t){this.position=e,this.inclusive=t}}class qf{constructor(e,t="asc"){this.field=e,this.dir=t}}function bT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function YE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(d.referenceValue),t.key):ml(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function QE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ga(n.position[t],e.position[t]))return!1;return!0}class Ku{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function TT(n,e,t,r,o,u,d,m){return new Ku(n,e,t,r,o,u,d,m)}function Wf(n){return new Ku(n)}function ST(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function JE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Q_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function XE(n){return null!==n.collectionGroup}function Zf(n){const e=Ge(n);if(null===e._t){e._t=[];const t=Q_(e),r=JE(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new qf(t)),e._t.push(new qf(Bn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new qf(Bn.keyField(),u))}}}return e._t}function us(n){const e=Ge(n);if(!e.wt)if("F"===e.limitType)e.wt=q_(e.path,e.collectionGroup,Zf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Zf(e))t.push(new qf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new _l(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new _l(e.startAt.position,e.startAt.inclusive):null;e.wt=q_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function J_(n,e,t){return new Ku(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Om(n,e){return Gf(us(n),us(e))&&n.limitType===e.limitType}function AT(n){return`${vl(us(n))}|lt:${n.limitType}`}function i(n){return`Query(target=${function wT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Bf(r.value)}`;var r}).join(", ")}]`),Tm(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Bf(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Bf(t)).join(",")),`Target(${e})`}(us(n))}; limitType=${n.limitType})`}function s(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=YE(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,Zf(t),r)||t.endAt&&!function(o,u,d){const m=YE(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,Zf(t),r)));var t,r}function a(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function c(n){return(e,t)=>{let r=!1;for(const o of Zf(n)){const u=l(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function l(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?ml(m,w):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}function f(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sm(e)?"-0":e}}function v(n){return{integerValue:""+n}}function I(n,e){return j_(e)?v(e):f(n,e)}class E{constructor(){this._=void 0}}function T(n,e,t){return n instanceof H?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Q?_e(n,e):n instanceof Re?He(n,e):function(r,o){const u=P(r,o),d=dt(u)+dt(r.yt);return H_(u)&&H_(r.yt)?v(d):f(r.It,d)}(n,e)}function M(n,e,t){return n instanceof Q?_e(n,e):n instanceof Re?He(n,e):t}function P(n,e){return n instanceof Ye?H_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class H extends E{}class Q extends E{constructor(e){super(),this.elements=e}}function _e(n,e){const t=Te(e);for(const r of n.elements)t.some(o=>Ga(o,r))||t.push(r);return{arrayValue:{values:t}}}class Re extends E{constructor(e){super(),this.elements=e}}function He(n,e){let t=Te(e);for(const r of n.elements)t=t.filter(o=>!Ga(o,r));return{arrayValue:{values:t}}}class Ye extends E{constructor(e,t){super(),this.It=e,this.yt=t}}function dt(n){return Dn(n.integerValue||n.doubleValue)}function Te(n){return jf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ht{constructor(e,t){this.field=e,this.transform=t}}class Nn{constructor(e,t){this.version=e,this.transformResults=t}}class on{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class th{}function Pm(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fm(n.key,on.none()):new Yu(n.key,n.data,on.none());{const t=n.data,r=si.empty();let o=new yn(Bn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new yo(n.key,r,new Bi(o.toArray()),on.none())}}function X_(n,e,t){n instanceof Yu?function(r,o,u){const d=r.value.clone(),m=lx(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof yo?function(r,o,u){if(!eh(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=lx(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(cx(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wl(n,e,t,r){return n instanceof Yu?function(o,u,d,m){if(!eh(o.precondition,u))return d;const w=o.value.clone(),C=dx(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof yo?function(o,u,d,m){if(!eh(o.precondition,u))return d;const w=dx(o.fieldTransforms,m,u),C=u.data;return C.setAll(cx(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,eh(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function ew(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=P(r.transform,o||null);null!=u&&(null===t&&(t=si.empty()),t.set(r.field,u))}return t||null}function km(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Vf(t,r,(o,u)=>function sn(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Q&&r instanceof Q||t instanceof Re&&r instanceof Re?Vf(t.elements,r.elements,Ga):t instanceof Ye&&r instanceof Ye?Ga(t.yt,r.yt):t instanceof H&&r instanceof H);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Yu extends th{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class yo extends th{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function cx(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function lx(n,e,t){const r=new Map;Dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,M(d,m,t[o]))}return r}function dx(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,T(u,d,e))}return r}class Fm extends th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xT extends th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YR{constructor(e){this.count=e}}var Mr,Xt;function hx(n){switch(n){default:return Qe();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function fx(n){if(void 0===n)return lr("GRPC error has no .code"),le.UNKNOWN;switch(n){case Mr.OK:return le.OK;case Mr.CANCELLED:return le.CANCELLED;case Mr.UNKNOWN:return le.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return le.INTERNAL;case Mr.UNAVAILABLE:return le.UNAVAILABLE;case Mr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Mr.NOT_FOUND:return le.NOT_FOUND;case Mr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Mr.ABORTED:return le.ABORTED;case Mr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Mr.DATA_LOSS:return le.DATA_LOSS;default:return Qe()}}(Xt=Mr||(Mr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class nh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return gT(this.inner)}size(){return this.innerSize}}const QR=new jn(qe.comparator);function Bs(){return QR}const px=new jn(qe.comparator);function tw(...n){let e=px;for(const t of n)e=e.insert(t.key,t);return e}function gx(n){let e=px;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qu(){return nw()}function mx(){return nw()}function nw(){return new nh(n=>n.toString(),(n,e)=>n.isEqual(e))}const JR=new jn(qe.comparator),XR=new yn(qe.comparator);function Ft(...n){let e=XR;for(const t of n)e=e.add(t);return e}const eN=new yn(xt);function eD(){return eN}class rw{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,iw.createSynthesizedTargetChangeForCurrentChange(e,t)),new rw(_t.min(),r,eD(),Bs(),Ft())}}class iw{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new iw(dr.EMPTY_BYTE_STRING,t,Ft(),Ft(),Ft())}}class tD{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class yx{constructor(e,t){this.targetId=e,this.At=t}}class vx{constructor(e,t,r=dr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class _x{constructor(){this.Rt=0,this.bt=Ix(),this.Pt=dr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ft(),t=Ft(),r=Ft();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Qe()}}),new iw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=Ix()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class tN{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Bs(),this.qt=wx(),this.Kt=new yn(xt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(Nm(u))if(0===r){const d=new qe(u.path);this.jt(t,d,Cn.newNoDocument(d,_t.min()))}else Dt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,d)=>{const m=this.Xt(d);if(m){if(u.current&&Nm(m.target)){const w=new qe(m.target.path);null!==this.Ut.get(w)||this.ee(d,w)||this.jt(d,w,Cn.newNoDocument(w,e))}u.Dt&&(t.set(d,u.xt()),u.Nt())}});let r=Ft();this.qt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.Xt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,d)=>d.setReadTime(e));const o=new rw(e,t,this.Kt,this.Ut,r);return this.Ut=Bs(),this.qt=wx(),this.Kt=new yn(xt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new _x,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new yn(xt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new _x),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function wx(){return new jn(qe.comparator)}function Ix(){return new jn(qe.comparator)}const nN={asc:"ASCENDING",desc:"DESCENDING"},rN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class iN{constructor(e,t){this.databaseId=e,this.gt=t}}function sw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ex(n,e){return n.gt?e.toBase64():e.toUint8Array()}function sN(n,e){return sw(n,e.toTimestamp())}function oi(n){return Dt(!!n),_t.fromTimestamp(function(e){const t=mo(e);return new Rn(t.seconds,t.nanos)}(n))}function MT(n,e){return(t=n,new Zt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Dx(n){const e=Zt.fromString(n);return Dt(Nx(e)),e}function ow(n,e){return MT(n.databaseId,e.path)}function Ju(n,e){const t=Dx(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(bx(t))}function RT(n,e){return MT(n.databaseId,e)}function Cx(n){const e=Dx(n);return 4===e.length?Zt.emptyPath():bx(e)}function aw(n){return new Zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bx(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Tx(n,e,t){return{name:ow(n,e),fields:t.value.mapValue.fields}}function Sx(n,e,t){const r=Ju(n,e.name),o=oi(e.updateTime),u=new si({mapValue:{fields:e.fields}}),d=Cn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function uw(n,e){let t;if(e instanceof Yu)t={update:Tx(n,e.key,e.value)};else if(e instanceof Fm)t={delete:ow(n,e.key)};else if(e instanceof yo)t={update:Tx(n,e.key,e.data),updateMask:pN(e.fieldMask)};else{if(!(e instanceof xT))return Qe();t={verify:ow(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof H)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Q)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Re)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ye)return{fieldPath:u.field.canonicalString(),increment:d.yt};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:sN(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Qe()),t;var o}function NT(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?on.updateTime(oi(o.updateTime)):void 0!==o.exists?on.exists(o.exists):on.none():on.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(Dt("REQUEST_TIME"===d.setToServerValue),m=new H):"appendMissingElements"in d?m=new Q(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Re(d.removeAllFromArray.values||[]):"increment"in d?m=new Ye(u,d.increment):Qe();const w=Bn.fromServerFormat(d.fieldPath);return new ht(w,m)}(n,o)):[];var o;if(e.update){const o=Ju(n,e.update.name),u=new si({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Bi((e.updateMask.fieldPaths||[]).map(C=>Bn.fromServerFormat(C)));return new yo(o,u,d,t,r)}return new Yu(o,u,t,r)}if(e.delete){const o=Ju(n,e.delete);return new Fm(o,t)}if(e.verify){const o=Ju(n,e.verify);return new xT(o,t)}return Qe()}function Ax(n,e){return{documents:[RT(n,e.path)]}}function xx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=RT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=RT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(A=>function(R){if("=="===R.op){if(Zu(R.value))return{unaryFilter:{field:Lm(R.field),op:"IS_NAN"}};if(G_(R.value))return{unaryFilter:{field:Lm(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(Zu(R.value))return{unaryFilter:{field:Lm(R.field),op:"IS_NOT_NAN"}};if(G_(R.value))return{unaryFilter:{field:Lm(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lm(R.field),op:dN(R.op),value:R.value}}}(A));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Lm((A=C).field),direction:lN(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.gt||Tm(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Mx(n){let e=Cx(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Dt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=Rx(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new qf(Vm((R=A).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(A){let R;return R="object"==typeof A?A.value:A,Tm(R)?null:R}(t.limit));let w=null;var A;t.startAt&&(w=new _l((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new _l(A.values||[],!A.before)}(t.endAt)),TT(e,o,d,u,m,"F",w,C)}function Rx(n){return n?void 0!==n.unaryFilter?[fN(n)]:void 0!==n.fieldFilter?[hN(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Rx(e)).reduce((e,t)=>e.concat(t)):Qe():[]}function lN(n){return nN[n]}function dN(n){return rN[n]}function Lm(n){return{fieldPath:n.canonicalString()}}function Vm(n){return Bn.fromServerFormat(n.fieldPath)}function hN(n){return Gr.create(Vm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(n.fieldFilter.op),n.fieldFilter.value)}function fN(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Vm(n.unaryFilter.field);return Gr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Vm(n.unaryFilter.field);return Gr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vm(n.unaryFilter.field);return Gr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vm(n.unaryFilter.field);return Gr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}function pN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function cs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ox(e)),e=gN(n.get(t),e);return Ox(e)}function gN(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Ox(n){return n+"\x01\x01"}function Xu(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Zt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&Qe(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:Qe()}u=d+2}return new Zt(r)}const Px=["userId","batchId"];function nD(n,e){return[n,cs(e)]}function kx(n,e,t){return[n,cs(e),t]}const mN={},yN=["prefixPath","collectionGroup","readTime","documentId"],vN=["prefixPath","collectionGroup","documentId"],_N=["collectionGroup","readTime","prefixPath","documentId"],wN=["canonicalId","targetId"],IN=["targetId","path"],EN=["path","targetId"],DN=["collectionId","parent"],CN=["indexId","uid"],bN=["uid","sequenceNumber"],TN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SN=["indexId","uid","orderedDocumentKey"],AN=["userId","collectionPath","documentId"],xN=["userId","collectionPath","largestBatchId"],MN=["userId","collectionGroup","largestBatchId"],Fx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RN=[...Fx,"documentOverlays"],Lx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vx=Lx,NN=[...Vx,"indexConfiguration","indexState","indexEntries"];class OT extends $E{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ai(n,e){const t=Ge(n);return go.O(t.ie,e)}class PT{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&X_(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mx();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const w=Pm(d,m);null!==w&&r.set(o.key,w),d.isValidDocument()||d.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Vf(this.mutations,e.mutations,(t,r)=>km(t,r))&&Vf(this.baseMutations,e.baseMutations,(t,r)=>km(t,r))}}class kT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Dt(e.mutations.length===r.length);let o=JR;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new kT(e,t,r,o)}}class FT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rh{constructor(e,t,r,o,u=_t.min(),d=_t.min(),m=dr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new rh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ux{constructor(e){this.re=e}}function Bx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ow(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:sw(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Kf(e.version)};else{if(!e.isUnknownDocument())return Qe();r.unknownDocument={path:t.path.toArray(),version:Kf(e.version)}}var o,u;return r}function rD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Kf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yf(n){const e=new Rn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function Qf(n,e){const t=(e.baseMutations||[]).map(u=>NT(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>NT(n.re,u)),o=Rn.fromMillis(e.localWriteTimeMs);return new PT(e.batchId,o,t,r)}function cw(n){const e=Yf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Yf(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(Dt(1===(o=n.query).documents.length),r=us(Wf(Cx(o.documents[0])))):r=us(Mx(n.query)),new rh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,dr.fromBase64String(n.resumeToken))}function jx(n,e){const t=Kf(e.snapshotVersion),r=Kf(e.lastLimboFreeSnapshotVersion);let o;o=Nm(e.target)?Ax(n.re,e.target):xx(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function LT(n){const e=Mx({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?J_(e,e.limit,"L"):e}function VT(n,e){return new FT(e.largestBatchId,NT(n.re,e.overlayMutation))}function $x(n,e){const t=e.path.lastSegment();return[n,cs(e.path.popLast()),t]}function Hx(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Kf(r.readTime),documentKey:cs(r.documentKey.path),largestBatchId:r.largestBatchId}}class PN{getBundleMetadata(e,t){return Gx(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Yf(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Gx(e).put({bundleId:(r=t).id,createTime:Kf(oi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return zx(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:LT(o.bundledQuery),readTime:Yf(o.readTime)};var o})}saveNamedQuery(e,t){return zx(e).put({name:(r=t).name,readTime:Kf(oi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Gx(n){return ai(n,"bundles")}function zx(n){return ai(n,"namedQueries")}class iD{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new iD(e,t.uid||"")}getOverlay(e,t){return lw(e).get($x(this.userId,t)).next(r=>r?VT(this.It,r):null)}getOverlays(e,t){const r=Qu();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new FT(t,d);o.push(this.ue(e,m))}),se.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(cs(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(lw(e).Y("collectionPathOverlayIndex",m))}),se.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Qu(),u=cs(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return lw(e).W("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=VT(this.It,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Qu();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lw(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const R=VT(this.It,C);u.size()<o||R.largestBatchId===d?(u.set(R.getKey(),R),d=R.largestBatchId):A.done()}).next(()=>u)}ue(e,t){return lw(e).put(function(r,o,u){const[d,m,w]=$x(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:uw(r.re,u.mutation)}}(this.It,this.userId,t))}}function lw(n){return ai(n,"documentOverlays")}class Jf{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Dn(e.integerValue));else if("doubleValue"in e){const r=Dn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Sm(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(zu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Mm(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Qe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function kN(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function qx(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=kN(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Jf.Te=new Jf;class FN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=qx(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=qx(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class LN{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class VN{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class dw{constructor(){this.Be=new FN,this.Le=new LN(this.Be),this.Ue=new VN(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Xf{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xf(this.indexId,this.documentKey,this.arrayValue,r)}}function ep(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Wx(n.arrayValue,e.arrayValue),0!==t?t:(t=Wx(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function Wx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UN{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=k_(e);if(void 0!==t&&!this.ze(t))return!1;const r=ja(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const d=r[o];if(!this.He(this.je,d)||!this.Je(this.Ge[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class BN{constructor(){this.Ye=new UT}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ei.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class UT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new yn(Zt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new yn(Zt.comparator)).toArray()}}const sD=new Uint8Array(0);class jN{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new UT,this.Ze=new nh(r=>vl(r),(r,o)=>Gf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:cs(o)};return Zx(e).put(u)}return se.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[VE(t),""],!1,!0);return Zx(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Xu(d.parent))}return r})}addFieldIndex(e,t){const r=oD(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=fw(e);return u.next(m=>{d.put(Hx(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=oD(e),o=fw(e),u=hw(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=hw(e);let o=!0;const u=new Map;return se.forEach(this.tn(t),d=>this.en(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Ft();const m=[];return se.forEach(u,(w,C)=>{var A;Pe("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${vl(t)}`);const R=function(Lt,Mt){const Nt=k_(Mt);if(void 0===Nt)return null;for(const jt of zf(Lt,Nt.fieldPath))switch(jt.op){case"array-contains-any":return jt.value.arrayValue.values||[];case"array-contains":return[jt.value]}return null}(C,w),G=function(Lt,Mt){const Nt=new Map;for(const jt of ja(Mt))for(const zr of zf(Lt,jt.fieldPath))switch(zr.op){case"==":case"in":Nt.set(jt.fieldPath.canonicalString(),zr.value);break;case"not-in":case"!=":return Nt.set(jt.fieldPath.canonicalString(),zr.value),Array.from(Nt.values())}return null}(C,w),J=function(Lt,Mt){const Nt=[];let jt=!0;for(const zr of ja(Mt)){const Aw=0===zr.kind?W_(Lt,zr.fieldPath,Lt.startAt):Z_(Lt,zr.fieldPath,Lt.startAt);Nt.push(Aw.value),jt&&(jt=Aw.inclusive)}return new _l(Nt,jt)}(C,w),ae=function(Lt,Mt){const Nt=[];let jt=!0;for(const zr of ja(Mt)){const Aw=0===zr.kind?Z_(Lt,zr.fieldPath,Lt.endAt):W_(Lt,zr.fieldPath,Lt.endAt);Nt.push(Aw.value),jt&&(jt=Aw.inclusive)}return new _l(Nt,jt)}(C,w),Ne=this.nn(w,C,J),Le=this.nn(w,C,ae),Et=this.sn(w,C,G),bt=this.rn(w.indexId,R,Ne,J.inclusive,Le,ae.inclusive,Et);return se.forEach(bt,Lt=>r.J(Lt,t.limit).next(Mt=>{Mt.forEach(Nt=>{const jt=qe.fromSegments(Nt.documentKey);d.has(jt)||(d=d.add(jt),m.push(jt))})}))}).next(()=>m)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let R=0;R<w;++R){const G=t?this.on(t[R/C]):sD,J=this.un(e,G,r[R%C],o),ae=this.cn(e,G,u[R%C],d),Ne=m.map(Le=>this.un(e,G,Le,!0));A.push(...this.createRange(J,ae,Ne))}return A}un(e,t,r,o){const u=new Xf(e,qe.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new Xf(e,qe.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new UN(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.We(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new yn(Bn.comparator),w=!1;for(const C of d.filters){const A=C;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:m=m.add(A.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new dw;for(const o of ja(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);Jf.Te.ce(u,d)}return r.$e()}on(e){const t=new dw;return Jf.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new dw;return Jf.Te.ce(Zo(this.databaseId,t),r.qe(function(o){const u=ja(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new dw);let u=0;for(const d of ja(e)){const m=r[u++];for(const w of o)if(this.ln(t,d.fieldPath)&&jf(m))o=this.fn(o,d,m);else{const C=w.qe(d.kind);Jf.Te.ce(m,C)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new dw;w.seed(m.$e()),Jf.Te.ce(d,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Gr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=oD(e),o=fw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return se.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,A){const R=A?new fl(A.sequenceNumber,new Ei(Yf(A.readTime),new qe(Xu(A.documentKey)),A.largestBatchId)):fl.empty(),G=C.fields.map(([J,ae])=>new Ii(Bn.fromServerFormat(J),ae));return new Vi(C.indexId,C.collectionGroup,G,R)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:xt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=oD(e),u=fw(e);return this._n(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>se.forEach(m,w=>u.put(Hx(w.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?se.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),se.forEach(m,w=>this.wn(e,o,w).next(C=>{const A=this.mn(u,w);return C.isEqual(A)?se.resolve():this.gn(e,u,w,C,A)}))))})}yn(e,t,r,o){return hw(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return hw(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=hw(e);let u=new yn(ep);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(d,m)=>{u=u.add(new Xf(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new yn(ep);const o=this.an(t,e);if(null==o)return r;const u=k_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(jf(d))for(const m of d.arrayValue.values||[])r=r.add(new Xf(t.indexId,e.key,this.on(m),o))}else r=r.add(new Xf(t.indexId,e.key,sD,o));return r}gn(e,t,r,o,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,A,R){const G=m.getIterator(),J=w.getIterator();let ae=pl(G),Ne=pl(J);for(;ae||Ne;){let Le=!1,Et=!1;if(ae&&Ne){const bt=C(ae,Ne);bt<0?Et=!0:bt>0&&(Le=!0)}else null!=ae?Et=!0:Le=!0;Le?(A(Ne),Ne=pl(J)):Et?(R(ae),ae=pl(G)):(ae=pl(G),Ne=pl(J))}}(o,u,ep,m=>{d.push(this.yn(e,t,r,m))},m=>{d.push(this.pn(e,t,r,m))}),se.waitFor(d)}_n(e){let t=1;return fw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>ep(d,m)).filter((d,m,w)=>!m||0!==ep(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=ep(d,e),w=ep(d,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(d),o.push(d.Ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,sD,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,sD,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Kx)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||Qe())).next(Kx)}}function Zx(n){return ai(n,"collectionParents")}function hw(n){return ai(n,"indexEntries")}function oD(n){return ai(n,"indexConfiguration")}function fw(n){return ai(n,"indexState")}function Kx(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Em(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Ei(e.readTime,e.documentKey,t)}const Yx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new js(e,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Qx(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:d},(A,R,G)=>(m++,G.delete()));u.push(w.next(()=>{Dt(1===m)}));const C=[];for(const A of t.mutations){const R=kx(e,A.key.path,t.batchId);u.push(o.delete(R)),C.push(A.key)}return se.waitFor(u).next(()=>C)}function aD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(41943040,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);class uD{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new uD(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ih(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Um(e),d=ih(e);return d.add({}).next(m=>{Dt("number"==typeof m);const w=new PT(m,t,r,o),C=function(G,J,ae){const Ne=ae.baseMutations.map(Et=>uw(G.re,Et)),Le=ae.mutations.map(Et=>uw(G.re,Et));return{userId:J,batchId:ae.batchId,localWriteTimeMs:ae.localWriteTime.toMillis(),baseMutations:Ne,mutations:Le}}(this.It,this.userId,w),A=[];let R=new yn((G,J)=>xt(G.canonicalString(),J.canonicalString()));for(const G of o){const J=kx(this.userId,G.key.path,m);R=R.add(G.key.path.popLast()),A.push(d.put(C)),A.push(u.put(J,mN))}return R.forEach(G=>{A.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),se.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return ih(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Qf(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ih(e).Z({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(Dt(m.batchId>=r),u=Qf(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ih(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ih(e).W("userMutationsIndex",t).next(r=>r.map(o=>Qf(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nD(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Um(e).Z({range:o},(d,m,w)=>{const[C,A,R]=d,G=Xu(A);if(C===this.userId&&t.path.isEqual(G))return ih(e).get(R).next(J=>{if(!J)throw Qe();Dt(J.userId===this.userId),u.push(Qf(this.It,J))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(xt);const o=[];return t.forEach(u=>{const d=nD(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Um(e).Z({range:m},(C,A,R)=>{const[G,J,ae]=C,Ne=Xu(J);G===this.userId&&u.path.isEqual(Ne)?r=r.add(ae):R.done()});o.push(w)}),se.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=nD(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new yn(xt);return Um(e).Z({range:d},(w,C,A)=>{const[R,G,J]=w,ae=Xu(G);R===this.userId&&r.isPrefixOf(ae)?ae.length===o&&(m=m.add(J)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ih(e).get(u).next(d=>{if(null===d)throw Qe();Dt(d.userId===this.userId),r.push(Qf(this.It,d))}))}),se.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Qx(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Um(e).Z({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Xu(u[1]);o.push(w)}else m.done()}).next(()=>{Dt(0===o.length)})})}containsKey(e,t){return Jx(e,this.userId,t)}Rn(e){return Xx(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Jx(n,e,t){const r=nD(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Um(n).Z({range:u,X:!0},(m,w,C)=>{const[A,R,G]=m;A===e&&R===o&&(d=!0),C.done()}).next(()=>d)}function ih(n){return ai(n,"mutations")}function Um(n){return ai(n,"documentMutations")}function Xx(n){return ai(n,"mutationQueues")}class tp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new tp(0)}static vn(){return new tp(-1)}}class $N{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new tp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>_t.fromTimestamp(new Rn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bm(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Bm(e).Z((d,m)=>{const w=cw(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>se.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Bm(e).Z((r,o)=>{const u=cw(o);t(u)})}Vn(e){return eM(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Sn(e,t){return eM(e).put("targetGlobalKey",t)}Dn(e,t){return Bm(e).put(jx(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Bm(e).Z({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=cw(m);Gf(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=sh(e);return t.forEach(d=>{const m=cs(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),se.waitFor(o)}removeMatchingKeys(e,t,r){const o=sh(e);return se.forEach(t,u=>{const d=cs(u.path);return se.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=sh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=sh(e);let u=Ft();return o.Z({range:r,X:!0},(d,m,w)=>{const C=Xu(d[1]),A=new qe(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=cs(t.path),o=IDBKeyRange.bound([r],[VE(r)],!1,!0);let u=0;return sh(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}se(e,t){return Bm(e).get(t).next(r=>r?cw(r):null)}}function Bm(n){return ai(n,"targets")}function eM(n){return ai(n,"targetGlobal")}function sh(n){return ai(n,"targetDocuments")}function tM([n,e],[t,r]){const o=xt(n,t);return 0===o?xt(e,r):o}class HN{constructor(e){this.xn=e,this.buffer=new yn(tM),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ha(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield $a(r)}yield t.Fn(3e5)}))}}class zN{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Ui.at);const r=new HN(t);return this.$n.forEachTarget(e,o=>r.Mn(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.Mn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Yx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yx):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,d,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,d=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(C=Date.now(),NE()<=Ru.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${R} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class qN{constructor(e,t){this.db=e,this.garbageCollector=new zN(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return cD(e,r)}removeReference(e,t,r){return cD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cD(e,t)}Gn(e,t){return function(r,o){let u=!1;return Xx(r).tt(d=>Jx(r,d,o).next(m=>(m&&(u=!0),se.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,m)=>{if(m<=t){const w=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,_t.min()),sh(e).delete([0,cs(d.path)])))});o.push(w)}}).next(()=>se.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cD(e,t)}Kn(e,t){const r=sh(e);let o,u=Ui.at;return r.Z({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==Ui.at&&t(new qe(Xu(o)),u),u=C,o=w):u=Ui.at}).next(()=>{u!==Ui.at&&t(new qe(Xu(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cD(n,e){return sh(n).put((r=n.currentSequenceNumber,{targetId:0,path:cs(e.path),sequenceNumber:r}));var r}class nM{constructor(){this.changes=new nh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WN{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return np(e).put(r)}removeEntry(e,t,r){return np(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],rD(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return np(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(pw(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return np(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(pw(t))},(o,u)=>{r={document:this.jn(t,u),size:aD(u)}}).next(()=>r)}getEntries(e,t){let r=Bs();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=Bs(),o=new jn(qe.comparator);return this.zn(e,t,(u,d)=>{const m=this.jn(u,d);r=r.insert(u,m),o=o.insert(u,aD(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let o=new yn(oM);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(pw(o.first()),pw(o.last())),d=o.getIterator();let m=d.getNext();return np(e).Z({index:"documentKeyIndex",range:u},(w,C,A)=>{const R=qe.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&oM(m,R)<0;)r(m,null),m=d.getNext();m&&m.isEqual(R)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?A.j(pw(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),rD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return np(e).W(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=Bs();for(const w of d){const C=this.jn(qe.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Bs();const d=sM(t,r),m=sM(t,Ei.max());return np(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,A)=>{const R=this.jn(qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(R.key,R),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new ZN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iM(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Qn(e,t){return iM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function ON(n,e){let t;if(e.document)t=Sx(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),o=Yf(e.noDocument.readTime);t=Cn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qe();{const r=qe.fromSegments(e.unknownDocument.path),o=Yf(e.unknownDocument.version);t=Cn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Rn(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return Cn.newInvalidDocument(e)}}function rM(n){return new WN(n)}class ZN extends nM{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new nh(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new yn((u,d)=>xt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=Bx(this.Yn.It,d);o=o.add(u.path.popLast()),r+=aD(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Bx(this.Yn.It,d.convertToNoDocument(_t.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function iM(n){return ai(n,"remoteDocumentGlobal")}function np(n){return ai(n,"remoteDocumentsV14")}function pw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sM(n,e){const t=e.documentKey.path.toArray();return[n,rD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function oM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=xt(t[u],r[u]),o)return o;return o=xt(t.length,r.length),o||(o=xt(t[t.length-2],r[r.length-2]),o||xt(t[t.length-1],r[r.length-1]))}class KN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class aM{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&wl(r.mutation,o,Bi.empty(),Rn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ft()){const o=Qu();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=tw();return u.forEach((m,w)=>{d=d.insert(m,w.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=Qu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ft()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let u=Bs();const d=nw(),m=nw();return t.forEach((w,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof yo)?u=u.insert(C.key,C):void 0!==A&&(d.set(C.key,A.mutation.getFieldMask()),wl(A.mutation,C,A.mutation.getFieldMask(),Rn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>d.set(C,A)),t.forEach((C,A)=>{var R;return m.set(C,new KN(A,null!==(R=d.get(C))&&void 0!==R?R:null))}),m))}recalculateAndSaveOverlays(e,t){const r=nw();let o=new jn((d,m)=>d-m),u=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||Bi.empty();A=m.applyToLocalView(C,A),r.set(w,A);const R=(o.get(m.batchId)||Ft()).add(w);o=o.insert(m.batchId,R)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,R=mx();A.forEach(G=>{if(!u.has(G)){const J=Pm(t.get(G),r.get(G));null!==J&&R.set(G,J),u=u.add(G)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,R))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):XE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):se.resolve(Qu());let m=-1,w=u;return d.next(C=>se.forEach(C,(A,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(A)?se.resolve():this.getBaseDocument(e,A,R).next(G=>{w=w.insert(A,G)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,Ft())).next(A=>({batchId:m,changes:gx(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let o=tw();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=tw();return this.indexManager.getCollectionParents(e,o).next(d=>se.forEach(d,m=>{const w=(C=t,A=m.child(o),new Ku(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,R)=>{u=u.insert(A,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const C=w.getKey();null===o.get(C)&&(o=o.insert(C,Cn.newInvalidDocument(C)))});let d=tw();return o.forEach((m,w)=>{const C=u.get(m);void 0!==C&&wl(C.mutation,w,Bi.empty(),Rn.now()),s(t,w)&&(d=d.insert(m,w))}),d})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(Cn.newInvalidDocument(t))}}class YN{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:oi(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:LT(r.bundledQuery),readTime:oi(r.readTime)}),se.resolve();var r}}class QN{constructor(){this.overlays=new jn(qe.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qu();return se.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=Qu(),u=t.length+1,d=new qe(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new jn((C,A)=>C-A);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=Qu(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=Qu(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=o)););return se.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new FT(t,r));let u=this.es.get(t);void 0===u&&(u=Ft(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class BT{constructor(){this.ns=new yn(ui.ss),this.rs=new yn(ui.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ui(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ui(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new Zt([])),r=new ui(t,e),o=new ui(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new Zt([])),r=new ui(t,e),o=new ui(t,e+1);let u=Ft();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new ui(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ui{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||xt(e._s,t._s)}static os(e,t){return xt(e._s,t._s)||qe.comparator(e.key,t.key)}}class JN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new yn(ui.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new PT(u,t,r,o);this.mutationQueue.push(d);for(const m of o)this.gs=this.gs.add(new ui(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ui(t,0),o=new ui(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const m=this.ys(d._s);u.push(m)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(xt);return t.forEach(o=>{const u=new ui(o,0),d=new ui(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],m=>{r=r.add(m._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const d=new ui(new qe(u),0);let m=new yn(xt);return this.gs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w._s)),!0)},d),se.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Dt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,o=>{const u=new ui(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ui(t,0),o=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class XN{constructor(e){this.Es=e,this.docs=new jn(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Bs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Cn.newInvalidDocument(o))}),se.resolve(r)}getAllFromCollection(e,t,r){let o=Bs();const u=new qe(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Em(jE(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Qe()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new eO(this)}getSize(e){return se.resolve(this.size)}}class eO extends nM{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class tO{constructor(e){this.persistence=e,this.Rs=new nh(t=>vl(t),Gf),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.bs=0,this.Ps=new BT,this.targetCount=0,this.vs=tp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new tp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(u).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class uM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ui(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new tO(this),this.indexManager=new BN,this.remoteDocumentCache=new XN(r=>this.referenceDelegate.xs(r)),this.It=new Ux(t),this.Ns=new YN(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new JN(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const o=new nO(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Ms(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Os(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class nO extends $E{constructor(e){super(),this.currentSequenceNumber=e}}class lD{constructor(e){this.persistence=e,this.Fs=new BT,this.$s=null}static Bs(e){return new lD(e)}get Ls(){if(this.$s)return this.$s;throw Qe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const o=qe.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class rO{constructor(e){this.It=e}$(e,t,r,o){const u=new Uf("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Px,{unique:!0}),m.createObjectStore("documentMutations"),cM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=se.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),cM(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Px,{unique:!0});const A=w.store("mutations"),R=C.map(G=>A.put(G));return se.waitFor(R)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.qs(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:AN});w.createIndex("collectionPathOverlayIndex",xN,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",MN,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:yN});w.createIndex("documentKeyIndex",vN),w.createIndex("collectionGroupIndex",_N)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:CN}).createIndex("sequenceNumberIndex",bN,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:TN}).createIndex("documentKeyIndex",SN,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=aD(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>se.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(m=>se.forEach(m,w=>{Dt(w.userId===u.userId);const C=Qf(this.It,w);return Qx(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,m)=>{const w=new Zt(d),C=[0,cs(w)];u.push(t.get(C).next(A=>A?se.resolve():t.put({targetId:0,path:cs(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>se.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:DN});const r=t.store("collectionParents"),o=new UT,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:cs(w)})}};return t.store("remoteDocuments").Z({X:!0},(d,m)=>{const w=new Zt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,m,w],C)=>{const A=Xu(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=cw(o),d=jx(this.It,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new qe(Zt.fromString(C.document.name).popFirst(5)):C.noDocument?qe.fromSegments(C.noDocument.path):C.unknownDocument?qe.fromSegments(C.unknownDocument.path):Qe()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(A))}).next(()=>se.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=rM(this.It),u=new uM(lD.Bs,this.It.re);return r.W().next(d=>{const m=new Map;return d.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:Ft();Qf(this.It,w).keys().forEach(R=>A=A.add(R)),m.set(w.userId,A)}),se.forEach(m,(w,C)=>{const A=new yr(C),R=iD.oe(this.It,A),G=u.getIndexManager(A),J=uD.oe(A,this.It,G,u.referenceDelegate);return new aM(o,J,R,G).recalculateAndSaveOverlaysForDocumentKeys(new OT(t,Ui.at),w).next()})})}}function cM(n){n.createObjectStore("targetDocuments",{keyPath:IN}).createIndex("documentTargetsIndex",EN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wN,{unique:!0}),n.createObjectStore("targetGlobal")}const jT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $T{constructor(e,t,r,o,u,d,m,w,C,A,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=m,this.Js=C,this.Ys=A,this.Xs=R,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=G=>Promise.resolve(),!$T.C())throw new xe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qN(this,o),this.ii=t+"main",this.It=new Ux(w),this.ri=new go(this.ii,this.Xs,new rO(this.It)),this.Cs=new $N(this.referenceDelegate,this.It),this.remoteDocumentCache=rM(this.It),this.Ns=new PN,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,jT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ui(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ha(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return gw(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return dD(e).delete(this.clientId)}yi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ai(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return se.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):gw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,jT);return!1}}return!(!this.networkEnabled||!this.inForeground)||dD(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new OT(t,Ui.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>dD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return uD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jN(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return iD.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?NN:14===d?Vx:13===d?Lx:12===d?RN:11===d?Fx:void Qe();var d;let m;return this.ri.runTransaction(e,o,u,w=>(m=new OT(w,this.Ss?this.Ss.next():Ui.at),"readwrite-primary"===t?this.fi(m).next(C=>!!C||this.di(m)).next(C=>{if(!C)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(le.FAILED_PRECONDITION,F_);return r(m)}).next(C=>this.wi(m).next(()=>C)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return gw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(le.FAILED_PRECONDITION,jT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gw(e).put("owner",t)}static C(){return go.C()}_i(e){const t=gw(e);return t.get("owner").next(r=>this.mi(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Yt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function gw(n){return ai(n,"owner")}function dD(n){return ai(n,"clientMetadata")}function HT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class GT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Ft(),o=Ft();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new GT(e,t.fromCache,r,o)}}class lM{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Mi(e,t,o,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(ST(t))return se.resolve(null);let r=us(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=J_(t,null,"F"),r=us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Ft(...u);return this.Ni.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Fi(t,m);return this.$i(t,C,d,w.readTime)?this.ki(e,J_(t,null,"F")):this.Bi(e,C,t,w)}))})))}Mi(e,t,r,o){return ST(t)||o.isEqual(_t.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Oi(e,t):(NE()<=Ru.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),i(t)),this.Bi(e,d,t,BE(o,-1)))})}Fi(e,t){let r=new yn(c(e));return t.forEach((o,u)=>{s(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Oi(e,t){return NE()<=Ru.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",i(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ei.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class iO{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new jn(xt),this.qi=new nh(u=>vl(u),Gf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function dM(n,e,t,r){return new iO(n,e,t,r)}function hM(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,ve.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Ft();for(const C of o){d.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:m}))})})}),zT.apply(this,arguments)}function sO(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const A=w.batch,R=A.keys();let G=se.resolve();return R.forEach(J=>{G=G.next(()=>C.getEntry(m,J)).next(ae=>{const Ne=w.docVersions.get(J);Dt(null!==Ne),ae.version.compareTo(Ne)<0&&(A.applyToRemoteDocument(ae,w),ae.isValidDocument()&&(ae.setReadTime(w.commitVersion),C.addEntry(ae)))})}),G.next(()=>d.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let m=Ft();for(let w=0;w<d.mutationResults.length;++w)d.mutationResults[w].transformResults.length>0&&(m=m.add(d.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function fM(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function oO(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((A,R)=>{const G=o.get(R);if(!G)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,R).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,R)));let J=G.withSequenceNumber(u.currentSequenceNumber);var ae,Ne,Le;e.targetMismatches.has(R)?J=J.withResumeToken(dr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):A.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(A.resumeToken,r)),o=o.insert(R,J),Ne=J,Le=A,(0===(ae=G).resumeToken.approximateByteSize()||Ne.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,J))});let w=Bs(),C=Ft();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(pM(u,d,e.documentUpdates).next(A=>{w=A.Wi,C=A.zi})),!r.isEqual(_t.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(R=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return se.waitFor(m).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ui=o,u))}function pM(n,e,t){let r=Ft(),o=Ft();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Bs();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(_t.min())?(e.removeEntry(m,w.readTime),d=d.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),d=d.insert(m,w)):Pe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Wi:d,zi:o}})}function aO(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jm(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,se.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new rh(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function $m(n,e,t){return qT.apply(this,arguments)}function qT(){return qT=(0,ve.Z)(function*(n,e,t){const r=Ge(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ha(d))throw d;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),qT.apply(this,arguments)}function hD(n,e,t){const r=Ge(n);let o=_t.min(),u=Ft();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const A=Ge(m),R=A.qi.get(C);return void 0!==R?se.resolve(A.Ui.get(R)):A.Cs.getTargetData(w,C)}(r,d,us(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:_t.min(),t?u:Ft())).next(m=>(yM(r,a(e),m),{documents:m,Hi:u})))}function gM(n,e){const t=Ge(n),r=Ge(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(d=>d?d.target:null))}function mM(n,e){const t=Ge(n),r=t.Ki.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,BE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(yM(t,e,o),o))}function yM(n,e,t){let r=_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function WT(){return WT=(0,ve.Z)(function*(n,e,t,r){const o=Ge(n);let u=Ft(),d=Bs();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const R=e.Yi(C);R.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(A,R)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield jm(o,(C=r,us(Wf(Zt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>pM(C,m,d).next(A=>(m.apply(C),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Cs.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),WT.apply(this,arguments)}function cO(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ve.Z)(function*(n,e,t=Ft()){const r=yield jm(n,us(LT(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=oi(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(dr.EMPTY_BYTE_STRING,d);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),ZT.apply(this,arguments)}function vM(n,e){return`firestore_clients_${n}_${e}`}function _M(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function KT(n,e){return`firestore_targets_${n}_${e}`}class fD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xe(o.error.code,o.error.message))),d?new fD(e,t,o.state,u):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new xe(r.error.code,r.error.message))),u?new mw(e,r.state,o):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=eD();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=j_(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new pD(e,u):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class YT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new YT(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class QT{constructor(){this.activeTargetIds=eD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JT{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new jn(xt),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=vM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new QT),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(vM(e.persistenceKey,o));if(u){const d=pD.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(KT(this.persistenceKey,e));if(r){const o=mw.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(KT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=Ui.at;if(null!=u)try{const m=JSON.parse(u);Dt("number"==typeof m),d=m}catch(m){lr("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==Ui.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Mr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new fD(this.currentUser,e,t,r),u=_M(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=_M(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=KT(this.persistenceKey,e),u=new mw(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return pD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return fD.Zi(new yr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return mw.Zi(o,t)}yr(e){return YT.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(d,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=eD();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class wM{constructor(){this.Lr=new QT,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new QT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lO{qr(e){}shutdown(){}}class IM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const dO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class hO{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class fO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ao(e,t);Pe("RestConnection","Sending: ",d,r);const m={};return this.ho(m,o,u),this.lo(e,d,m,r).then(w=>(Pe("RestConnection","Received: ",w),w),w=>{throw Jd("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}fo(e,t,r,o,u,d){return this.co(e,t,r,o,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ao(e,t){return`${this.oo}/v1/${t}:${dO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,o){return new Promise((u,d)=>{const m=new sT;m.listenOnce(xE.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case N_.NO_ERROR:const C=m.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case N_.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),d(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case N_.HTTP_ERROR:const A=m.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const G=function(J){const ae=J.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ae)>=0?ae:le.UNKNOWN}(R.status);d(new xe(G,R.message))}else d(new xe(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new xe(le.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}_o(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=iT(),d=AE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new RE({})),this.ho(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Pe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let A=!1,R=!1;const G=new hO({Hr:ae=>{R?Pe("Connection","Not sending because WebChannel is closed:",ae):(A||(Pe("Connection","Opening WebChannel transport."),C.open(),A=!0),Pe("Connection","WebChannel sending:",ae),C.send(ae))},Jr:()=>C.close()}),J=(ae,Ne,Le)=>{ae.listen(Ne,Et=>{try{Le(Et)}catch(bt){setTimeout(()=>{throw bt},0)}})};return J(C,_m.EventType.OPEN,()=>{R||Pe("Connection","WebChannel transport opened.")}),J(C,_m.EventType.CLOSE,()=>{R||(R=!0,Pe("Connection","WebChannel transport closed"),G.io())}),J(C,_m.EventType.ERROR,ae=>{R||(R=!0,Jd("Connection","WebChannel transport errored:",ae),G.io(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),J(C,_m.EventType.MESSAGE,ae=>{var Ne;if(!R){const Le=ae.data[0];Dt(!!Le);const Et=Le,bt=Et.error||(null===(Ne=Et[0])||void 0===Ne?void 0:Ne.error);if(bt){Pe("Connection","WebChannel received error:",bt);const Lt=bt.status;let Mt=function(jt){const zr=Mr[jt];if(void 0!==zr)return fx(zr)}(Lt),Nt=bt.message;void 0===Mt&&(Mt=le.INTERNAL,Nt="Unknown error status: "+Lt+" with message "+bt.message),R=!0,G.io(new xe(Mt,Nt)),C.close()}else Pe("Connection","WebChannel received:",Le),G.ro(Le)}}),J(d,ME.STAT_EVENT,ae=>{ae.stat===O_.PROXY?Pe("Connection","Detected buffering proxy"):ae.stat===O_.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.so()},0),G}}function EM(){return typeof window<"u"?window:null}function gD(){return typeof document<"u"?document:null}function yw(n){return new iN(n,!0)}class XT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=o,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),o=Math.max(0,t-r);o>0&&Pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class DM{constructor(e,t,r,o,u,d,m,w){this.Hs=e,this.Po=r,this.vo=o,this.Vo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new XT(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ve.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ve.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,ve.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pO extends DM{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function aN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Qe(),o=e.targetChange.targetIds||[],u=function(w,C){return w.gt?(Dt(void 0===C||"string"==typeof C),dr.fromBase64String(C||"")):(Dt(void 0===C||C instanceof Uint8Array),dr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?le.UNKNOWN:fx(w.code);return new xe(C,w.message||"")}(d);t=new vx(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ju(n,r.document.name),u=oi(r.document.updateTime),d=new si({mapValue:{fields:r.document.fields}}),m=Cn.newFoundDocument(o,u,d);t=new tD(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ju(n,r.document),u=r.readTime?oi(r.readTime):_t.min(),d=Cn.newNoDocument(o,u);t=new tD([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Ju(n,r.document);t=new tD([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,u=new YR(r.count||0);t=new yx(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?oi(u.readTime):_t.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=aw(this.It),t.addTarget=function(o,u){let d;const m=u.target;return d=Nm(m)?{documents:Ax(o,m)}:{query:xx(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Ex(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(d.readTime=sw(o,u.snapshotVersion.toTimestamp())),d}(this.It,e);const r=function cN(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=aw(this.It),t.removeTarget=e,this.Bo(t)}}class gO extends DM{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function uN(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,o){let u=oi(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=oi(o)),new Nn(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.Zo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=aw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>uw(this.It,r))};this.Bo(t)}}class mO extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.Vo.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(le.UNKNOWN,o.toString())})}fo(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.Vo.fo(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(le.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class yO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(lr(t),this.ou=!1):Pe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class vO{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,ve.Z)(function*(){var w;oh(d)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ve.Z)(function*(C){const A=Ge(C);A._u.add(4),yield Hm(A),A.gu.set("Unknown"),A._u.delete(4),yield vw(A)}),function(C){return w.apply(this,arguments)})(d))}))}),this.gu=new yO(r,o)}}function vw(n){return eS.apply(this,arguments)}function eS(){return eS=(0,ve.Z)(function*(n){if(oh(n))for(const e of n.wu)yield e(!0)}),eS.apply(this,arguments)}function Hm(n){return tS.apply(this,arguments)}function tS(){return tS=(0,ve.Z)(function*(n){for(const e of n.wu)yield e(!1)}),tS.apply(this,arguments)}function mD(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),iS(t)?rS(t):zm(t).ko()&&nS(t,e))}function _w(n,e){const t=Ge(n),r=zm(t);t.du.delete(e),r.ko()&&CM(t,e),0===t.du.size&&(r.ko()?r.Fo():oh(t)&&t.gu.set("Unknown"))}function nS(n,e){n.yu.Ot(e.targetId),zm(n).zo(e)}function CM(n,e){n.yu.Ot(e),zm(n).Ho(e)}function rS(n){n.yu=new tN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),zm(n).start(),n.gu.uu()}function iS(n){return oh(n)&&!zm(n).No()&&n.du.size>0}function oh(n){return 0===Ge(n)._u.size}function bM(n){n.yu=void 0}function _O(n){return sS.apply(this,arguments)}function sS(){return sS=(0,ve.Z)(function*(n){n.du.forEach((e,t)=>{nS(n,e)})}),sS.apply(this,arguments)}function wO(n,e){return oS.apply(this,arguments)}function oS(){return oS=(0,ve.Z)(function*(n,e){bM(n),iS(n)?(n.gu.hu(e),rS(n)):n.gu.set("Unknown")}),oS.apply(this,arguments)}function IO(n,e,t){return aS.apply(this,arguments)}function aS(){return aS=(0,ve.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof vx&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield yD(n,r)}else if(e instanceof tD?n.yu.Gt(e):e instanceof yx?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(_t.min()))try{const r=yield fM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.te(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.du.get(w);C&&o.du.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(dr.EMPTY_BYTE_STRING,w.snapshotVersion)),CM(o,m);const C=new rh(w.target,m,1,w.sequenceNumber);nS(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield yD(n,r)}var r}),aS.apply(this,arguments)}function yD(n,e,t){return uS.apply(this,arguments)}function uS(){return uS=(0,ve.Z)(function*(n,e,t){if(!Ha(e))throw e;n._u.add(1),yield Hm(n),n.gu.set("Offline"),t||(t=()=>fM(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield vw(n)}))}),uS.apply(this,arguments)}function TM(n,e){return e().catch(t=>yD(n,t,e))}function Gm(n){return cS.apply(this,arguments)}function cS(){return cS=(0,ve.Z)(function*(n){const e=Ge(n),t=ah(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;EO(e);)try{const o=yield aO(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,DO(e,o)}catch(o){yield yD(e,o)}SM(e)&&AM(e)}),cS.apply(this,arguments)}function EO(n){return oh(n)&&n.fu.length<10}function DO(n,e){n.fu.push(e);const t=ah(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function SM(n){return oh(n)&&!ah(n).No()&&n.fu.length>0}function AM(n){ah(n).start()}function CO(n){return lS.apply(this,arguments)}function lS(){return lS=(0,ve.Z)(function*(n){ah(n).eu()}),lS.apply(this,arguments)}function bO(n){return dS.apply(this,arguments)}function dS(){return dS=(0,ve.Z)(function*(n){const e=ah(n);for(const t of n.fu)e.Xo(t.mutations)}),dS.apply(this,arguments)}function TO(n,e,t){return hS.apply(this,arguments)}function hS(){return hS=(0,ve.Z)(function*(n,e,t){const r=n.fu.shift(),o=kT.from(r,e,t);yield TM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Gm(n)}),hS.apply(this,arguments)}function SO(n,e){return fS.apply(this,arguments)}function fS(){return fS=(0,ve.Z)(function*(n,e){var t;e&&ah(n).Yo&&(yield(t=(0,ve.Z)(function*(r,o){if(hx(u=o.code)&&u!==le.ABORTED){const d=r.fu.shift();ah(r).Oo(),yield TM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Gm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),SM(n)&&AM(n)}),fS.apply(this,arguments)}function xM(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,ve.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=oh(t);t._u.add(3),yield Hm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield vw(t)}),pS.apply(this,arguments)}function gS(n,e){return mS.apply(this,arguments)}function mS(){return mS=(0,ve.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield vw(t)):e||(t._u.add(2),yield Hm(t),t.gu.set("Unknown"))}),mS.apply(this,arguments)}function zm(n){return n.pu||(n.pu=function(e,t,r){const o=Ge(e);return o.su(),new pO(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:_O.bind(null,n),Zr:wO.bind(null,n),Wo:IO.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.pu.Oo(),iS(n)?rS(n):n.gu.set("Unknown")):(yield n.pu.stop(),bM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function ah(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ge(e);return o.su(),new gO(t,o.Vo,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:CO.bind(null,n),Zr:SO.bind(null,n),tu:bO.bind(null,n),Zo:TO.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Iu.Oo(),yield Gm(n)):(yield n.Iu.stop(),n.fu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class yS{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new yS(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qm(n,e){if(lr("AsyncQueue",`${e}: ${n}`),Ha(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class Wm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=tw(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new Wm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Wm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class MM{constructor(){this.Tu=new jn(qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Qe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zm{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Zm(e,t,Wm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class AO{constructor(){this.Au=void 0,this.listeners=[]}}class xO{constructor(){this.queries=new nh(e=>AT(e),Om),this.onlineState="Unknown",this.Ru=new Set}}function vS(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,ve.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new AO),o)try{u.Au=yield t.onListen(r)}catch(d){const m=qm(d,`Initialization of query '${i(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&ES(t)}),_S.apply(this,arguments)}function wS(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,ve.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),IS.apply(this,arguments)}function MO(n,e){const t=Ge(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Pu(o)&&(r=!0);d.Au=o}}r&&ES(t)}function RO(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function ES(n){n.Ru.forEach(e=>{e.next()})}class DS{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Zm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Zm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class NO{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class RM{constructor(e){this.It=e}Ji(e){return Ju(this.It,e)}Yi(e){return e.metadata.exists?Sx(this.It,e.document,!1):Cn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return oi(e)}}class OO{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=NM(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Zt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new RM(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Ft()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function uO(n,e,t,r){return WT.apply(this,arguments)}(e.localStore,new RM(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const o of e.queries)yield cO(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function NM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OM{constructor(e){this.key=e}}class PM{constructor(e){this.key=e}}class kM{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ft(),this.mutatedKeys=Ft(),this.Ku=c(e),this.Gu=new Wm(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new MM,o=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,R)=>{const G=o.get(A),J=s(this.query,R)?R:null,ae=!!G&&this.mutatedKeys.has(G.key),Ne=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Le=!1;G&&J?G.data.isEqual(J.data)?ae!==Ne&&(r.track({type:3,doc:J}),Le=!0):this.zu(G,J)||(r.track({type:2,doc:J}),Le=!0,(w&&this.Ku(J,w)>0||C&&this.Ku(J,C)<0)&&(m=!0)):!G&&J?(r.track({type:0,doc:J}),Le=!0):G&&!J&&(r.track({type:1,doc:G}),Le=!0,(w||C)&&(m=!0)),Le&&(J?(d=d.add(J),u=Ne?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Gu:d,Wu:r,$i:m,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((C,A)=>function(R,G){const J=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return J(R)-J(G)}(C.type,A.type)||this.Ku(C.doc,A.doc)),this.Hu(r);const d=t?this.Ju():[],m=0===this.qu.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new Zm(this.query,e.Gu,o,u,e.mutatedKeys,0===m,w,!1),Yu:d}:{Yu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new MM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ft(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new PM(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new OM(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ft();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Zm.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class PO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class kO{constructor(e){this.key=e,this.ec=!1}}class FO{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.nc={},this.sc=new nh(m=>AT(m),Om),this.ic=new Map,this.rc=new Set,this.oc=new jn(qe.comparator),this.uc=new Map,this.cc=new BT,this.ac={},this.hc=new Map,this.lc=tp.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function LO(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,ve.Z)(function*(n,e){const t=WS(n);let r,o;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.tc();else{const d=yield jm(t.localStore,us(e));t.isPrimaryClient&&mD(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield bS(t,e,r,"current"===m)}return o}),CS.apply(this,arguments)}function bS(n,e,t,r){return TS.apply(this,arguments)}function TS(){return TS=(0,ve.Z)(function*(n,e,t,r){n.dc=(A,R,G)=>{return(J=(0,ve.Z)(function*(ae,Ne,Le,Et){let bt=Ne.view.ju(Le);bt.$i&&(bt=yield hD(ae.localStore,Ne.query,!1).then(({documents:Nt})=>Ne.view.ju(Nt,bt)));const Lt=Et&&Et.targetChanges.get(Ne.targetId),Mt=Ne.view.applyChanges(bt,ae.isPrimaryClient,Lt);return FS(ae,Ne.targetId,Mt.Yu),Mt.snapshot}),function(ae,Ne,Le,Et){return J.apply(this,arguments)})(n,A,R,G);var J};const o=yield hD(n.localStore,e,!0),u=new kM(e,o.Hi),d=u.ju(o.documents),m=iw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);FS(n,t,w.Yu);const C=new PO(e,t,u);return n.sc.set(e,C),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),w.snapshot}),TS.apply(this,arguments)}function VO(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,ve.Z)(function*(n,e){const t=Ge(n),r=t.sc.get(e),o=t.ic.get(r.targetId);if(o.length>1)return t.ic.set(r.targetId,o.filter(u=>!Om(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield $m(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_w(t.remoteStore,r.targetId),Km(t,r.targetId)}).catch($a))):(Km(t,r.targetId),yield $m(t.localStore,r.targetId,!0))}),SS.apply(this,arguments)}function AS(){return AS=(0,ve.Z)(function*(n,e,t){const r=ZS(n);try{const o=yield function(u,d){const m=Ge(u),w=Rn.now(),C=d.reduce((G,J)=>G.add(J.key),Ft());let A,R;return m.persistence.runTransaction("Locally write mutations","readwrite",G=>{let J=Bs(),ae=Ft();return m.Gi.getEntries(G,C).next(Ne=>{J=Ne,J.forEach((Le,Et)=>{Et.isValidDocument()||(ae=ae.add(Le))})}).next(()=>m.localDocuments.getOverlayedDocuments(G,J)).next(Ne=>{A=Ne;const Le=[];for(const Et of d){const bt=ew(Et,A.get(Et.key).overlayedDocument);null!=bt&&Le.push(new yo(Et.key,bt,_T(bt.value.mapValue),on.exists(!0)))}return m.mutationQueue.addMutationBatch(G,w,Le,d)}).next(Ne=>{R=Ne;const Le=Ne.applyToLocalDocumentSet(A,ae);return m.documentOverlayCache.saveOverlays(G,Ne.batchId,Le)})}).then(()=>({batchId:R.batchId,changes:gx(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ac[u.currentUser.toKey()];w||(w=new jn(xt)),w=w.insert(d,m),u.ac[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Il(r,o.changes),yield Gm(r.remoteStore)}catch(o){const u=qm(o,"Failed to persist write");t.reject(u)}}),AS.apply(this,arguments)}function FM(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,ve.Z)(function*(n,e){const t=Ge(n);try{const r=yield oO(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.uc.get(u);d&&(Dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.ec=!0:o.modifiedDocuments.size>0?Dt(d.ec):o.removedDocuments.size>0&&(Dt(d.ec),d.ec=!1))}),yield Il(t,r,e)}catch(r){yield $a(r)}}),xS.apply(this,arguments)}function LM(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.sc.forEach((u,d)=>{const m=d.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=Ge(u);m.onlineState=d;let w=!1;m.queries.forEach((C,A)=>{for(const R of A.listeners)R.bu(d)&&(w=!0)}),w&&ES(m)}(r.eventManager,e),o.length&&r.nc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BO(n,e,t){return MS.apply(this,arguments)}function MS(){return MS=(0,ve.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.uc.get(e),u=o&&o.key;if(u){let d=new jn(qe.comparator);d=d.insert(u,Cn.newNoDocument(u,_t.min()));const m=Ft().add(u),w=new rw(_t.min(),new Map,new yn(xt),d,m);yield FM(r,w),r.oc=r.oc.remove(u),r.uc.delete(e),LS(r)}else yield $m(r.localStore,e,!1).then(()=>Km(r,e,t)).catch($a)}),MS.apply(this,arguments)}function jO(n,e){return RS.apply(this,arguments)}function RS(){return RS=(0,ve.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield sO(t.localStore,e);kS(t,r,null),PS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Il(t,o)}catch(o){yield $a(o)}}),RS.apply(this,arguments)}function $O(n,e,t){return NS.apply(this,arguments)}function NS(){return NS=(0,ve.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,d){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,d).next(A=>(Dt(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);kS(r,e,t),PS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Il(r,o)}catch(o){yield $a(o)}}),NS.apply(this,arguments)}function OS(){return OS=(0,ve.Z)(function*(n,e){const t=Ge(n);oh(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ge(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.hc.get(r)||[];o.push(e),t.hc.set(r,o)}catch(r){const o=qm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),OS.apply(this,arguments)}function PS(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function kS(n,e,t){const r=Ge(n);let o=r.ac[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ac[r.currentUser.toKey()]=o}}function Km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||VM(n,r)})}function VM(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(_w(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),LS(n))}function FS(n,e,t){for(const r of t)r instanceof OM?(n.cc.addReference(r.key,e),GO(n,r)):r instanceof PM?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||VM(n,r.key)):Qe()}function GO(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.rc.add(r),LS(n))}function LS(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new qe(Zt.fromString(e)),r=n.lc.next();n.uc.set(r,new kO(t)),n.oc=n.oc.insert(t,r),mD(n.remoteStore,new rh(us(Wf(t.path)),r,2,Ui.at))}}function Il(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,ve.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],d=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,w)=>{d.push(r.dc(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const A=GT.Ci(w.targetId,C);u.push(A)}}))}),yield Promise.all(d),r.nc.Wo(o),yield(m=(0,ve.Z)(function*(w,C){const A=Ge(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>se.forEach(C,G=>se.forEach(G.Si,J=>A.persistence.referenceDelegate.addReference(R,G.targetId,J)).next(()=>se.forEach(G.Di,J=>A.persistence.referenceDelegate.removeReference(R,G.targetId,J)))))}catch(R){if(!Ha(R))throw R;Pe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of C){const G=R.targetId;if(!R.fromCache){const J=A.Ui.get(G),Ne=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);A.Ui=A.Ui.insert(G,Ne)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),VS.apply(this,arguments)}function zO(n,e){return US.apply(this,arguments)}function US(){return US=(0,ve.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield hM(t.localStore,e);t.currentUser=e,(o=t).hc.forEach(d=>{d.forEach(m=>{m.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Il(t,r.ji)}var o}),US.apply(this,arguments)}function qO(n,e){const t=Ge(n),r=t.uc.get(e);if(r&&r.ec)return Ft().add(r.key);{let o=Ft();const u=t.ic.get(e);if(!u)return o;for(const d of u){const m=t.sc.get(d);o=o.unionWith(m.view.Qu)}return o}}function WO(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,ve.Z)(function*(n,e){const t=Ge(n),r=yield hD(t.localStore,e.query,!0),o=e.view.Zu(r);return t.isPrimaryClient&&FS(t,e.targetId,o.Yu),o}),BS.apply(this,arguments)}function ZO(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,ve.Z)(function*(n,e){const t=Ge(n);return mM(t.localStore,e).then(r=>Il(t,r))}),jS.apply(this,arguments)}function KO(n,e,t,r){return $S.apply(this,arguments)}function $S(){return $S=(0,ve.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(d,m){const w=Ge(d),C=Ge(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,m).next(R=>R?w.localDocuments.getDocuments(A,R):se.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Gm(o.remoteStore):"acknowledged"===t||"rejected"===t?(kS(o,e,r||null),PS(o,e),m=e,Ge(Ge(o.localStore).mutationQueue).An(m)):Qe(),yield Il(o,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),$S.apply(this,arguments)}function HS(){return HS=(0,ve.Z)(function*(n,e){const t=Ge(n);if(WS(t),ZS(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield UM(t,r.toArray());t.fc=!0,yield gS(t.remoteStore,!0);for(const u of o)mD(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let o=Promise.resolve();t.ic.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Km(t,d),$m(t.localStore,d,!0))),_w(t.remoteStore,d)}),yield o,yield UM(t,r),function(u){const d=Ge(u);d.uc.forEach((m,w)=>{_w(d.remoteStore,w)}),d.cc.fs(),d.uc=new Map,d.oc=new jn(qe.comparator)}(t),t.fc=!1,yield gS(t.remoteStore,!1)}}),HS.apply(this,arguments)}function UM(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,ve.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const d of e){let m;const w=r.ic.get(d);if(w&&0!==w.length){m=yield jm(r.localStore,us(w[0]));for(const C of w){const A=r.sc.get(C),R=yield WO(r,A);R.snapshot&&u.push(R.snapshot)}}else{const C=yield gM(r.localStore,d);m=yield jm(r.localStore,C),yield bS(r,BM(C),d,!1)}o.push(m)}return r.nc.Wo(u),o}),GS.apply(this,arguments)}function BM(n){return TT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function QO(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function JO(n,e,t,r){return zS.apply(this,arguments)}function zS(){return zS=(0,ve.Z)(function*(n,e,t,r){const o=Ge(n);if(o.fc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield mM(o.localStore,a(u[0])),m=rw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Il(o,d,m);break}case"rejected":yield $m(o.localStore,e,!0),Km(o,e,r);break;default:Qe()}}),zS.apply(this,arguments)}function XO(n,e,t){return qS.apply(this,arguments)}function qS(){return qS=(0,ve.Z)(function*(n,e,t){const r=WS(n);if(r.fc){for(const o of e){if(r.ic.has(o)){Pe("SyncEngine","Adding an already active target "+o);continue}const u=yield gM(r.localStore,o),d=yield jm(r.localStore,u);yield bS(r,BM(u),d.targetId,!1),mD(r.remoteStore,d)}for(const o of t)r.ic.has(o)&&(yield $m(r.localStore,o,!1).then(()=>{_w(r.remoteStore,o),Km(r,o)}).catch($a))}}),qS.apply(this,arguments)}function WS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BO.bind(null,e),e.nc.Wo=MO.bind(null,e.eventManager),e.nc._c=RO.bind(null,e.eventManager),e}function ZS(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$O.bind(null,e),e}class jM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.It=yw(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return dM(this.persistence,new lM,e.initialUser,this.It)}gc(e){return new uM(lD.Bs,this.It)}mc(e){return new wM}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $M extends jM{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield ZS(r.Ec.syncEngine),yield Gm(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return dM(this.persistence,new lM,e.initialUser,this.It)}Ic(e,t){return new GN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new pT(t,this.persistence);return new fT(e.asyncQueue,r)}gc(e){const t=HT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new $T(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,EM(),gD(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new wM}}class tP extends $M{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.Ec.syncEngine;r.sharedClientState instanceof JT&&(r.sharedClientState.syncEngine={Fr:KO.bind(null,o),$r:JO.bind(null,o),Br:XO.bind(null,o),vi:QO.bind(null,o),Or:ZO.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ve.Z)(function*(d){yield function YO(n,e){return HS.apply(this,arguments)}(r.Ec.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}mc(e){const t=EM();if(!JT.C(t))throw new xe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new JT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class KS{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>LM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=zO.bind(null,r.syncEngine),yield gS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xO}createDatastore(e){const t=yw(e.databaseInfo.databaseId),r=new fO(e.databaseInfo);return new mO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>LM(this.syncEngine,m,0),d=IM.C()?new IM:new lO,new vO(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const A=new FO(r,o,u,d,m,w);return C&&(A.fc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Ge(t);Pe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Hm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HM(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class vD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nP{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Hr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),o=Number(r);isNaN(o)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(o);return new NO(JSON.parse(u),t.length+o)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,ve.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,d){const m=Ge(u),w=aw(m.It)+"/documents",C={documents:d.map(J=>ow(m.It,J))},A=yield m.fo("BatchGetDocuments",w,C,d.length),R=new Map;A.forEach(J=>{const ae=function oN(n,e){return"found"in e?function(t,r){Dt(!!r.found);const o=Ju(t,r.found.name),u=oi(r.found.updateTime),d=new si({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const o=Ju(t,r.missing),u=oi(r.readTime);return Cn.newNoDocument(o,u)}(n,e):Qe()}(m.It,J);R.set(ae.key.toString(),ae)});const G=[];return d.forEach(J=>{const ae=R.get(J.toString());Dt(!!ae),G.push(ae)}),G}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=qe.fromPath(o);e.mutations.push(new xT(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const d=Ge(o),m=aw(d.It)+"/documents",w={writes:u.map(C=>uw(d.It,C))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(_t.min())?on.exists(!1):on.updateTime(t):on.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(t)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iP{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new XT(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,ve.Z)(function*(){const t=new rP(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Oc(u)}))}).catch(o=>{e.Oc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Tm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!hx(t)}return!1}}class sP{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=yr.UNAUTHENTICATED,this.clientId=lT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Pe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=qm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function GM(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield hM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),YS.apply(this,arguments)}function zM(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JS(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>xM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>xM(e.remoteStore,u)),n.onlineComponents=e}),QS.apply(this,arguments)}function JS(n){return XS.apply(this,arguments)}function XS(){return XS=(0,ve.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield GM(n,new jM)),n.offlineComponents}),XS.apply(this,arguments)}function _D(n){return eA.apply(this,arguments)}function eA(){return eA=(0,ve.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield zM(n,new KS)),n.onlineComponents}),eA.apply(this,arguments)}function qM(n){return JS(n).then(e=>e.persistence)}function wD(n){return JS(n).then(e=>e.localStore)}function WM(n){return _D(n).then(e=>e.remoteStore)}function tA(n){return _D(n).then(e=>e.syncEngine)}function Ym(n){return nA.apply(this,arguments)}function nA(){return nA=(0,ve.Z)(function*(n){const e=yield _D(n),t=e.eventManager;return t.onListen=LO.bind(null,e.syncEngine),t.onUnlisten=VO.bind(null,e.syncEngine),t}),nA.apply(this,arguments)}function ZM(n,e,t={}){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,d,m,w){const C=new vD({next:R=>{u.enqueueAndForget(()=>wS(o,A));const G=R.docs.has(d);!G&&R.fromCache?w.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&R.fromCache&&m&&"server"===m.source?w.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),A=new DS(Wf(d.path),C,{includeMetadataChanges:!0,Nu:!0});return vS(o,A)}(yield Ym(n),n.asyncQueue,e,t,r)})),r.promise}function KM(n,e,t={}){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,d,m,w){const C=new vD({next:R=>{u.enqueueAndForget(()=>wS(o,A)),R.fromCache&&"server"===m.source?w.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),A=new DS(d,C,{includeMetadataChanges:!0,Nu:!0});return vS(o,A)}(yield Ym(n),n.asyncQueue,e,t,r)})),r.promise}const YM=new Map;function rA(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QM(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JM(n){if(!qe.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XM(n){if(qe.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ID(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ID(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eR(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,QM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ww{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new kE;switch(t.type){case"gapi":return new ax(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YM.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),YM.delete(e),t.terminate())}(this),Promise.resolve()}}class $n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class ji{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ji(this.firestore,e,this._query)}}class ec extends ji{constructor(e,t,r){super(e,t,Wf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new qe(e))}withConverter(e){return new ec(this.firestore,e,this._path)}}function nR(n,e,...t){if(n=(0,Yt.m9)(n),rA("collection","path",e),n instanceof ww){const r=Zt.fromString(e,...t);return XM(r),new ec(n,null,r)}{if(!(n instanceof $n||n instanceof ec))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return XM(r),new ec(n.firestore,null,r)}}function ED(n,e,...t){if(n=(0,Yt.m9)(n),1===arguments.length&&(e=lT.R()),rA("doc","path",e),n instanceof ww){const r=Zt.fromString(e,...t);return JM(r),new $n(n,null,new qe(r))}{if(!(n instanceof $n||n instanceof ec))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zt.fromString(e,...t));return JM(r),new $n(n.firestore,n instanceof ec?n.converter:null,new qe(r))}}function rR(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),(n instanceof $n||n instanceof ec)&&(e instanceof $n||e instanceof ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iR(n,e){return n=(0,Yt.m9)(n),e=(0,Yt.m9)(e),n instanceof ji&&e instanceof ji&&n.firestore===e.firestore&&Om(n._query,e._query)&&n.converter===e.converter}class mP{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new XT(this,"async_queue_retry"),this.jc=()=>{const t=gD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=gD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=gD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Hr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Ha(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const o=yS.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(o),o}Wc(){this.qc&&Qe()}verifyOperationInProgress(){}Yc(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function iA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class yP{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xn extends ww{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new mP,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sR(this),this._firestoreClient.terminate()}}function Rr(n){return n._firestoreClient||sR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new mT(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new sP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function oR(n,e,t){const r=new Hr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield GM(n,t),yield zM(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===le.FAILED_PRECONDITION||d.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Jd("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function aR(n){if(n._initialized||n._terminated)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class El{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tc(dr.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tc(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rp{constructor(e){this._methodName=e}}class DD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}}const SP=/^__.*__$/;class AP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yu(e,this.data,t,this.fieldTransforms)}}class uR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class CD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new CD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.oa(e),o}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.sa({path:r,ra:!1});return o.ea(),o}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return SD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(cR(this.na)&&SP.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class xP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||yw(e)}fa(e,t,r,o=!1){return new CD({na:e,methodName:t,la:r,path:Bn.emptyPath(),ra:!1,ha:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ip(n){const e=n._freezeSettings(),t=yw(n._databaseId);return new xP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bD(n,e,t,r,o,u={}){const d=n.fa(u.merge||u.mergeFields?2:0,e,t,o);uA("Data must be an object, but it was:",d,r);const m=hR(r,d);let w,C;if(u.merge)w=new Bi(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const R of u.mergeFields){const G=cA(e,R,t);if(!d.contains(G))throw new xe(le.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);pR(A,G)||A.push(G)}w=new Bi(A),C=d.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,C=d.fieldTransforms;return new AP(new si(m),w,C)}class Iw extends rp{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iw}}function lR(n,e,t){return new CD({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class sA extends rp{_toFieldTransform(e){return new ht(e.path,new H)}isEqual(e){return e instanceof sA}}class MP extends rp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=lR(this,e,!0),r=this.da.map(u=>sp(u,t)),o=new Q(r);return new ht(e.path,o)}isEqual(e){return this===e}}class RP extends rp{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=lR(this,e,!0),r=this.da.map(u=>sp(u,t)),o=new Re(r);return new ht(e.path,o)}isEqual(e){return this===e}}class NP extends rp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Ye(e.It,I(e.It,this._a));return new ht(e.path,t)}isEqual(e){return this===e}}function oA(n,e,t,r){const o=n.fa(1,e,t);uA("Data must be an object, but it was:",o,r);const u=[],d=si.empty();Gu(r,(w,C)=>{const A=TD(e,w,t);C=(0,Yt.m9)(C);const R=o.ua(A);if(C instanceof Iw)u.push(A);else{const G=sp(C,R);null!=G&&(u.push(A),d.set(A,G))}});const m=new Bi(u);return new uR(d,m,o.fieldTransforms)}function aA(n,e,t,r,o,u){const d=n.fa(1,e,t),m=[cA(e,r,t)],w=[o];if(u.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<u.length;G+=2)m.push(cA(e,u[G])),w.push(u[G+1]);const C=[],A=si.empty();for(let G=m.length-1;G>=0;--G)if(!pR(C,m[G])){const J=m[G];let ae=w[G];ae=(0,Yt.m9)(ae);const Ne=d.ua(J);if(ae instanceof Iw)C.push(J);else{const Le=sp(ae,Ne);null!=Le&&(C.push(J),A.set(J,Le))}}const R=new Bi(C);return new uR(A,R,d.fieldTransforms)}function dR(n,e,t,r=!1){return sp(t,n.fa(r?4:3,e))}function sp(n,e){if(fR(n=(0,Yt.m9)(n)))return uA("Unsupported field value:",e,n),hR(n,e);if(n instanceof rp)return function(t,r){if(!cR(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=sp(d,r.ca(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Yt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return I(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Rn.fromDate(t);return{timestampValue:sw(r.It,o)}}if(t instanceof Rn){const o=new Rn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:sw(r.It,o)}}if(t instanceof DD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tc)return{bytesValue:Ex(r.It,t._byteString)};if(t instanceof $n){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:MT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${ID(t)}`)}(n,e)}function hR(n,e){const t={};return gT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gu(n,(r,o)=>{const u=sp(o,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function fR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Rn||n instanceof DD||n instanceof tc||n instanceof $n||n instanceof rp)}function uA(n,e,t){if(!fR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ID(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function cA(n,e,t){if((e=(0,Yt.m9)(e))instanceof El)return e._internalPath;if("string"==typeof e)return TD(n,e);throw SD("Field path arguments must be of type string or ",n,!1,void 0,t)}const OP=new RegExp("[~\\*/\\[\\]]");function TD(n,e,t){if(e.search(OP)>=0)throw SD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new El(...e.split("."))._internalPath}catch{throw SD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function SD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new xe(le.INVALID_ARGUMENT,m+n+w)}function pR(n,e){return n.some(t=>t.isEqual(e))}class Ew{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(AD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PP extends Ew{data(){return super.data()}}function AD(n,e){return"string"==typeof e?TD(n,e):e instanceof El?e._internalPath:e._delegate._internalPath}class op{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dl extends Ew{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Dw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(AD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Dw extends Dl{data(e={}){return super.data(e)}}class uh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new op(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Dw(this._firestore,this._userDataWriter,r.key,r,new op(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new Dw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new op(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new Dw(r._firestore,r._userDataWriter,d.doc.key,d.doc,new op(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:kP(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function gR(n,e){return n instanceof Dl&&e instanceof Dl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof uh&&e instanceof uh&&n._firestore===e._firestore&&iR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function mR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cw{}function ch(n,...e){for(const t of e)n=t._apply(n);return n}class FP extends Cw{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=ip(e.firestore),r=function(o,u,d,m,w,C,A){let R;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){ER(A,C);const J=[];for(const ae of A)J.push(IR(m,o,ae));R={arrayValue:{values:J}}}else R=IR(m,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||ER(A,C),R=dR(d,"where",A,"in"===C||"not-in"===C);const G=Gr.create(w,C,R);return function(J,ae){if(ae.dt()){const Le=Q_(J);if(null!==Le&&!Le.isEqual(ae.field))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${ae.field.toString()}'`);const Et=JE(J);null!==Et&&DR(0,ae.field,Et)}const Ne=function(Le,Et){for(const bt of Le.filters)if(Et.indexOf(bt.op)>=0)return bt.op;return null}(J,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ae.op));if(null!==Ne)throw new xe(le.INVALID_ARGUMENT,Ne===ae.op?`Invalid query. You cannot use more than one '${ae.op.toString()}' filter.`:`Invalid query. You cannot use '${ae.op.toString()}' filters with '${Ne.toString()}' filters.`)}(o,G),G}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new ji(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Ku(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class VP extends Cw{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new qf(o,u);return function(m,w){if(null===JE(m)){const C=Q_(m);null!==C&&DR(0,C,w.field)}}(r,d),d}(e._query,this.wa,this.ya);return new ji(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Ku(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class yR extends Cw{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new ji(e.firestore,e.converter,J_(e._query,this.pa,this.Ia))}}class vR extends Cw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=wR(e,this.type,this.Ta,this.Ea);return new ji(e.firestore,e.converter,(o=t,new Ku((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class _R extends Cw{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=wR(e,this.type,this.Ta,this.Ea);return new ji(e.firestore,e.converter,(o=t,new Ku((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function wR(n,e,t,r){if(t[0]=(0,Yt.m9)(t[0]),t[0]instanceof Ew)return function(o,u,d,m,w){if(!m)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const A of Zf(o))if(A.field.isKeyField())C.push(Zo(u,m.key));else{const R=m.data.field(A.field);if(U_(R))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const G=A.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}C.push(R)}return new _l(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=ip(n.firestore);return function(u,d,m,w,C,A){const R=u.explicitOrderBy;if(C.length>R.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let J=0;J<C.length;J++){const ae=C[J];if(R[J].field.isKeyField()){if("string"!=typeof ae)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ae}`);if(!XE(u)&&-1!==ae.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ae}' contains a slash.`);const Ne=u.path.child(Zt.fromString(ae));if(!qe.isDocumentKey(Ne))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const Le=new qe(Ne);G.push(Zo(d,Le))}else{const Ne=dR(m,w,ae);G.push(Ne)}}return new _l(G,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function IR(n,e,t){if("string"==typeof(t=(0,Yt.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XE(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zt.fromString(t));if(!qe.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zo(n,new qe(r))}if(t instanceof $n)return Zo(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ID(t)}.`)}function ER(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function DR(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const qP={maxAttempts:5};class lA{convertValue(e,t="none"){switch(gl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){const r={};return Gu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new DD(Dn(e.latitude),Dn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=B_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xd(e));default:return null}}convertTimestamp(e){const t=mo(e);return new Rn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zt.fromString(e);Dt(Nx(r));const o=new qu(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||lr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function xD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class WP extends lA{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}class CR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ip(e)}set(e,t,r){this._verifyNotCommitted();const o=lh(e,this._firestore),u=xD(o.converter,t,r),d=bD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,on.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=lh(e,this._firestore);let d;return d="string"==typeof(t=(0,Yt.m9)(t))||t instanceof El?aA(this._dataReader,"WriteBatch.update",u._key,t,r,o):oA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,on.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lh(e,this._firestore);return this._mutations=this._mutations.concat(new Fm(t._key,on.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lh(n,e){if((n=(0,Yt.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class ap extends lA{constructor(e){super(),this.firestore=e}convertBytes(e){return new tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}function bR(n,e,t){n=Qt(n,$n);const r=Qt(n.firestore,Xn),o=xD(n.converter,e,t);return Qm(r,[bD(ip(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,on.none())])}function TR(n,e,t,...r){n=Qt(n,$n);const o=Qt(n.firestore,Xn),u=ip(o);let d;return d="string"==typeof(e=(0,Yt.m9)(e))||e instanceof El?aA(u,"updateDoc",n._key,e,t,r):oA(u,"updateDoc",n._key,e),Qm(o,[d.toMutation(n._key,on.exists(!0))])}function SR(n,...e){var t,r,o;n=(0,Yt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||iA(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(iA(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let w,C,A;if(n instanceof $n)C=Qt(n.firestore,Xn),A=Wf(n._key.path),w={next:R=>{e[d]&&e[d](dA(C,n,R))},error:e[d+1],complete:e[d+2]};else{const R=Qt(n,ji);C=Qt(R.firestore,Xn),A=R._query;const G=new ap(C);w={next:J=>{e[d]&&e[d](new uh(C,G,R,J))},error:e[d+1],complete:e[d+2]},mR(n._query)}return function(R,G,J,ae){const Ne=new vD(ae),Le=new DS(G,Ne,J);return R.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return vS(yield Ym(R),Le)})),()=>{Ne.Rc(),R.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return wS(yield Ym(R),Le)}))}}(Rr(C),A,m,w)}function Qm(n,e){return function(t,r){const o=new Hr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function UO(n,e,t){return AS.apply(this,arguments)}(yield tA(t),r,o)})),o.promise}(Rr(n),e)}function dA(n,e,t){const r=t.docs.get(e._key),o=new ap(n);return new Dl(n,o,e._key,r,new op(t.hasPendingWrites,t.fromCache),e.converter)}class rk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ip(e)}get(e){const t=lh(e,this._firestore),r=new WP(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Qe();const u=o[0];if(u.isFoundDocument())return new Ew(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Ew(this._firestore,r,t._key,null,t.converter);throw Qe()})}set(e,t,r){const o=lh(e,this._firestore),u=xD(o.converter,t,r),d=bD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=lh(e,this._firestore);let d;return d="string"==typeof(t=(0,Yt.m9)(t))||t instanceof El?aA(this._dataReader,"Transaction.update",u._key,t,r,o):oA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=lh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lh(e,this._firestore),r=new ap(this._firestore);return super.get(e).then(o=>new Dl(this._firestore,r,t._key,o._document,new op(!1,!1),t.converter))}}function hA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function xR(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function MR(){if(!function qE(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Lf=Kc.SDK_VERSION,(0,Kc._registerComponent)(new ug.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new Xn(new FE(t.getProvider("auth-internal")),new uT(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Kc.registerVersion)(oT,"3.5.0",n),(0,Kc.registerVersion)(oT,"3.5.0","esm2017")}();class bw{constructor(e){this._delegate=e}static fromBase64String(e){return MR(),new bw(tc.fromBase64String(e))}static fromUint8Array(e){return xR(),new bw(tc.fromUint8Array(e))}toBase64(){return MR(),this._delegate.toBase64()}toUint8Array(){return xR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fA(n){return function hk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class fk{enableIndexedDbPersistence(e,t){return function _P(n,e){aR(n=Qt(n,Xn));const t=Rr(n),r=n._freezeSettings(),o=new KS;return oR(t,o,new $M(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wP(n){aR(n=Qt(n,Xn));const e=Rr(n),t=n._freezeSettings(),r=new KS;return oR(e,r,new tP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function IP(n){if(n._initialized&&!n._terminated)throw new xe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Hr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!go.C())return Promise.resolve();const o=r+"main";yield go.delete(o)}),function(r){return t.apply(this,arguments)})(HT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class RR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function pP(n,e,t,r={}){var o;const u=(n=Qt(n,ww))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Jd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=yr.MOCK_USER;else{d=(0,Yt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new yr(w)}n._authCredentials=new aT(new wm(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function DP(n){return function oP(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield qM(n),t=yield WM(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o._u.delete(0),vw(o)}(t)}))}(Rr(n=Qt(n,Xn)))}(this._delegate)}disableNetwork(){return function CP(n){return function aP(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield qM(n),t=yield WM(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=Ge(o);u._u.add(0),yield Hm(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Rr(n=Qt(n,Xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function EP(n){return function(e){const t=new Hr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function HO(n,e){return OS.apply(this,arguments)}(yield tA(e),t)})),t.promise}(Rr(n=Qt(n,Xn)))}(this._delegate)}onSnapshotsInSync(e){return function nk(n,e){return function lP(n,e){const t=new vD(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Ym(n),o=t,Ge(r).Ru.add(o),void o.next();var r,o})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Ym(n),o=t,void Ge(r).Ru.delete(o);var r,o}))}}(Rr(n=Qt(n,Xn)),iA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Jm(this,nR(this._delegate,e))}catch(t){throw ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ko(this,ED(this._delegate,e))}catch(t){throw ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ds(this,function gP(n,e){if(n=Qt(n,ww),rA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ji(n,null,(t=e,new Ku(Zt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ik(n,e,t){n=Qt(n,Xn);const r=Object.assign(Object.assign({},qP),t);return function(o){if(o.maxAttempts<1)throw new xe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function dP(n,e,t){const r=new Hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const o=yield(u=n,_D(u).then(d=>d.datastore));var u;new iP(n.asyncQueue,o,t,e,r).run()})),r.promise}(Rr(n),o=>e(new rk(n,o)),r)}(this._delegate,t=>e(new NR(this,t)))}batch(){return Rr(this._delegate),new OR(new CR(this._delegate,e=>Qm(this._delegate,e)))}loadBundle(e){return function bP(n,e){const t=Rr(n=Qt(n,Xn)),r=new yP;return function hP(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return HM(w,C);if(w instanceof ArrayBuffer)return HM(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new nP(w,d);var w}(t,yw(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function eP(n,e,t){const r=Ge(n);var o;(o=(0,ve.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(G,J){const ae=Ge(G),Ne=oi(J.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Le=>ae.Ns.getBundleMetadata(Le,J.id)).then(Le=>!!Le&&Le.createTime.compareTo(Ne)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(G=w).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);m._updateProgress(NM(w));const C=new OO(w,u.localStore,d.It);let A=yield d.wc();for(;A;){const G=yield C.Ou(A);G&&m._updateProgress(G),A=yield d.wc()}const R=yield C.complete();return yield Il(u,R.Bu,void 0),yield function(G,J){const ae=Ge(G);return ae.persistence.runTransaction("Save bundle","readwrite",Ne=>ae.Ns.saveBundleMetadata(Ne,J))}(u.localStore,w),m._completeWith(R.progress),Promise.resolve(R.$u)}catch(w){return Jd("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var G}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield tA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function TP(n,e){return function fP(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield wD(n),e)}))}(Rr(n=Qt(n,Xn)),e).then(t=>t?new ji(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ds(this,t):null)}}class MD extends lA{constructor(e){super(),this.firestore=e}convertBytes(e){return new bw(new tc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ko.forKey(t,this.firestore,null)}}class NR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new MD(e)}get(e){const t=cp(e);return this._delegate.get(t).then(r=>new Tw(this._firestore,new Dl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=cp(e);return r?(hA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=cp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=cp(e);return this._delegate.delete(t),this}}class OR{constructor(e){this._delegate=e}set(e,t,r){const o=cp(e);return r?(hA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=cp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class up{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Dw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=up.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new up(e,new MD(e),t),o.set(t,u)),u}}up.INSTANCES=new WeakMap;class Ko{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ko(t,new $n(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Ko(t,new $n(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Jm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Jm(this.firestore,nR(this._delegate,e))}catch(t){throw ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Yt.m9)(e))instanceof $n&&rR(this._delegate,e)}set(e,t){t=hA("DocumentReference.set",t);try{return t?bR(this._delegate,e,t):bR(this._delegate,e)}catch(r){throw ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?TR(this._delegate,e):TR(this._delegate,e,t,...r)}catch(o){throw ls(o,"updateDoc()","DocumentReference.update()")}}delete(){return function ek(n){return Qm(Qt(n.firestore,Xn),[new Fm(n._key,on.none())])}(this._delegate)}onSnapshot(...e){const t=PR(e),r=kR(e,o=>new Tw(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return SR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function KP(n){n=Qt(n,$n);const e=Qt(n.firestore,Xn),t=Rr(e),r=new ap(e);return function uP(n,e){const t=new Hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,d){try{const m=yield function(w,C){const A=Ge(w);return A.persistence.runTransaction("read document","readonly",R=>A.localDocuments.getDocument(R,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new xe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=qm(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield wD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Dl(e,r,n._key,o,new op(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function YP(n){n=Qt(n,$n);const e=Qt(n.firestore,Xn);return ZM(Rr(e),n._key,{source:"server"}).then(t=>dA(e,n,t))}(this._delegate):function ZP(n){n=Qt(n,$n);const e=Qt(n.firestore,Xn);return ZM(Rr(e),n._key).then(t=>dA(e,n,t))}(this._delegate),t.then(r=>new Tw(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ko(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}function ls(n,e,t){return n.message=n.message.replace(e,t),n}function PR(n){for(const e of n)if("object"==typeof e&&!fA(e))return e;return{}}function kR(n,e){var t,r;let o;return o=fA(n[0])?n[0]:fA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class Tw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ko(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gR(this._delegate,e._delegate)}}class Sw extends Tw{data(e){const t=this._delegate.data(e);return function PE(n,e){n||Qe()}(void 0!==t),t}}class ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new MD(e)}where(e,t,r){try{return new ds(this.firestore,ch(this._delegate,function LP(n,e,t){const r=e,o=AD("where",n);return new FP(o,r,t)}(e,t,r)))}catch(o){throw ls(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ds(this.firestore,ch(this._delegate,function UP(n,e="asc"){const t=e,r=AD("orderBy",n);return new VP(r,t)}(e,t)))}catch(r){throw ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ds(this.firestore,ch(this._delegate,function BP(n){return eR("limit",n),new yR("limit",n,"F")}(e)))}catch(t){throw ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ds(this.firestore,ch(this._delegate,function jP(n){return eR("limitToLast",n),new yR("limitToLast",n,"L")}(e)))}catch(t){throw ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ds(this.firestore,ch(this._delegate,function $P(...n){return new vR("startAt",n,!0)}(...e)))}catch(t){throw ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ds(this.firestore,ch(this._delegate,function HP(...n){return new vR("startAfter",n,!1)}(...e)))}catch(t){throw ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ds(this.firestore,ch(this._delegate,function GP(...n){return new _R("endBefore",n,!1)}(...e)))}catch(t){throw ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ds(this.firestore,ch(this._delegate,function zP(...n){return new _R("endAt",n,!0)}(...e)))}catch(t){throw ls(t,"endAt()","Query.endAt()")}}isEqual(e){return iR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function JP(n){n=Qt(n,ji);const e=Qt(n.firestore,Xn),t=Rr(e),r=new ap(e);return function cP(n,e){const t=new Hr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,d){try{const m=yield hD(o,u,!0),w=new kM(u,m.Hi),C=w.ju(m.documents),A=w.applyChanges(C,!1);d.resolve(A.snapshot)}catch(m){const w=qm(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield wD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new uh(e,r,n,o))}(this._delegate):"server"===e?.source?function XP(n){n=Qt(n,ji);const e=Qt(n.firestore,Xn),t=Rr(e),r=new ap(e);return KM(t,n._query,{source:"server"}).then(o=>new uh(e,r,n,o))}(this._delegate):function QP(n){n=Qt(n,ji);const e=Qt(n.firestore,Xn),t=Rr(e),r=new ap(e);return mR(n._query),KM(t,n._query).then(o=>new uh(e,r,n,o))}(this._delegate),t.then(r=>new pA(this.firestore,new uh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=PR(e),r=kR(e,o=>new pA(this.firestore,new uh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return SR(this._delegate,t,r)}withConverter(e){return new ds(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}class gk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new gk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Sw(this._firestore,r))})}isEqual(e){return gR(this._delegate,e._delegate)}}class Jm extends ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ko(this.firestore,e):null}doc(e){try{return new Ko(this.firestore,void 0===e?ED(this._delegate):ED(this._delegate,e))}catch(t){throw ls(t,"doc()","CollectionReference.doc()")}}add(e){return function tk(n,e){const t=Qt(n.firestore,Xn),r=ED(n),o=xD(n.converter,e);return Qm(t,[bD(ip(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ko(this.firestore,t))}isEqual(e){return rR(this._delegate,e._delegate)}withConverter(e){return new Jm(this.firestore,this._delegate.withConverter(e?up.getInstance(this.firestore,e):null))}}function cp(n){return Qt(n,$n)}class gA{constructor(...e){this._delegate=new El(...e)}static documentId(){return new gA(Bn.keyField().canonicalString())}isEqual(e){return(e=(0,Yt.m9)(e))instanceof El&&this._delegate._internalPath.isEqual(e._internalPath)}}class lp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ok(){return new sA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new lp(e)}static delete(){const e=function sk(){return new Iw("deleteField")}();return e._methodName="FieldValue.delete",new lp(e)}static arrayUnion(...e){const t=function ak(...n){return new MP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new lp(t)}static arrayRemove(...e){const t=function uk(...n){return new RP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new lp(t)}static increment(e){const t=function ck(n){return new NP("increment",n)}(e);return t._methodName="FieldValue.increment",new lp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const mk={Firestore:RR,GeoPoint:DD,Timestamp:Rn,Blob:bw,Transaction:NR,WriteBatch:OR,DocumentReference:Ko,DocumentSnapshot:Tw,Query:ds,QueryDocumentSnapshot:Sw,QuerySnapshot:pA,CollectionReference:Jm,FieldPath:gA,FieldValue:lp,setLogLevel:function pk(n){!function sx(n){hl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function FR(n,e){return function _k(n,e=Rd.z){return new Dr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function mA(n,e){return FR(n,e).pipe((0,rt.U)(t=>({payload:t,type:"query"})))}function RD(n,e){return mA(n,e).pipe(Cu(void 0),Ov(),(0,rt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(A=>A.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function LR(n,e,t){return RD(n,t).pipe(wt((r,o)=>function Ik(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Ek(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return yA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return yA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Gg(n,e=bs.y){return n=n??zg,(0,pr.e)((t,r)=>{let o,u=!0;t.subscribe((0,Zn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,rt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function yA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function VR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function vk(n){(function yk(n,e){n.INTERNAL.registerComponent(new ug.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},mk)))})(n,(e,t)=>new RR(e,t,new fk)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(ex.Z);class UR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,rt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Cu(void 0),Ov(),D(([r,o])=>o.length>0||!r),(0,rt.U)(([r,o])=>o),Jn.iC)}auditTrail(e){return this.stateChanges(e).pipe(wt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VR(e);return LR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jn.iC)}valueChanges(e={}){return mA(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Jn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Jn.iC)}add(e){return this.ref.add(e)}doc(e){return new BR(this.ref.doc(e),this.afs)}}class BR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=jR(r,t);return new UR(o,u,this.afs)}snapshotChanges(){return function wk(n,e){return FR(n,e).pipe(Cu(void 0),Ov(),(0,rt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Jn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,rn.D)(this.ref.get(e)).pipe(Jn.iC)}}class Dk{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RD(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),D(t=>t.length>0),Jn.iC):RD(this.query,this.afs.schedulers.outsideAngular).pipe(Jn.iC)}auditTrail(e){return this.stateChanges(e).pipe(wt((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VR(e);return LR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jn.iC)}valueChanges(e={}){return mA(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Jn.iC)}get(e){return(0,rn.D)(this.query.get(e)).pipe(Jn.iC)}}const Ck=new g.OlP("angularfire2.enableFirestorePersistence"),bk=new g.OlP("angularfire2.firestore.persistenceSettings"),Tk=new g.OlP("angularfire2.firestore.settings"),Sk=new g.OlP("angularfire2.firestore.use-emulator");function jR(n,e=(t=>t)){return{query:e(n),ref:n}}let $R=(()=>{class n{constructor(t,r,o,u,d,m,w,C,A,R,G,J,ae,Ne,Le,Et,bt){this.schedulers=w;const Lt=(0,ao.on)(t,m,r),Mt=A;R&&Jh(Lt,m,G,ae,Ne,Le,J,Et),[this.firestore,this.persistenceEnabled$]=(0,ao.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const Nt=m.runOutsideAngular(()=>Lt.firestore());if(u&&Nt.settings(u),Mt&&Nt.useEmulator(...Mt),o&&!ar(d)){const jt=()=>{try{return(0,rn.D)(Nt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(zr){return typeof console<"u"&&console.warn(zr),nt(!1)}};return[Nt,m.runOutsideAngular(jt)]}return[Nt,nt(!1)]},[u,Mt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=jR(o,r),m=this.schedulers.ngZone.run(()=>u);return new UR(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new Dk(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new BR(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ao.Dh),g.LFG(ao.xv,8),g.LFG(Ck,8),g.LFG(Tk,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Jn.HU),g.LFG(bk,8),g.LFG(Sk,8),g.LFG(Ed,8),g.LFG($0,8),g.LFG(bg,8),g.LFG(H0,8),g.LFG(G0,8),g.LFG(Qh,8),g.LFG(Tg,8),g.LFG(sv,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ak=(()=>{class n{constructor(t){this.firestore=t}sendMessage(t){let r={text:t,user:"q",data:Date.now().toString()};return this.firestore.collection("messages").add(r).then(()=>{console.log("success")}).catch(o=>{console.log("error",o)})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG($R))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xk(n,e){if(1&n&&(g.TgZ(0,"div")(1,"p"),g._uU(2),g.qZA()()),2&n){const t=e.$implicit;g.xp6(2),g.hij(" ",t.text," ")}}const Mk=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:ov},{path:"login",component:XA},{path:"signup",component:Db},{path:"chat",component:(()=>{class n{constructor(t,r,o){this.authService=t,this.ChatService=r,this.firestore=o,this.text="",this.msgs=[]}ngOnInit(){this.foo()}foo(){let t=[];this.firestore.collection("messages").ref.onSnapshot(r=>{r.forEach(o=>{t.push({data:o.data().data,user:o.data().user,text:o.data().text})})}),this.msgs=t,console.log(this.msgs)}send(){console.log(this.text),this.ChatService.sendMessage(this.text),this.foo()}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Hg),g.Y36(Ak),g.Y36($R))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-chat"]],decls:8,vars:3,consts:[[4,"ngFor","ngForOf"],["type","text",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"p"),g._uU(1,"chat works!"),g.qZA(),g.YNc(2,xk,3,1,"div",0),g.TgZ(3,"h1"),g._uU(4),g.qZA(),g.TgZ(5,"input",1),g.NdJ("ngModelChange",function(u){return r.text=u}),g.qZA(),g.TgZ(6,"button",2),g.NdJ("click",function(){return r.send()}),g._uU(7,"Send"),g.qZA()),2&t&&(g.xp6(2),g.Q6J("ngForOf",r.msgs),g.xp6(2),g.Oqu(r.text),g.xp6(1),g.Q6J("ngModel",r.text))},dependencies:[zs,Qc,Pa,Ev]}),n})()},{path:"dashboard",component:Cb,canActivate:[bb]},{path:"**",component:ov}];let Rk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[p0.forRoot(Mk),p0]}),n})(),Nk=(()=>{class n{constructor(){this.title="my-chat"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[p]}),n})();const HR_firebase={apiKey:"AIzaSyD3bkMBrQqkZhLqs966gh9_p8oREi-VFLQ",authDomain:"my-chat-25e1b.firebaseapp.com",projectId:"my-chat-25e1b",storageBucket:"my-chat-25e1b.appspot.com",messagingSenderId:"98518208036",appId:"1:98518208036:web:4fea9bbd5d57d86627d2b1"};let Ok=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Nk]}),n.\u0275inj=g.cJS({imports:[Sc,Rk,FI,LI,ao.hO.initializeApp(HR_firebase)]}),n})();(0,g.G48)(),yu().bootstrapModule(Ok).catch(n=>console.error(n))},5867:(st,be,k)=>{k.d(be,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.10.0","app")},127:(st,be,k)=>{k.d(be,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(st,be,k)=>{k.r(be);var g=k(5861),ee=k(3942),O=k(2090),oe=k(9681),re=k(655),de=k(1877),ue=k(4859);const we=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Je=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ze=new de.Yd("@firebase/auth");function et(y,...h){Ze.logLevel<=de.in.ERROR&&Ze.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function Se(y,...h){throw je(y,...h)}function ye(y,...h){return je(y,...h)}function Ee(y,h,p){const _=Object.assign(Object.assign({},Je()),{[h]:p});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Be(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Se(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return me.create(y,...h)}function V(y,h,...p){if(!y)throw je(h,...p)}function ge(y){const h="INTERNAL ASSERTION FAILED: "+y;throw et(h),new Error(h)}function Z(y,h){y||ge(h)}const X=new Map;function ie(y){Z(y instanceof Function,"Expected a class definition");let h=X.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,X.set(y,h),h)}function Oe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ct(){return"http:"===Bt()||"https:"===Bt()}function Bt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class en{constructor(h,p){this.shortDelay=h,this.longDelay=p,Z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Vt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ct()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bn(y,h){Z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Ht{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vr=new en(3e4,6e4);function Rt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Jt(y,h,p,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,g.Z)(function*(y,h,p,_,S={}){return Nr(y,S,(0,g.Z)(function*(){let N={},W={};_&&("GET"===h?W=_:N={body:JSON.stringify(_)});const ce=(0,O.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/json",y.languageCode&&(Fe["X-Firebase-Locale"]=y.languageCode),Ht.fetch()(Ci(y,y.config.apiHost,p,ce),Object.assign({method:h,headers:Fe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function Nr(y,h,p){return hr.apply(this,arguments)}function hr(){return(hr=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Gt),h);try{const S=new Pr(y),N=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const W=yield N.json();if("needConfirmation"in W)throw ci(y,"account-exists-with-different-credential",W);if(N.ok&&!("errorMessage"in W))return W;{const ce=N.ok?W.errorMessage:W.error.message,[Fe,Ke]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Fe)throw ci(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Fe)throw ci(y,"email-already-in-use",W);if("USER_DISABLED"===Fe)throw ci(y,"user-disabled",W);const gt=_[Fe]||Fe.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ee(y,gt,Ke);Se(y,gt)}}catch(S){if(S instanceof O.ZR)throw S;Se(y,"network-request-failed")}})).apply(this,arguments)}function Or(y,h,p,_){return hs.apply(this,arguments)}function hs(){return(hs=(0,g.Z)(function*(y,h,p,_,S={}){const N=yield Jt(y,h,p,_,S);return"mfaPendingCredential"in N&&Se(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ci(y,h,p,_){const S=`${h}${p}?${_}`;return y.config.emulator?bn(y.config,S):`${y.config.apiScheme}://${S}`}class Pr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ye(this.auth,"network-request-failed")),vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ci(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const S=ye(y,h,_);return S.customData._tokenResponse=p,S}function We(){return(We=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function kr(y,h){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Tn(y,h){return li.apply(this,arguments)}function li(){return(li=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function qr(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function cn(){return(cn=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),_=yield p.getIdToken(h),S=it(_);V(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,W=N?.sign_in_provider;return{claims:S,token:_,authTime:qr(lt(S.auth_time)),issuedAtTime:qr(lt(S.iat)),expirationTime:qr(lt(S.exp)),signInProvider:W||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function lt(y){return 1e3*Number(y)}function it(y){var h;const[p,_,S]=y.split(".");if(void 0===p||void 0===_||void 0===S)return et("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,O.tV)(_);return N?JSON.parse(N):(et("Failed to decode base64 JWT payload"),null)}catch(N){return et("Caught error parsing JWT payload as JSON",null===(h=N)||void 0===h?void 0:h.toString()),null}}function er(y,h){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&_r(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function _r({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class yt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(p=_)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class Hi{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zt(y){return di.apply(this,arguments)}function di(){return(di=(0,g.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),S=yield er(y,Tn(p,{idToken:_}));V(S?.users.length,p,"internal-error");const N=S.users[0];y._notifyReloadListener(N);const W=null!==(h=N.providerUserInfo)&&void 0!==h&&h.length?L(N.providerUserInfo):[],ce=B(y.providerData,W),gt=!!y.isAnonymous&&!(y.email&&N.passwordHash||ce?.length),at={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:ce,metadata:new Hi(N.createdAt,N.lastLoginAt),isAnonymous:gt};Object.assign(y,at)})).apply(this,arguments)}function q(){return(q=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield zt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function B(y,h){return[...y.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}function L(y){return y.map(h=>{var{providerId:p}=h,_=(0,re._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function z(){return(z=(0,g.Z)(function*(y,h){const p=yield Nr(y,{},(0,g.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:N}=y.config,W=Ci(y,S,"/v1/token",`key=${N}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(W,{method:"POST",headers:ce,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class De{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function tn(y){const h=it(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,g.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:W}=yield function $(y,h){return z.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(S,N,Number(W))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:S,expirationTime:N}=p,W=new De;return _&&(V("string"==typeof _,"internal-error",{appName:h}),W.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:h}),W.accessToken=S),N&&(V("number"==typeof N,"internal-error",{appName:h}),W.expirationTime=N),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new De,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Ue(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class tt{constructor(h){var{uid:p,auth:_,stsTokenManager:S}=h,N=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Hi(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const _=yield er(p,p.stsTokenManager.getToken(p.auth,h));return V(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function Hn(y){return cn.apply(this,arguments)}(this,h)}reload(){return function $t(y){return q.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new tt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield zt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield er(h,function vo(y,h){return We.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,S,N,W,ce,Fe,Ke,gt;const at=null!==(_=p.displayName)&&void 0!==_?_:void 0,Yn=null!==(S=p.email)&&void 0!==S?S:void 0,Li=null!==(N=p.phoneNumber)&&void 0!==N?N:void 0,xu=null!==(W=p.photoURL)&&void 0!==W?W:void 0,cd=null!==(ce=p.tenantId)&&void 0!==ce?ce:void 0,ei=null!==(Fe=p._redirectEventId)&&void 0!==Fe?Fe:void 0,Hc=null!==(Ke=p.createdAt)&&void 0!==Ke?Ke:void 0,Gc=null!==(gt=p.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:$p,emailVerified:ld,isAnonymous:Hp,providerData:zc,stsTokenManager:py}=p;V($p&&py,h,"internal-error");const Vw=De.fromJSON(this.name,py);V("string"==typeof $p,h,"internal-error"),Ue(at,h.name),Ue(Yn,h.name),V("boolean"==typeof ld,h,"internal-error"),V("boolean"==typeof Hp,h,"internal-error"),Ue(Li,h.name),Ue(xu,h.name),Ue(cd,h.name),Ue(ei,h.name),Ue(Hc,h.name),Ue(Gc,h.name);const xa=new tt({uid:$p,auth:h,email:Yn,emailVerified:ld,displayName:at,isAnonymous:Hp,photoURL:xu,phoneNumber:Li,tenantId:cd,stsTokenManager:Vw,createdAt:Hc,lastLoginAt:Gc});return zc&&Array.isArray(zc)&&(xa.providerData=zc.map(qc=>Object.assign({},qc))),ei&&(xa._redirectEventId=ei),xa}static _fromIdTokenResponse(h,p,_=!1){return(0,g.Z)(function*(){const S=new De;S.updateFromServerResponse(p);const N=new tt({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield zt(N),N})()}}const qt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,_){var S=this;return(0,g.Z)(function*(){S.storage[p]=_})()}_get(p){var _=this;return(0,g.Z)(function*(){const S=_.storage[p];return void 0===S?null:S})()}_remove(p){var _=this;return(0,g.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function Gn(y,h,p){return`firebase:${y}:${h}:${p}`}class Ot{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:S,name:N}=this.auth;this.fullUserKey=Gn(this.userKey,S.apiKey,N),this.fullPersistenceKey=Gn("persistence",S.apiKey,N),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?tt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Ot(ie(qt),h,_);const S=(yield Promise.all(p.map(function(){var Ke=(0,g.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let N=S[0]||ie(qt);const W=Gn(_,h.config.apiKey,h.name);let ce=null;for(const Ke of p)try{const gt=yield Ke._get(W);if(gt){const at=tt._fromJSON(h,gt);Ke!==N&&(ce=at),N=Ke;break}}catch{}const Fe=S.filter(Ke=>Ke._shouldAllowMigration);return N._shouldAllowMigration&&Fe.length?(N=Fe[0],ce&&(yield N._set(W,ce.toJSON())),yield Promise.all(p.map(function(){var Ke=(0,g.Z)(function*(gt){if(gt!==N)try{yield gt._remove(W)}catch{}});return function(gt){return Ke.apply(this,arguments)}}())),new Ot(N,h,_)):new Ot(N,h,_)})()}}function Tt(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(wr(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(fn(h))return"Firefox";if(h.includes("silk/"))return"Silk";if($e(h))return"Blackberry";if(ft(h))return"Webos";if(On(h))return"Safari";if((h.includes("chrome/")||bi(h))&&!h.includes("edge/"))return"Chrome";if(Pn(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function fn(y=(0,O.z$)()){return/firefox\//i.test(y)}function On(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function bi(y=(0,O.z$)()){return/crios\//i.test(y)}function wr(y=(0,O.z$)()){return/iemobile/i.test(y)}function Pn(y=(0,O.z$)()){return/android/i.test(y)}function $e(y=(0,O.z$)()){return/blackberry/i.test(y)}function ft(y=(0,O.z$)()){return/webos/i.test(y)}function Kt(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function $s(y=(0,O.z$)()){return Kt(y)||Pn(y)||ft(y)||$e(y)||/windows phone/i.test(y)||wr(y)}function fs(y,h=[]){let p;switch(y){case"Browser":p=Tt((0,O.z$)());break;case"Worker":p=`${Tt((0,O.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${_}`}class _o{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=N=>new Promise((W,ce)=>{try{W(h(N))}catch(Fe){ce(Fe)}});_.onAbort=p,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var _;if(p.auth.currentUser===h)return;const S=[];try{for(const N of p.queue)yield N(h),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const W of S)try{W()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=N)||void 0===_?void 0:_.message})}})()}}class St{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hs(this),this.idTokenSubscription=new Hs(this),this.beforeStateQueue=new _o(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=ie(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,N;if(!_._deleted&&(_.persistenceManager=yield Ot.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var _;const S=yield p.assertedPersistence.getCurrentUser();let N=S,W=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ce=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Fe=N?._redirectEventId,Ke=yield p.tryRedirectSignIn(h);(!ce||ce===Fe)&&Ke?.user&&(N=Ke.user,W=!0)}if(!N)return p.directlySetCurrentUser(null);if(!N._redirectEventId){if(W)try{yield p.beforeStateQueue.runMiddleware(N)}catch(ce){N=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ce))}return N?p.reloadAndSetCurrentUserOrClear(N):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===N._redirectEventId?p.directlySetCurrentUser(N):p.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var _;try{yield zt(h)}catch(S){if("auth/network-request-failed"!==(null===(_=S)||void 0===_?void 0:_.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ie(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,g.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&ie(h)||p._popupRedirectResolver;V(_,p,"argument-error"),p.redirectPersistenceManager=yield Ot.create(p,[ie(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var _,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,S){if(this._deleted)return()=>{};const N="function"==typeof p?p:p.next.bind(p),W=this._isInitialized?Promise.resolve():this._initializationPromise;return V(W,this,"internal-error"),W.then(()=>N(this.currentUser)),"function"==typeof p?h.addObserver(p,_,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=fs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function pn(y){return(0,O.m9)(y)}class Hs{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ti(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function ps(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class or{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ge("not implemented")}_getIdTokenResponse(h){return ge("not implemented")}_linkToIdToken(h,p){return ge("not implemented")}_getReauthenticationResolver(h){return ge("not implemented")}}function Fn(y,h){return za.apply(this,arguments)}function za(){return(za=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:resetPassword",Rt(y,h))})).apply(this,arguments)}function nn(y,h){return rc.apply(this,arguments)}function rc(){return(rc=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ic(y,h){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:update",Rt(y,h))})).apply(this,arguments)}function zs(){return(zs=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPassword",Rt(y,h))})).apply(this,arguments)}function ms(y,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:sendOobCode",Rt(y,h))})).apply(this,arguments)}function Ln(y,h){return sc.apply(this,arguments)}function sc(){return(sc=(0,g.Z)(function*(y,h){return ms(y,h)})).apply(this,arguments)}function nr(y,h){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,g.Z)(function*(y,h){return ms(y,h)})).apply(this,arguments)}function qa(y,h){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,g.Z)(function*(y,h){return ms(y,h)})).apply(this,arguments)}function oc(y,h){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(y,h){return ms(y,h)})).apply(this,arguments)}function Cl(){return(Cl=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithEmailLink",Rt(y,h))})).apply(this,arguments)}function ac(){return(ac=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithEmailLink",Rt(y,h))})).apply(this,arguments)}class uc extends or{constructor(h,p,_,S=null){super("password",_),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new uc(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new uc(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Qo(y,h){return zs.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function dh(y,h){return Cl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Se(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return nn(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function hh(y,h){return ac.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:Se(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function qn(y,h){return bl.apply(this,arguments)}function bl(){return(bl=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithIdp",Rt(y,h))})).apply(this,arguments)}class Gi extends or{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Gi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Se("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=p,N=(0,re._T)(p,["providerId","signInMethod"]);if(!_||!S)return null;const W=new Gi(_,S);return W.idToken=N.idToken||void 0,W.accessToken=N.accessToken||void 0,W.secret=N.secret,W.nonce=N.nonce,W.pendingToken=N.pendingToken||null,W}_getIdTokenResponse(h){return qn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,qn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,qn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function hp(y,h){return cc.apply(this,arguments)}function cc(){return(cc=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:sendVerificationCode",Rt(y,h))})).apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",Rt(y,h))})).apply(this,arguments)}function Tl(){return(Tl=(0,g.Z)(function*(y,h){const p=yield Or(y,"POST","/v1/accounts:signInWithPhoneNumber",Rt(y,h));if(p.temporaryProof)throw ci(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const pp={USER_NOT_FOUND:"user-not-found"};function Sl(){return(Sl=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",Rt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),pp)})).apply(this,arguments)}class vs extends or{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new vs({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new vs({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function lc(y,h){return ys.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function fp(y,h){return Tl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function gp(y,h){return Sl.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:N}=h;return _||p||S||N?new vs({verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:N}):null}}class Wa{constructor(h){var p,_,S,N,W,ce;const Fe=(0,O.zd)((0,O.pd)(h)),Ke=null!==(p=Fe.apiKey)&&void 0!==p?p:null,gt=null!==(_=Fe.oobCode)&&void 0!==_?_:null,at=function Al(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Fe.mode)&&void 0!==S?S:null);V(Ke&&gt&&at,"argument-error"),this.apiKey=Ke,this.operation=at,this.code=gt,this.continueUrl=null!==(N=Fe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(W=Fe.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ce=Fe.tenantId)&&void 0!==ce?ce:null}static parseLink(h){const p=function xl(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||h||y}(h);try{return new Wa(p)}catch{return null}}}let Si=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return uc._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const S=Wa.parseLink(_);return V(S,"argument-error"),uc._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class zi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class qi extends zi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class qs extends qi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),Gi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return qs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return qs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:N,nonce:W,providerId:ce}=h;if(!_&&!S&&!p&&!N||!ce)return null;try{return new qs(ce)._credential({idToken:p,accessToken:_,nonce:W,pendingToken:N})}catch{return null}}}let Xo=(()=>{class y extends qi{constructor(){super("facebook.com")}static credential(p){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Za=(()=>{class y extends qi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:S}=p;if(!_&&!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),dc=(()=>{class y extends qi{constructor(){super("github.com")}static credential(p){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ea extends or{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return qn(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,qn(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,qn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:N}=p;return _&&S&&N&&_===S?new ea(_,N):null}static _create(h,p){return new ea(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zr extends zi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Zr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Zr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=ea.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return ea._create(_,p)}catch{return null}}}let Fr=(()=>{class y extends qi{constructor(){super("twitter.com")}static credential(p,_){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=p;if(!_||!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function wo(y,h){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signUp",Rt(y,h))})).apply(this,arguments)}class ar{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,S=!1){return(0,g.Z)(function*(){const N=yield tt._fromIdTokenResponse(h,_,S),W=gh(_);return new ar({user:N,providerId:W,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=gh(_);return new ar({user:h,providerId:S,_tokenResponse:_,operationType:p})})()}}function gh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function _n(){return(_n=(0,g.Z)(function*(y){var h;const p=pn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new ar({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield wo(p,{returnSecureToken:!0}),S=yield ar._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ka extends O.ZR{constructor(h,p,_,S){var N;super(p.code,p.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,Ka.prototype),this.customData={appName:h.name,tenantId:null!==(N=h.tenantId)&&void 0!==N?N:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,S){return new Ka(h,p,_,S)}}function yh(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Ka._fromErrorAndOperation(y,N,h,_):N})}function Kr(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Ya(){return(Ya=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield Ut(!0,p,h);const{providerUserInfo:_}=yield kr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=Kr(_||[]);return p.providerData=p.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Io(y,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,g.Z)(function*(y,h,p=!1){const _=yield er(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return ar._forOperation(y,"link",_)})).apply(this,arguments)}function Ut(y,h,p){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,g.Z)(function*(y,h,p){yield zt(h);const S=!1===y?"provider-already-linked":"no-such-provider";V(Kr(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function Ws(y,h){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,g.Z)(function*(y,h,p=!1){var _;const{auth:S}=y,N="reauthenticate";try{const W=yield er(y,yh(S,N,h,y),p);V(W.idToken,S,"internal-error");const ce=it(W.idToken);V(ce,S,"internal-error");const{sub:Fe}=ce;return V(y.uid===Fe,S,"user-mismatch"),ar._forOperation(y,N,W)}catch(W){throw"auth/user-not-found"===(null===(_=W)||void 0===_?void 0:_.code)&&Se(S,"user-mismatch"),W}})).apply(this,arguments)}function pi(y,h){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,g.Z)(function*(y,h,p=!1){const _="signIn",S=yield yh(y,_,h),N=yield ar._fromIdTokenResponse(y,_,S);return p||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function vn(y,h){return vt.apply(this,arguments)}function vt(){return(vt=(0,g.Z)(function*(y,h){return pi(pn(y),h)})).apply(this,arguments)}function eu(y,h){return vh.apply(this,arguments)}function vh(){return(vh=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield Ut(!1,p,h.providerId),Io(p,h)})).apply(this,arguments)}function tu(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h){return Ws((0,O.m9)(y),h)})).apply(this,arguments)}function hc(y,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,g.Z)(function*(y,h){return Or(y,"POST","/v1/accounts:signInWithCustomToken",Rt(y,h))})).apply(this,arguments)}function ta(){return(ta=(0,g.Z)(function*(y,h){const p=pn(y),_=yield hc(p,{token:h,returnSecureToken:!0}),S=yield ar._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ce{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Pt._fromServerResponse(h,p):Se(h,"internal-error")}}class Pt extends Ce{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Pt(p)}}function ru(y,h,p){var _;V((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function wn(){return(wn=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&ru(_,S,p),yield nr(_,S)})).apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(y,h,p){yield Fn((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(y,h){yield ic((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function ra(y,h){return pc.apply(this,arguments)}function pc(){return(pc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),_=yield Fn(p,{oobCode:h}),S=_.requestType;switch(V(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,p,"internal-error");default:V(_.email,p,"internal-error")}let N=null;return _.mfaInfo&&(N=Ce._fromServerResponse(pn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function Rl(){return(Rl=(0,g.Z)(function*(y,h){const{data:p}=yield ra((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(y,h,p){const _=pn(y),S=yield wo(_,{returnSecureToken:!0,email:h,password:p}),N=yield ar._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,_,"argument-error"),p&&ru(_,S,p),yield qa(_,S)})).apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S=Si.credentialWithLink(h,p||Oe());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),vn(_,S)})).apply(this,arguments)}function yp(y,h){return yc.apply(this,arguments)}function yc(){return(yc=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:createAuthUri",Rt(y,h))})).apply(this,arguments)}function oa(){return(oa=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:ct()?Oe():"http://localhost"},{signinMethods:S}=yield yp((0,O.m9)(y),_);return S||[]})).apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ru(p.auth,S,h);const{email:N}=yield Ln(p.auth,S);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function au(){return(au=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&ru(_.auth,N,p);const{email:W}=yield oc(_.auth,N);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function uu(y,h){return wc.apply(this,arguments)}function wc(){return(wc=(0,g.Z)(function*(y,h){return Jt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ec(){return(Ec=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,O.m9)(y),N={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},W=yield er(_,uu(_.auth,N));_.displayName=W.displayName||null,_.photoURL=W.photoUrl||null;const ce=_.providerData.find(({providerId:Fe})=>"password"===Fe);ce&&(ce.displayName=_.displayName,ce.photoURL=_.photoURL),yield _._updateTokensIfNecessary(W)})).apply(this,arguments)}function Ys(y,h,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(y,h,p){const{auth:_}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(N.email=h),p&&(N.password=p);const W=yield er(y,nn(_,N));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Lr{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class dn extends Lr{constructor(h,p,_,S){super(h,p,_),this.username=S}}class Ol extends Lr{constructor(h,p){super(h,"facebook.com",p)}}class Dc extends dn{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class _h extends Lr{constructor(h,p){super(h,"google.com",p)}}class Cc extends dn{constructor(h,p,_){super(h,"twitter.com",p,_)}}function lu(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Wn(y){var h,p;if(!y)return null;const{providerId:_}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const W=null===(p=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(W)return new Lr(N,"anonymous"!==W&&"custom"!==W?W:null)}if(!_)return null;switch(_){case"facebook.com":return new Ol(N,S);case"github.com":return new Dc(N,S);case"google.com":return new _h(N,S);case"twitter.com":return new Cc(N,S,y.screenName||null);case"custom":case"anonymous":return new Lr(N,null);default:return new Lr(N,_,S)}}(p)}class Qs{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new Qs("enroll",h,p)}static _fromMfaPendingCredential(h){return new Qs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Qs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Qs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class du{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=pn(h),S=p.customData._serverResponse,N=(S.mfaInfo||[]).map(ce=>Ce._fromServerResponse(_,ce));V(S.mfaPendingCredential,_,"internal-error");const W=Qs._fromMfaPendingCredential(S.mfaPendingCredential);return new du(W,N,function(){var ce=(0,g.Z)(function*(Fe){const Ke=yield Fe._process(_,W);delete S.mfaInfo,delete S.mfaPendingCredential;const gt=Object.assign(Object.assign({},S),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(p.operationType){case"signIn":const at=yield ar._fromIdTokenResponse(_,p.operationType,gt);return yield _._updateCurrentUser(at.user),at;case"reauthenticate":return V(p.user,_,"internal-error"),ar._forOperation(p.user,p.operationType,gt);default:Se(_,"internal-error")}});return function(Fe){return ce.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function hu(y,h){return Jt(y,"POST","/v2/accounts/mfaEnrollment:start",Rt(y,h))}class wh{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>Ce._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new wh(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Qs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,g.Z)(function*(){const S=h,N=yield _.getSession(),W=yield er(_.user,S._process(_.user.auth,N,p));return yield _.user._updateTokensIfNecessary(W),_.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var _;const S="string"==typeof h?h:h.uid,N=yield p.user.getIdToken(),W=yield er(p.user,function Ll(y,h){return Jt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(y,h))}(p.user.auth,{idToken:N,mfaEnrollmentId:S}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ce})=>ce!==S),yield p.user._updateTokensIfNecessary(W);try{yield p.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(_=ce)||void 0===_?void 0:_.code))throw ce}})()}}const To=new WeakMap,Js="__sak";class pu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Js,"1"),this.storage.removeItem(Js),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ca=(()=>{class y extends pu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ua(){const y=(0,O.z$)();return On(y)||Kt(y)}()&&function ln(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=$s(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),N=this.localCache[_];S!==N&&p(_,N,S)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((ce,Fe,Ke)=>{this.notifyListeners(ce,Ke)});const S=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(S);if(p.newValue!==ce)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!_)return}const N=()=>{const ce=this.storage.getItem(S);!_&&this.localCache[S]===ce||this.notifyListeners(S,ce)},W=this.storage.getItem(S);!function zn(){return(0,O.w1)()&&10===document.documentMode}()||W===p.newValue||p.newValue===p.oldValue?N():setTimeout(N,10)}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var S=()=>super._set,N=this;return(0,g.Z)(function*(){yield S().call(N,p,_),N.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,S=this;return(0,g.Z)(function*(){const N=yield _().call(S,p);return S.localCache[p]=JSON.stringify(N),N})()}_remove(p){var _=()=>super._remove,S=this;return(0,g.Z)(function*(){yield _().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),xi=(()=>{class y extends pu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let Bl=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(N=>N.isListeningto(p));if(_)return _;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,g.Z)(function*(){const S=p,{eventId:N,eventType:W,data:ce}=S.data,Fe=_.handlersMap[W];if(!Fe?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:W});const Ke=Array.from(Fe).map(function(){var at=(0,g.Z)(function*(Yn){return Yn(S.origin,ce)});return function(Yn){return at.apply(this,arguments)}}()),gt=yield function da(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(Ke);S.ports[0].postMessage({status:"done",eventId:N,eventType:W,response:gt})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ha(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class Tc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var S=this;return(0,g.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let W,ce;return new Promise((Fe,Ke)=>{const gt=ha("",20);N.port1.start();const at=setTimeout(()=>{Ke(new Error("unsupported_event"))},_);ce={messageChannel:N,onMessage(Yn){const Li=Yn;if(Li.data.eventId===gt)switch(Li.data.status){case"ack":clearTimeout(at),W=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Fe(Li.data.response);break;default:clearTimeout(at),clearTimeout(W),Ke(new Error("invalid_response"))}}},S.handlers.add(ce),N.port1.addEventListener("message",ce.onMessage),S.target.postMessage({eventType:h,eventId:gt,data:p},[N.port2])}).finally(()=>{ce&&S.removeMessageHandler(ce)})})()}}function An(){return window}function gu(){return typeof An().WorkerGlobalScope<"u"&&"function"==typeof An().importScripts}function fa(){return(fa=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Is="firebaseLocalStorageDb",Es="firebaseLocalStorage",Sc="fbase_key";class eo{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function pa(y,h){return y.transaction([Es],h?"readwrite":"readonly").objectStore(Es)}function Ao(){const y=indexedDB.open(Is,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Es,{keyPath:Sc})}catch(S){p(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Es)?h(_):(_.close(),yield function $l(){const y=indexedDB.deleteDatabase(Is);return new eo(y).toPromise()}(),h(yield Ao()))}))})}function Qi(y,h,p){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(y,h,p){const _=pa(y,!0).put({[Sc]:h,value:p});return new eo(_).toPromise()})).apply(this,arguments)}function ga(){return(ga=(0,g.Z)(function*(y,h){const p=pa(y,!1).get(h),_=yield new eo(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function to(y,h){const p=pa(y,!0).delete(h);return new eo(p).toPromise()}const xo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Ao()),p.db})()}_withRetries(p){var _=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const N=yield _._openDb();return yield p(N)}catch(N){if(S++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return gu()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Bl._getInstance(function yu(){return gu()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(S,N){return{keyProcessed:(yield p._poll()).includes(N.key)}});return function(S,N){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var _,S;if(p.activeServiceWorker=yield function Xs(){return fa.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Tc(p.activeServiceWorker);const N=yield p.sender._send("ping",{},800);!N||(null===(_=N[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function mu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ao();return yield Qi(p,Js,"1"),yield to(p,Js),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(N=>Qi(N,p,_)),S.localCache[p]=_,S.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,g.Z)(function*(){const S=yield _._withRetries(N=>function vu(y,h){return ga.apply(this,arguments)}(N,p));return _.localCache[p]=S,S})()}_remove(p){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(S=>to(S,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const _=yield p._withRetries(W=>{const ce=pa(W,!1).getAll();return new eo(ce).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:W,value:ce}of _)N.add(W),JSON.stringify(p.localCache[W])!==JSON.stringify(ce)&&(p.notifyListeners(W,ce),S.push(W));for(const W of Object.keys(p.localCache))p.localCache[W]&&!N.has(W)&&(p.notifyListeners(W,null),S.push(W));return S})()}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const N of Array.from(S))N(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Mo(y,h){return Jt(y,"POST","/v2/accounts/mfaSignIn:start",Rt(y,h))}function Ds(){return(Ds=(0,g.Z)(function*(y){return(yield Jt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function No(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=S=>{const N=ye("internal-error");N.customData=S,p(N)},_.type="text/javascript",_.charset="UTF-8",function Ro(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Iu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ma=1e12;class un{constructor(h){this.auth=h,this.counter=ma,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new vp(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||ma;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ma))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var _;return null===(_=p._widgets.get(h||ma))||void 0===_||_.execute(),""})()}}class vp{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xm(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _p=Iu("rcb"),ey=new en(3e4,6e4);class Ih{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=An().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function xw(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(An().grecaptcha):new Promise((_,S)=>{const N=An().setTimeout(()=>{S(ye(h,"network-request-failed"))},ey.get());An()[_p]=()=>{An().clearTimeout(N),delete An()[_p];const ce=An().grecaptcha;if(!ce)return void S(ye(h,"internal-error"));const Fe=ce.render;ce.render=(Ke,gt)=>{const at=Fe(Ke,gt);return this.counter++,at},this.hostLanguage=p,_(ce)},No(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:_p,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(N),S(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=An().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mc{load(h){return(0,g.Z)(function*(){return new un(h)})()}clearedOneInstance(){}}const ny="recaptcha",ry={theme:"light",type:"image"};class ir{constructor(h,p=Object.assign({},ry),_){this.parameters=p,this.type=ny,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mc:new Ih,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(N=>{const W=ce=>{!ce||(h.tokenChangeListeners.delete(W),N(ce))};h.tokenChangeListeners.add(W),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=An()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(ct()&&!gu(),h.auth,"internal-error"),yield function rn(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Vr(y){return Ds.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mi{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=vs._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Qr(){return(Qr=(0,g.Z)(function*(y,h,p){const _=pn(y),S=yield Cs(_,h,(0,O.m9)(p));return new mi(S,N=>vn(_,N))})).apply(this,arguments)}function yi(){return(yi=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);yield Ut(!1,_,"phone");const S=yield Cs(_.auth,h,(0,O.m9)(p));return new mi(S,N=>eu(_,N))})).apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S=yield Cs(_.auth,h,(0,O.m9)(p));return new mi(S,N=>tu(_,N))})).apply(this,arguments)}function Cs(y,h,p){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,g.Z)(function*(y,h,p){var _;const S=yield p.verify();try{let N;if(V("string"==typeof S,y,"argument-error"),V(p.type===ny,y,"argument-error"),N="string"==typeof h?{phoneNumber:h}:h,"session"in N){const W=N.session;if("phoneNumber"in N)return V("enroll"===W.type,y,"internal-error"),(yield hu(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===W.type,y,"internal-error");const ce=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return V(ce,y,"missing-multi-factor-info"),(yield Mo(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield hp(y,{phoneNumber:N.phoneNumber,recaptchaToken:S});return W}}finally{p._reset()}})).apply(this,arguments)}function Rc(){return(Rc=(0,g.Z)(function*(y,h){yield Io((0,O.m9)(y),h)})).apply(this,arguments)}let va=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=pn(p)}verifyPhoneNumber(p,_){return Cs(this.auth,p,(0,O.m9)(_))}static credential(p,_){return vs._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:S}=p;return _&&S?vs._fromTokenResponse(_,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Po(y,h){return h?ie(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class bs extends or{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return qn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return qn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return qn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function rt(y){return pi(y.auth,new bs(y),y.bypassAuthState)}function _a(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),Ws(p,new bs(y),y.bypassAuthState)}function Ts(y){return wa.apply(this,arguments)}function wa(){return(wa=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),Io(p,new bs(y),y.bypassAuthState)})).apply(this,arguments)}class ko{constructor(h,p,_,S,N=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(N){h.reject(N)}});return function(_,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:N,tenantId:W,error:ce,type:Fe}=h;if(ce)return void p.reject(ce);const Ke={auth:p.auth,requestUri:_,sessionId:S,tenantId:W||void 0,postBody:N||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Fe)(Ke))}catch(gt){p.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return rt;case"linkViaPopup":case"linkViaRedirect":return Ts;case"reauthViaPopup":case"reauthViaRedirect":return _a;default:Se(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zn=new en(2e3,1e4);function Fo(){return(Fo=(0,g.Z)(function*(y,h,p){const _=pn(y);Be(y,h,zi);const S=Po(_,p);return new Ss(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Be(_.auth,h,zi);const S=Po(_.auth,p);return new Ss(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function Ia(){return(Ia=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Be(_.auth,h,zi);const S=Po(_.auth,p);return new Ss(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let Ss=(()=>{class y extends ko{constructor(p,_,S,N,W){super(p,_,N,W),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const _=yield p.execute();return V(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,g.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const _=ha();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ye(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Zn.get())};p()}}return y.currentPopupAction=null,y})();const vi=new Map;class Pc extends ko{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let _=vi.get(p.auth._key());if(!_){try{const N=(yield function Lo(y,h){return Ur.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(N)}catch(S){_=()=>Promise.reject(S)}vi.set(p.auth._key(),_)}return p.bypassAuthState||vi.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Ur(){return(Ur=(0,g.Z)(function*(y,h){const p=Vn(h),_=es(y);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(p));return yield _._remove(p),S})).apply(this,arguments)}function Xi(y,h){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,h){return es(y)._set(Vn(h),"true")})).apply(this,arguments)}function xs(y,h){vi.set(y._key(),h)}function es(y){return ie(y._redirectPersistence)}function Vn(y){return Gn("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,g.Z)(function*(y,h,p){const _=pn(y);Be(y,h,zi);const S=Po(_,p);return yield Xi(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Be(_.auth,h,zi);const S=Po(_.auth,p);yield Xi(S,_.auth);const N=yield ot(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",N)})).apply(this,arguments)}function Ie(){return(Ie=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Be(_.auth,h,zi);const S=Po(_.auth,p);yield Ut(!1,_,h.providerId),yield Xi(S,_.auth);const N=yield ot(_);return S._openRedirect(_.auth,h,"linkViaRedirect",N)})).apply(this,arguments)}function Xe(){return(Xe=(0,g.Z)(function*(y,h){return yield pn(y)._initializationPromise,pt(y,h,!1)})).apply(this,arguments)}function pt(y,h){return wt.apply(this,arguments)}function wt(){return(wt=(0,g.Z)(function*(y,h,p=!1){const _=pn(y),S=Po(_,h),W=yield new Pc(_,S,p).execute();return W&&!p&&(delete W.user._redirectEventId,yield _._persistUserIfCurrent(W.user),yield _._setRedirectUser(null,h)),W})).apply(this,arguments)}function ot(y){return mn.apply(this,arguments)}function mn(){return(mn=(0,g.Z)(function*(y){const h=ha(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Vo{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Ri(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return It(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!It(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ye(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ms(h))}saveEventToCache(h){this.cachedEventUids.add(Ms(h)),this.lastProcessedEventTime=Date.now()}}function Ms(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function It({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Rs(y){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(y,h={}){return Jt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Uo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ro=/^https?/;function Eh(){return(Eh=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Rs(y);for(const p of h)try{if(Ep(p))return}catch{}Se(y,"unauthorized-domain")})).apply(this,arguments)}function Ep(y){const h=Oe(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&W.hostname===_}if(!ro.test(p))return!1;if(Uo.test(y))return _===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const Dp=new en(3e4,6e4);function iy(){const y=An().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ni=null;function Dh(y){return Ni=Ni||function Kn(y){return new Promise((h,p)=>{var _,S,N;function W(){iy(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{iy(),p(ye(y,"network-request-failed"))},timeout:Dp.get()})}if(null!==(S=null===(_=An().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(N=An().gapi)||void 0===N||!N.load){const ce=Iu("iframefcb");return An()[ce]=()=>{gapi.load?W():p(ye(y,"network-request-failed"))},No(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Fe=>p(Fe))}W()}}).catch(h=>{throw Ni=null,h})}(y),Ni}const Cp=new en(5e3,15e3),sy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bp(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?bn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},S=bh.get(y.config.apiHost);S&&(_.eid=S);const N=y._getFrameworks();return N.length&&(_.fw=N.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function Ea(){return Ea=(0,g.Z)(function*(y){const h=yield Dh(y),p=An().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:bp(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sy,dontclear:!0},_=>new Promise(function(){var S=(0,g.Z)(function*(N,W){yield _.restyle({setHideOnLeave:!1});const ce=ye(y,"network-request-failed"),Fe=An().setTimeout(()=>{W(ce)},Cp.get());function Ke(){An().clearTimeout(Fe),N(_)}_.ping(Ke).then(Ke,()=>{W(ce)})});return function(N,W){return S.apply(this,arguments)}}()))}),Ea.apply(this,arguments)}const Hl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ql(y,h,p,_,S,N){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:oe.SDK_VERSION,eventId:S};if(h instanceof zi){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Fe,Ke]of Object.entries(N||{}))W[Fe]=Ke}if(h instanceof qi){const Fe=h.getScopes().filter(Ke=>""!==Ke);Fe.length>0&&(W.scopes=Fe.join(","))}y.tenantId&&(W.tid=y.tenantId);const ce=W;for(const Fe of Object.keys(ce))void 0===ce[Fe]&&delete ce[Fe];return`${function Wl({config:y}){return y.emulator?bn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ce).slice(1)}`}const Ca="webStorageSupport";class Oi extends class oy{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Oi(h)}_finalizeEnroll(h,p,_){return function fu(y,h){return Jt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function wu(y,h){return Jt(y,"POST","/v2/accounts/mfaSignIn:finalize",Rt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bo=(()=>{class y{constructor(){}static assertion(p){return Oi._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Sh="@firebase/auth";class Rw{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{var S;h((null===(S=_)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jo(){return window}function Ah(){return(Ah=(0,g.Z)(function*(y,h,p){var _;const{BuildInfo:S}=jo();Z(h.sessionId,"AuthEvent did not contain a session ID");const N=yield ly(h.sessionId),W={};return Kt()?W.ibi=S.packageName:Pn()?W.apn=S.packageName:Se(y,"operation-not-supported-in-this-environment"),S.displayName&&(W.appDisplayName=S.displayName),W.sessionId=N,ql(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,W)})).apply(this,arguments)}function ba(){return(ba=(0,g.Z)(function*(y){const{BuildInfo:h}=jo(),p={};Kt()?p.iosBundleId=h.packageName:Pn()?p.androidPackageName=h.packageName:Se(y,"operation-not-supported-in-this-environment"),yield Rs(y,p)})).apply(this,arguments)}function Ns(){return(Ns=(0,g.Z)(function*(y,h,p){const{cordova:_}=jo();let S=()=>{};try{yield new Promise((N,W)=>{let ce=null;function Fe(){var at;N();const Yn=null===(at=_.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof Yn&&Yn(),"function"==typeof p?.close&&p.close()}function Ke(){ce||(ce=window.setTimeout(()=>{W(ye(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&Ke()}h.addPassiveListener(Fe),document.addEventListener("resume",Ke,!1),Pn()&&document.addEventListener("visibilitychange",gt,!1),S=()=>{h.removePassiveListener(Fe),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",gt,!1),ce&&window.clearTimeout(ce)}})}finally{S()}})).apply(this,arguments)}function ly(y){return Rp.apply(this,arguments)}function Rp(){return(Rp=(0,g.Z)(function*(y){const h=Pw(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pw(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}!function Ow(y){(0,oe._registerComponent)(new ue.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:N,authDomain:W}=_.options;return((ce,Fe)=>{V(N&&!N.includes(":"),"invalid-api-key",{appName:ce.name}),V(!W?.includes(":"),"argument-error",{appName:ce.name});const Ke={apiKey:N,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fs(y)},gt=new St(ce,Fe,Ke);return function ke(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(ie);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(gt,p),gt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ue.wA("auth-internal",h=>{const p=pn(h.getProvider("auth").getImmediate());return new Rw(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Sh,"0.20.7",function Nw(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Sh,"0.20.7","esm2017")}("Browser");class Ta extends Vo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Np(y){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,g.Z)(function*(y){const h=yield xh()._get(Mh(y));return h&&(yield xh()._remove(Mh(y))),h})).apply(this,arguments)}function bu(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function xh(){return ie(ca)}function Mh(y){return Gn("authEvent",y.config.apiKey,y.name)}function Tu(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Pp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function ts(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Oh(y=(0,O.z$)()){return!("file:"!==ts()&&"ionic:"!==ts()&&"capacitor:"!==ts()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jl(){try{const y=self.localStorage,h=ha();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Bc(y=(0,O.z$)()){return function Fw(){return(0,O.w1)()&&11===document?.documentMode}()||function Lw(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Xl()&&(0,O.hl)()}return!1}function Xl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ed(){return(function Ql(){return"http:"===ts()||"https:"===ts()}()||(0,O.ru)()||Oh())&&!function hy(){return(0,O.b$)()||(0,O.UG)()}()&&Jl()&&!Xl()}function Ph(){return Oh()&&typeof document<"u"}function td(){return(td=(0,g.Z)(function*(){return!!Ph()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Cr={LOCAL:"local",NONE:"none",SESSION:"session"},nd=V,kh="persistence";function Su(y){return ki.apply(this,arguments)}function ki(){return(ki=(0,g.Z)(function*(y){yield y._initializationPromise;const h=Fh(),p=Gn(kh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Fh(){var y;try{return(null===(y=function Fp(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const rd=V;class ns{constructor(){this.browserResolver=ie(class Ap{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xi,this._completeRedirectFn=pt,this._overrideRedirectResult=xs}_openPopup(h,p,_,S){var N=this;return(0,g.Z)(function*(){var W;Z(null===(W=N.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ce=ql(h,p,_,Oe(),S);return function so(y,h,p,_=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),W=Math.max((window.screen.availWidth-_)/2,0).toString();let ce="";const Fe=Object.assign(Object.assign({},Hl),{width:_.toString(),height:S.toString(),top:N,left:W}),Ke=(0,O.z$)().toLowerCase();p&&(ce=bi(Ke)?"_blank":p),fn(Ke)&&(h=h||"http://localhost",Fe.scrollbars="yes");const gt=Object.entries(Fe).reduce((Yn,[Li,xu])=>`${Yn}${Li}=${xu},`,"");if(function hi(y=(0,O.z$)()){var h;return Kt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ke)&&"_self"!==ce)return function Sp(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",ce),new kc(null);const at=window.open(h||"",ce,gt);V(at,y,"popup-blocked");try{at.focus()}catch{}return new kc(at)}(h,ce,ha())})()}_openRedirect(h,p,_,S){var N=this;return(0,g.Z)(function*(){return yield N._originValidation(h),function gi(y){An().location.href=y}(ql(h,p,_,Oe(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:N}=this.eventManagers[p];return S?Promise.resolve(S):(Z(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const _=yield function Tp(y){return Ea.apply(this,arguments)}(h),S=new Vo(h);return _.register("authEvent",N=>(V(N?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Ca,{type:Ca},S=>{var N;const W=null===(N=S?.[0])||void 0===N?void 0:N[Ca];void 0!==W&&p(!!W),Se(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function _i(y){return Eh.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return $s()||On()||Kt()}}),this.cordovaResolver=ie(class dy{constructor(){this._redirectPersistence=xi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pt,this._overrideRedirectResult=xs}_initialize(h){var p=this;return(0,g.Z)(function*(){const _=h._key();let S=p.eventManagers.get(_);return S||(S=new Ta(h),p.eventManagers.set(_,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Se(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,S){var N=this;return(0,g.Z)(function*(){!function Zl(y){var h,p,_,S,N,W,ce,Fe,Ke,gt;const at=jo();V("function"==typeof(null===(h=at?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=at?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(N=null===(S=null===(_=at?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Fe=null===(ce=null===(W=at?.cordova)||void 0===W?void 0:W.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Fe?void 0:Fe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(gt=null===(Ke=at?.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield N._initialize(h);yield W.initialized(),W.resetRedirect(),function pr(){vi.clear()}(),yield N._originValidation(h);const ce=function Sa(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:bu(),postBody:null,tenantId:y.tenantId,error:ye(y,"no-auth-event")}}(h,_,S);yield function Vc(y,h){return xh()._set(Mh(y),h)}(h,ce);const Fe=yield function uy(y,h,p){return Ah.apply(this,arguments)}(h,ce,p),Ke=yield function Pi(y){const{cordova:h}=jo();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function Wr(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Fe);return function Lc(y,h,p){return Ns.apply(this,arguments)}(h,W,Ke)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function cy(y){return ba.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:S,BuildInfo:N}=jo(),W=setTimeout((0,g.Z)(function*(){yield Np(h),p.onEvent(Pp())}),500),ce=function(){var gt=(0,g.Z)(function*(at){clearTimeout(W);const Yn=yield Np(h);let Li=null;Yn&&at?.url&&(Li=function Op(y,h){var p,_;const S=function Kl(y){const h=Tu(y),p=h.link?decodeURIComponent(h.link):void 0,_=Tu(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Tu(S).link||S||_||p||y}(h);if(S.includes("/__/auth/callback")){const N=Tu(S),W=N.firebaseError?function Rh(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,ce=null===(_=null===(p=W?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Fe=ce?ye(ce):null;return Fe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Fe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(Yn,at.url)),p.onEvent(Li||Pp())});return function(Yn){return gt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ce);const Fe=S,Ke=`${N.packageName.toLowerCase()}://`;jo().handleOpenURL=function(){var gt=(0,g.Z)(function*(at){if(at.toLowerCase().startsWith(Ke)&&ce({url:at}),"function"==typeof Fe)try{Fe(at)}catch(Yn){console.error(Yn)}});return function(at){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xi,this._completeRedirectFn=pt,this._overrideRedirectResult=xs}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(h,p,_,S)})()}_openRedirect(h,p,_,S){var N=this;return(0,g.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(h,p,_,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Ph()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function fy(){return td.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function $o(y){return y.unwrap()}function sd(y){return od(y)}function od(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return va.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=Za;break;case"facebook.com":_=Xo;break;case"github.com":_=dc;break;case"twitter.com":_=Fr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:W,pendingToken:ce,nonce:Fe}=h;return N||W||S||ce?ce?p.startsWith("saml.")?ea._create(p,ce):Gi._fromParams({providerId:p,signInMethod:p,pendingToken:ce,idToken:S,accessToken:N}):new qs(p).credential({idToken:S,accessToken:N,rawNonce:Fe}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function cr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Ps(y,h){var p,_;const S=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new ud(y,function En(y,h){var p;const _=(0,O.m9)(y),S=h;return V(h.customData.operationType,_,"argument-error"),V(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),du._fromError(_,S)}(y,h));else if(S){const N=od(h),W=h;N&&(W.credential=N,W.tenantId=S.tenantId||void 0,W.email=S.email||void 0,W.phoneNumber=S.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:sd(p),additionalUserInfo:lu(p),user:Xr.getOrCreate(S)}})}function ad(y,h){return $c.apply(this,arguments)}function $c(){return($c=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>cr(y,p.confirm(_))}})).apply(this,arguments)}class ud{constructor(h,p){this.resolver=p,this.auth=function id(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return cr($o(this.auth),this.resolver.resolveSignIn(h))}}class Xr{constructor(h){this._delegate=h,this.multiFactor=function So(y){const h=(0,O.m9)(y);return To.has(h)||To.set(h,wh._fromUser(h)),To.get(h)}(h)}static getOrCreate(h){return Xr.USER_MAP.has(h)||Xr.USER_MAP.set(h,new Xr(h)),Xr.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return cr(p.auth,eu(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,g.Z)(function*(){return ad(_.auth,function gn(y,h,p){return yi.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return cr(p.auth,function Du(y,h,p){return Ia.apply(this,arguments)}(p._delegate,h,ns))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Su(pn(p.auth)),function Y(y,h,p){return function ne(y,h,p){return Ie.apply(this,arguments)}(y,h,p)}(p._delegate,h,ns)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return cr(p.auth,tu(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return ad(this.auth,function ya(y,h,p){return Dr.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return cr(this.auth,function Ip(y,h,p){return Oc.apply(this,arguments)}(this._delegate,h,ns))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Su(pn(p.auth)),function b(y,h,p){return function x(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,ns)})()}sendEmailVerification(h){return function vc(y,h){return aa.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function Er(y,h){return Ya.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Nl(y,h){return Ys((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Ks(y,h){return Ys((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function wp(y,h){return Rc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Ic(y,h){return Ec.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function _c(y,h,p){return au.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xr.USER_MAP=new WeakMap;const oo=V;let Lp=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;oo(S,"invalid-api-key",{appName:p.name}),oo(S,"invalid-api-key",{appName:p.name});const N=typeof window<"u"?ns:void 0;this._delegate=_.initialize({options:{persistence:Lh(S,p.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function nc(y,h,p){const _=pn(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!p?.disableWarnings,N=Ti(h),{host:W,port:ce}=function kn(y){const h=Ti(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const N=S[1];return{host:N,port:ps(_.substr(N.length+1))}}{const[N,W]=_.split(":");return{host:N,port:ps(W)}}}(h);_.config.emulator={url:`${N}//${W}${null===ce?"":`:${ce}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:W,port:ce,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function gs(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function Yr(y,h){return na.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ra(this._delegate,p)}confirmPasswordReset(p,_){return function su(y,h,p){return Eo.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var S=this;return(0,g.Z)(function*(){return cr(S._delegate,function ia(y,h,p){return In.apply(this,arguments)}(S._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function ou(y,h){return oa.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Yi(y,h){return"EMAIL_SIGNIN"===Wa.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){oo(ed(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function Me(y,h){return Xe.apply(this,arguments)}(p._delegate,ns);return _?cr(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function kp(y,h){pn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,S){const{next:N,error:W,complete:ce}=Vp(p,_,S);return this._delegate.onAuthStateChanged(N,W,ce)}onIdTokenChanged(p,_,S){const{next:N,error:W,complete:ce}=Vp(p,_,S);return this._delegate.onIdTokenChanged(N,W,ce)}sendSignInLinkToEmail(p,_){return function mc(y,h,p){return Zs.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function iu(y,h,p){return wn.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,g.Z)(function*(){let S;switch(function jc(y,h){nd(Object.values(Cr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?nd(h!==Cr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?nd(h===Cr.NONE,y,"unsupported-persistence-type"):Xl()?nd(h===Cr.NONE||h===Cr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):nd(h===Cr.NONE||Jl(),y,"unsupported-persistence-type")}(_._delegate,p),p){case Cr.SESSION:S=xi;break;case Cr.LOCAL:S=(yield ie(xo)._isAvailable())?xo:ca;break;case Cr.NONE:S=qt;break;default:return Se("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return cr(this._delegate,function mh(y){return _n.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return cr(this._delegate,vn(this._delegate,p))}signInWithCustomToken(p){return cr(this._delegate,function fc(y,h){return ta.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return cr(this._delegate,function Ai(y,h,p){return vn((0,O.m9)(y),Si.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return cr(this._delegate,function mp(y,h,p){return sa.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return ad(this._delegate,function nt(y,h,p){return Qr.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,g.Z)(function*(){return oo(ed(),_._delegate,"operation-not-supported-in-this-environment"),cr(_._delegate,function Nc(y,h,p){return Fo.apply(this,arguments)}(_._delegate,p,ns))})()}signInWithRedirect(p){var _=this;return(0,g.Z)(function*(){return oo(ed(),_._delegate,"operation-not-supported-in-this-environment"),yield Su(_._delegate),function hn(y,h,p){return function Cu(y,h,p){return D.apply(this,arguments)}(y,h,p)}(_._delegate,p,ns)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function gc(y,h){return Rl.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Cr,y})();function Vp(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const S=_;return{next:W=>S(W&&Xr.getOrCreate(W)),error:h,complete:p}}function Lh(y,h){const p=function Fi(y,h){const p=Fh();if(!p)return[];const _=Gn(kh,y,h);switch(p.getItem(_)){case Cr.NONE:return[qt];case Cr.LOCAL:return[xo,xi];case Cr.SESSION:return[xi];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(xo)&&p.push(xo),typeof window<"u")for(const _ of[ca,xi])p.includes(_)||p.push(_);return p.includes(qt)||p.push(qt),p}class Au{constructor(){this.providerId="phone",this._delegate=new va($o(ee.Z.auth()))}static credential(h,p){return va.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Au.PHONE_SIGN_IN_METHOD=va.PHONE_SIGN_IN_METHOD,Au.PROVIDER_ID=va.PROVIDER_ID;const Up=V;class Vh{constructor(h,p,_=ee.Z.app()){var S;Up(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new ir(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function jp(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Lp(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Si,FacebookAuthProvider:Xo,GithubAuthProvider:dc,GoogleAuthProvider:Za,OAuthProvider:qs,SAMLAuthProvider:Zr,PhoneAuthProvider:Au,PhoneMultiFactorGenerator:Bo,RecaptchaVerifier:Vh,TwitterAuthProvider:Fr,Auth:Lp,AuthCredential:or,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.20")}(ee.Z)},9751:(st,be,k)=>{k.d(be,{y:()=>he});var g=k(2961),ee=k(727),O=k(8822),oe=k(9635),re=k(2416),de=k(576),ue=k(2806);let he=(()=>{class K{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const we=new K;return we.source=this,we.operator=Ae,we}subscribe(Ae,we,Je){const me=function j(K){return K&&K instanceof g.Lv||function U(K){return K&&(0,de.m)(K.next)&&(0,de.m)(K.error)&&(0,de.m)(K.complete)}(K)&&(0,ee.Nn)(K)}(Ae)?Ae:new g.Hp(Ae,we,Je);return(0,ue.x)(()=>{const{operator:fe,source:Ze}=this;me.add(fe?fe.call(me,Ze):Ze?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(we){Ae.error(we)}}forEach(Ae,we){return new(we=pe(we))((Je,me)=>{const fe=new g.Hp({next:Ze=>{try{Ae(Ze)}catch(et){me(et),fe.unsubscribe()}},error:me,complete:Je});this.subscribe(fe)})}_subscribe(Ae){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Ae)}[O.L](){return this}pipe(...Ae){return(0,oe.U)(Ae)(this)}toPromise(Ae){return new(Ae=pe(Ae))((we,Je)=>{let me;this.subscribe(fe=>me=fe,fe=>Je(fe),()=>we(me))})}}return K.create=Ve=>new K(Ve),K})();function pe(K){var Ve;return null!==(Ve=K??re.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(st,be,k)=>{k.d(be,{x:()=>ue});var g=k(9751),ee=k(727);const oe=(0,k(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),de=k(2806);let ue=(()=>{class pe extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new he(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Ve,observers:Ae}=this;return K||Ve?ee.Lc:(this.currentObservers=null,Ae.push(j),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(Ae,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Ve,isStopped:Ae}=this;K?j.error(Ve):Ae&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return pe.create=(U,j)=>new he(U,j),pe})();class he extends ue{constructor(U,j){super(),this.destination=U,this.source=j}next(U){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,U)}error(U){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,U)}complete(){var U,j;null===(j=null===(U=this.destination)||void 0===U?void 0:U.complete)||void 0===j||j.call(U)}_subscribe(U){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe(U))&&void 0!==K?K:ee.Lc}}},2961:(st,be,k)=>{k.d(be,{Hp:()=>Je,Lv:()=>K});var g=k(576),ee=k(727),O=k(2416),oe=k(7849);function re(){}const de=pe("C",void 0,void 0);function pe(Se,ye,Ee){return{kind:Se,value:ye,error:Ee}}var U=k(3410),j=k(2806);class K extends ee.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,ee.Nn)(ye)&&ye.add(this)):this.destination=et}static create(ye,Ee,Be){return new Je(ye,Ee,Be)}next(ye){this.isStopped?Ze(function he(Se){return pe("N",Se,void 0)}(ye),this):this._next(ye)}error(ye){this.isStopped?Ze(function ue(Se){return pe("E",void 0,Se)}(ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ze(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Ae(Se,ye){return Ve.call(Se,ye)}class we{constructor(ye){this.partialObserver=ye}next(ye){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(ye)}catch(Be){me(Be)}}error(ye){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(ye)}catch(Be){me(Be)}else me(ye)}complete(){const{partialObserver:ye}=this;if(ye.complete)try{ye.complete()}catch(Ee){me(Ee)}}}class Je extends K{constructor(ye,Ee,Be){let je;if(super(),(0,g.m)(ye)||!ye)je={next:ye??void 0,error:Ee??void 0,complete:Be??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ye),V.unsubscribe=()=>this.unsubscribe(),je={next:ye.next&&Ae(ye.next,V),error:ye.error&&Ae(ye.error,V),complete:ye.complete&&Ae(ye.complete,V)}):je=ye}this.destination=new we(je)}}function me(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Se):(0,oe.h)(Se)}function Ze(Se,ye){const{onStoppedNotification:Ee}=O.v;Ee&&U.z.setTimeout(()=>Ee(Se,ye))}const et={closed:!0,next:re,error:function fe(Se){throw Se},complete:re}},727:(st,be,k)=>{k.d(be,{Lc:()=>de,w0:()=>re,Nn:()=>ue});var g=k(576);const O=(0,k(3888).d)(pe=>function(j){pe(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Ve)=>`${Ve+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class re{constructor(U){this.initialTeardown=U,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let U;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ae of j)Ae.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,g.m)(K))try{K()}catch(Ae){U=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Ae of Ve)try{he(Ae)}catch(we){U=U??[],we instanceof O?U=[...U,...we.errors]:U.push(we)}}if(U)throw new O(U)}}add(U){var j;if(U&&U!==this)if(this.closed)he(U);else{if(U instanceof re){if(U.closed||U._hasParent(this))return;U._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(U)}}_hasParent(U){const{_parentage:j}=this;return j===U||Array.isArray(j)&&j.includes(U)}_addParent(U){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(U),j):j?[j,U]:U}_removeParent(U){const{_parentage:j}=this;j===U?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,U)}remove(U){const{_finalizers:j}=this;j&&(0,oe.P)(j,U),U instanceof re&&U._removeParent(this)}}re.EMPTY=(()=>{const pe=new re;return pe.closed=!0,pe})();const de=re.EMPTY;function ue(pe){return pe instanceof re||pe&&"closed"in pe&&(0,g.m)(pe.remove)&&(0,g.m)(pe.add)&&(0,g.m)(pe.unsubscribe)}function he(pe){(0,g.m)(pe)?pe():pe.unsubscribe()}},2416:(st,be,k)=>{k.d(be,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,be,k)=>{k.d(be,{E:()=>ee});const ee=new(k(9751).y)(re=>re.complete())},8996:(st,be,k)=>{k.d(be,{D:()=>ye});var g=k(8421),ee=k(5363),O=k(9468),de=k(9751),he=k(2202),pe=k(576),U=k(9672);function K(Ee,Be){if(!Ee)throw new Error("Iterable cannot be null");return new de.y(je=>{(0,U.f)(je,Be,()=>{const V=Ee[Symbol.asyncIterator]();(0,U.f)(je,Be,()=>{V.next().then(ge=>{ge.done?je.complete():je.next(ge.value)})},0,!0)})})}var Ve=k(3670),Ae=k(8239),we=k(1144),Je=k(6495),me=k(2206),fe=k(4532),Ze=k(3260);function ye(Ee,Be){return Be?function Se(Ee,Be){if(null!=Ee){if((0,Ve.c)(Ee))return function oe(Ee,Be){return(0,g.Xf)(Ee).pipe((0,O.R)(Be),(0,ee.Q)(Be))}(Ee,Be);if((0,we.z)(Ee))return function ue(Ee,Be){return new de.y(je=>{let V=0;return Be.schedule(function(){V===Ee.length?je.complete():(je.next(Ee[V++]),je.closed||this.schedule())})})}(Ee,Be);if((0,Ae.t)(Ee))return function re(Ee,Be){return(0,g.Xf)(Ee).pipe((0,O.R)(Be),(0,ee.Q)(Be))}(Ee,Be);if((0,me.D)(Ee))return K(Ee,Be);if((0,Je.T)(Ee))return function j(Ee,Be){return new de.y(je=>{let V;return(0,U.f)(je,Be,()=>{V=Ee[he.h](),(0,U.f)(je,Be,()=>{let ge,Z;try{({value:ge,done:Z}=V.next())}catch(X){return void je.error(X)}Z?je.complete():je.next(ge)},0,!0)}),()=>(0,pe.m)(V?.return)&&V.return()})}(Ee,Be);if((0,Ze.L)(Ee))return function et(Ee,Be){return K((0,Ze.Q)(Ee),Be)}(Ee,Be)}throw(0,fe.z)(Ee)}(Ee,Be):(0,g.Xf)(Ee)}},8421:(st,be,k)=>{k.d(be,{Xf:()=>Ve});var g=k(655),ee=k(1144),O=k(8239),oe=k(9751),re=k(3670),de=k(2206),ue=k(4532),he=k(6495),pe=k(3260),U=k(576),j=k(7849),K=k(8822);function Ve(Se){if(Se instanceof oe.y)return Se;if(null!=Se){if((0,re.c)(Se))return function Ae(Se){return new oe.y(ye=>{const Ee=Se[K.L]();if((0,U.m)(Ee.subscribe))return Ee.subscribe(ye);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,ee.z)(Se))return function we(Se){return new oe.y(ye=>{for(let Ee=0;Ee<Se.length&&!ye.closed;Ee++)ye.next(Se[Ee]);ye.complete()})}(Se);if((0,O.t)(Se))return function Je(Se){return new oe.y(ye=>{Se.then(Ee=>{ye.closed||(ye.next(Ee),ye.complete())},Ee=>ye.error(Ee)).then(null,j.h)})}(Se);if((0,de.D)(Se))return fe(Se);if((0,he.T)(Se))return function me(Se){return new oe.y(ye=>{for(const Ee of Se)if(ye.next(Ee),ye.closed)return;ye.complete()})}(Se);if((0,pe.L)(Se))return function Ze(Se){return fe((0,pe.Q)(Se))}(Se)}throw(0,ue.z)(Se)}function fe(Se){return new oe.y(ye=>{(function et(Se,ye){var Ee,Be,je,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,g.KL)(Se);!(Be=yield Ee.next()).done;)if(ye.next(Be.value),ye.closed)return}catch(ge){je={error:ge}}finally{try{Be&&!Be.done&&(V=Ee.return)&&(yield V.call(Ee))}finally{if(je)throw je.error}}ye.complete()})})(Se,ye).catch(Ee=>ye.error(Ee))})}},6451:(st,be,k)=>{k.d(be,{T:()=>de});var g=k(8189),ee=k(8421),O=k(515),oe=k(7669),re=k(8996);function de(...ue){const he=(0,oe.yG)(ue),pe=(0,oe._6)(ue,1/0),U=ue;return U.length?1===U.length?(0,ee.Xf)(U[0]):(0,g.J)(pe)((0,re.D)(U,he)):O.E}},5403:(st,be,k)=>{k.d(be,{x:()=>ee});var g=k(2961);function ee(oe,re,de,ue,he){return new O(oe,re,de,ue,he)}class O extends g.Lv{constructor(re,de,ue,he,pe,U){super(re),this.onFinalize=pe,this.shouldUnsubscribe=U,this._next=de?function(j){try{de(j)}catch(K){re.error(K)}}:super._next,this._error=he?function(j){try{he(j)}catch(K){re.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(j){re.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(st,be,k)=>{k.d(be,{U:()=>O});var g=k(4482),ee=k(5403);function O(oe,re){return(0,g.e)((de,ue)=>{let he=0;de.subscribe((0,ee.x)(ue,pe=>{ue.next(oe.call(re,pe,he++))}))})}},8189:(st,be,k)=>{k.d(be,{J:()=>O});var g=k(5577),ee=k(4671);function O(oe=1/0){return(0,g.z)(ee.y,oe)}},5577:(st,be,k)=>{k.d(be,{z:()=>he});var g=k(4004),ee=k(8421),O=k(4482),oe=k(9672),re=k(5403),ue=k(576);function he(pe,U,j=1/0){return(0,ue.m)(U)?he((K,Ve)=>(0,g.U)((Ae,we)=>U(K,Ae,Ve,we))((0,ee.Xf)(pe(K,Ve))),j):("number"==typeof U&&(j=U),(0,O.e)((K,Ve)=>function de(pe,U,j,K,Ve,Ae,we,Je){const me=[];let fe=0,Ze=0,et=!1;const Se=()=>{et&&!me.length&&!fe&&U.complete()},ye=Be=>fe<K?Ee(Be):me.push(Be),Ee=Be=>{Ae&&U.next(Be),fe++;let je=!1;(0,ee.Xf)(j(Be,Ze++)).subscribe((0,re.x)(U,V=>{Ve?.(V),Ae?ye(V):U.next(V)},()=>{je=!0},void 0,()=>{if(je)try{for(fe--;me.length&&fe<K;){const V=me.shift();we?(0,oe.f)(U,we,()=>Ee(V)):Ee(V)}Se()}catch(V){U.error(V)}}))};return pe.subscribe((0,re.x)(U,ye,()=>{et=!0,Se()})),()=>{Je?.()}}(K,Ve,pe,j)))}},5363:(st,be,k)=>{k.d(be,{Q:()=>oe});var g=k(9672),ee=k(4482),O=k(5403);function oe(re,de=0){return(0,ee.e)((ue,he)=>{ue.subscribe((0,O.x)(he,pe=>(0,g.f)(he,re,()=>he.next(pe),de),()=>(0,g.f)(he,re,()=>he.complete(),de),pe=>(0,g.f)(he,re,()=>he.error(pe),de)))})}},3099:(st,be,k)=>{k.d(be,{B:()=>re});var g=k(8421),ee=k(7579),O=k(2961),oe=k(4482);function re(ue={}){const{connector:he=(()=>new ee.x),resetOnError:pe=!0,resetOnComplete:U=!0,resetOnRefCountZero:j=!0}=ue;return K=>{let Ve,Ae,we,Je=0,me=!1,fe=!1;const Ze=()=>{Ae?.unsubscribe(),Ae=void 0},et=()=>{Ze(),Ve=we=void 0,me=fe=!1},Se=()=>{const ye=Ve;et(),ye?.unsubscribe()};return(0,oe.e)((ye,Ee)=>{Je++,!fe&&!me&&Ze();const Be=we=we??he();Ee.add(()=>{Je--,0===Je&&!fe&&!me&&(Ae=de(Se,j))}),Be.subscribe(Ee),!Ve&&Je>0&&(Ve=new O.Hp({next:je=>Be.next(je),error:je=>{fe=!0,Ze(),Ae=de(et,pe,je),Be.error(je)},complete:()=>{me=!0,Ze(),Ae=de(et,U),Be.complete()}}),(0,g.Xf)(ye).subscribe(Ve))})(K)}}function de(ue,he,...pe){if(!0===he)return void ue();if(!1===he)return;const U=new O.Hp({next:()=>{U.unsubscribe(),ue()}});return he(...pe).subscribe(U)}},9468:(st,be,k)=>{k.d(be,{R:()=>ee});var g=k(4482);function ee(O,oe=0){return(0,g.e)((re,de)=>{de.add(O.schedule(()=>re.subscribe(de),oe))})}},8505:(st,be,k)=>{k.d(be,{b:()=>re});var g=k(576),ee=k(4482),O=k(5403),oe=k(4671);function re(de,ue,he){const pe=(0,g.m)(de)||ue||he?{next:de,error:ue,complete:he}:de;return pe?(0,ee.e)((U,j)=>{var K;null===(K=pe.subscribe)||void 0===K||K.call(pe);let Ve=!0;U.subscribe((0,O.x)(j,Ae=>{var we;null===(we=pe.next)||void 0===we||we.call(pe,Ae),j.next(Ae)},()=>{var Ae;Ve=!1,null===(Ae=pe.complete)||void 0===Ae||Ae.call(pe),j.complete()},Ae=>{var we;Ve=!1,null===(we=pe.error)||void 0===we||we.call(pe,Ae),j.error(Ae)},()=>{var Ae,we;Ve&&(null===(Ae=pe.unsubscribe)||void 0===Ae||Ae.call(pe)),null===(we=pe.finalize)||void 0===we||we.call(pe)}))}):oe.y}},4408:(st,be,k)=>{k.d(be,{o:()=>re});var g=k(727);class ee extends g.w0{constructor(ue,he){super()}schedule(ue,he=0){return this}}const O={setInterval(de,ue,...he){const{delegate:pe}=O;return pe?.setInterval?pe.setInterval(de,ue,...he):setInterval(de,ue,...he)},clearInterval(de){const{delegate:ue}=O;return(ue?.clearInterval||clearInterval)(de)},delegate:void 0};var oe=k(8737);class re extends ee{constructor(ue,he){super(ue,he),this.scheduler=ue,this.work=he,this.pending=!1}schedule(ue,he=0){if(this.closed)return this;this.state=ue;const pe=this.id,U=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(U,pe,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(U,this.id,he),this}requestAsyncId(ue,he,pe=0){return O.setInterval(ue.flush.bind(ue,this),pe)}recycleAsyncId(ue,he,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return he;O.clearInterval(he)}execute(ue,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(ue,he);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,he){let U,pe=!1;try{this.work(ue)}catch(j){pe=!0,U=j||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),U}unsubscribe(){if(!this.closed){const{id:ue,scheduler:he}=this,{actions:pe}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(pe,this),null!=ue&&(this.id=this.recycleAsyncId(he,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,be,k)=>{k.d(be,{v:()=>O});var g=k(6063);class ee{constructor(re,de=ee.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,de)}}ee.now=g.l.now;class O extends ee{constructor(re,de=ee.now){super(re,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,ue){for(;re=de.shift();)re.unsubscribe();throw ue}}}},4986:(st,be,k)=>{k.d(be,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(st,be,k)=>{k.d(be,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(st,be,k)=>{k.d(be,{z:()=>g});const g={setTimeout(ee,O,...oe){const{delegate:re}=g;return re?.setTimeout?re.setTimeout(ee,O,...oe):setTimeout(ee,O,...oe)},clearTimeout(ee){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(st,be,k)=>{k.d(be,{h:()=>ee});const ee=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,be,k)=>{k.d(be,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,be,k)=>{k.d(be,{_6:()=>de,jO:()=>oe,yG:()=>re});var g=k(576);function O(ue){return ue[ue.length-1]}function oe(ue){return(0,g.m)(O(ue))?ue.pop():void 0}function re(ue){return function ee(ue){return ue&&(0,g.m)(ue.schedule)}(O(ue))?ue.pop():void 0}function de(ue,he){return"number"==typeof O(ue)?ue.pop():he}},8737:(st,be,k)=>{function g(ee,O){if(ee){const oe=ee.indexOf(O);0<=oe&&ee.splice(oe,1)}}k.d(be,{P:()=>g})},3888:(st,be,k)=>{function g(ee){const oe=ee(re=>{Error.call(re),re.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(be,{d:()=>g})},2806:(st,be,k)=>{k.d(be,{O:()=>oe,x:()=>O});var g=k(2416);let ee=null;function O(re){if(g.v.useDeprecatedSynchronousErrorHandling){const de=!ee;if(de&&(ee={errorThrown:!1,error:null}),re(),de){const{errorThrown:ue,error:he}=ee;if(ee=null,ue)throw he}}else re()}function oe(re){g.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(st,be,k)=>{function g(ee,O,oe,re=0,de=!1){const ue=O.schedule(function(){oe(),de?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(ue),!de)return ue}k.d(be,{f:()=>g})},4671:(st,be,k)=>{function g(ee){return ee}k.d(be,{y:()=>g})},1144:(st,be,k)=>{k.d(be,{z:()=>g});const g=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(st,be,k)=>{k.d(be,{D:()=>ee});var g=k(576);function ee(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(st,be,k)=>{function g(ee){return"function"==typeof ee}k.d(be,{m:()=>g})},3670:(st,be,k)=>{k.d(be,{c:()=>O});var g=k(8822),ee=k(576);function O(oe){return(0,ee.m)(oe[g.L])}},6495:(st,be,k)=>{k.d(be,{T:()=>O});var g=k(2202),ee=k(576);function O(oe){return(0,ee.m)(oe?.[g.h])}},8239:(st,be,k)=>{k.d(be,{t:()=>ee});var g=k(576);function ee(O){return(0,g.m)(O?.then)}},3260:(st,be,k)=>{k.d(be,{L:()=>oe,Q:()=>O});var g=k(655),ee=k(576);function O(re){return(0,g.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:he,done:pe}=yield(0,g.qq)(ue.read());if(pe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(he)}}finally{ue.releaseLock()}})}function oe(re){return(0,ee.m)(re?.getReader)}},4482:(st,be,k)=>{k.d(be,{A:()=>ee,e:()=>O});var g=k(576);function ee(oe){return(0,g.m)(oe?.lift)}function O(oe){return re=>{if(ee(re))return re.lift(function(de){try{return oe(de,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(st,be,k)=>{k.d(be,{U:()=>O,z:()=>ee});var g=k(4671);function ee(...oe){return O(oe)}function O(oe){return 0===oe.length?g.y:1===oe.length?oe[0]:function(de){return oe.reduce((ue,he)=>he(ue),de)}}},7849:(st,be,k)=>{k.d(be,{h:()=>O});var g=k(2416),ee=k(3410);function O(oe){ee.z.setTimeout(()=>{const{onUnhandledError:re}=g.v;if(!re)throw oe;re(oe)})}},4532:(st,be,k)=>{function g(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(be,{z:()=>g})},655:(st,be,k)=>{function oe(Z,X){var ie={};for(var te in Z)Object.prototype.hasOwnProperty.call(Z,te)&&X.indexOf(te)<0&&(ie[te]=Z[te]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(te=Object.getOwnPropertySymbols(Z);ke<te.length;ke++)X.indexOf(te[ke])<0&&Object.prototype.propertyIsEnumerable.call(Z,te[ke])&&(ie[te[ke]]=Z[te[ke]])}return ie}function he(Z,X,ie,te){return new(ie||(ie=Promise))(function(Oe,ct){function Bt(en){try{ze(te.next(en))}catch(bn){ct(bn)}}function Vt(en){try{ze(te.throw(en))}catch(bn){ct(bn)}}function ze(en){en.done?Oe(en.value):function ke(Oe){return Oe instanceof ie?Oe:new ie(function(ct){ct(Oe)})}(en.value).then(Bt,Vt)}ze((te=te.apply(Z,X||[])).next())})}function me(Z){return this instanceof me?(this.v=Z,this):new me(Z)}function fe(Z,X,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,te=ie.apply(Z,X||[]),Oe=[];return ke={},ct("next"),ct("throw"),ct("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ct(Ht){te[Ht]&&(ke[Ht]=function(Gt){return new Promise(function(vr,Rt){Oe.push([Ht,Gt,vr,Rt])>1||Bt(Ht,Gt)})})}function Bt(Ht,Gt){try{!function Vt(Ht){Ht.value instanceof me?Promise.resolve(Ht.value.v).then(ze,en):bn(Oe[0][2],Ht)}(te[Ht](Gt))}catch(vr){bn(Oe[0][3],vr)}}function ze(Ht){Bt("next",Ht)}function en(Ht){Bt("throw",Ht)}function bn(Ht,Gt){Ht(Gt),Oe.shift(),Oe.length&&Bt(Oe[0][0],Oe[0][1])}}function et(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,X=Z[Symbol.asyncIterator];return X?X.call(Z):(Z=function K(Z){var X="function"==typeof Symbol&&Symbol.iterator,ie=X&&Z[X],te=0;if(ie)return ie.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&te>=Z.length&&(Z=void 0),{value:Z&&Z[te++],done:!Z}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ie={},te("next"),te("throw"),te("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function te(Oe){ie[Oe]=Z[Oe]&&function(ct){return new Promise(function(Bt,Vt){!function ke(Oe,ct,Bt,Vt){Promise.resolve(Vt).then(function(ze){Oe({value:ze,done:Bt})},ct)}(Bt,Vt,(ct=Z[Oe](ct)).done,ct.value)})}}}k.d(be,{FC:()=>fe,KL:()=>et,_T:()=>oe,mG:()=>he,qq:()=>me})},4650:(st,be,k)=>{k.d(be,{$8M:()=>wu,$Z:()=>E0,AFp:()=>le,ALo:()=>ju,AaK:()=>he,CHM:()=>ru,CRH:()=>qd,CZH:()=>Ge,CqO:()=>Td,D6c:()=>QE,EJc:()=>cT,EpF:()=>dv,F4k:()=>hv,FYo:()=>Fe,FiY:()=>Me,G48:()=>qu,GfV:()=>Yn,Gpc:()=>j,JOm:()=>Ho,KtG:()=>iu,LFG:()=>hn,LSH:()=>Yl,Lbi:()=>aT,Lck:()=>nE,MMx:()=>e_,NdJ:()=>cI,OlP:()=>un,Oqu:()=>bv,PXZ:()=>pT,Q6J:()=>sf,QGY:()=>Fg,QP$:()=>bi,Qsj:()=>Ke,R0b:()=>Ii,RDi:()=>bp,Rgc:()=>Ua,SBq:()=>N,Sil:()=>Rn,Suo:()=>Rf,TTD:()=>qi,TgZ:()=>Fa,X6Q:()=>mT,XFs:()=>We,Xpm:()=>$,Xts:()=>Jl,Y36:()=>vd,YKP:()=>kd,YNc:()=>aI,Yjl:()=>Ot,Yz7:()=>Gt,Z0I:()=>Yo,ZZ4:()=>K_,_Bn:()=>Jv,_UZ:()=>af,_Vd:()=>p,_c5:()=>bT,_uU:()=>Cv,aQg:()=>Y_,c2e:()=>LE,cJS:()=>Rt,cg1:()=>UI,dDg:()=>se,dqk:()=>tn,eFA:()=>jn,ekj:()=>Ug,eoX:()=>Uf,f3M:()=>D,g9A:()=>kE,h0i:()=>Pd,hGG:()=>YE,hij:()=>il,iGM:()=>_E,ifc:()=>it,ip1:()=>PE,jDz:()=>rE,kL8:()=>Hg,lG2:()=>Gn,lcZ:()=>dE,lqb:()=>Ps,lri:()=>$a,n5z:()=>Ji,oAB:()=>tt,oxw:()=>df,q4F:()=>Li,qLn:()=>Uh,qOj:()=>Ag,qZA:()=>Vu,rWj:()=>Dm,sBO:()=>Wu,sIi:()=>Xc,s_b:()=>dm,soG:()=>P_,tb:()=>FE,tp0:()=>pt,uIk:()=>jr,vHH:()=>we,vpe:()=>fo,wAp:()=>mt,xp6:()=>g0,z2F:()=>mo,zSh:()=>rd,zs3:()=>Jn});var g=k(7579),ee=k(727),O=k(9751),oe=k(6451),re=k(3099);function de(i){for(let s in i)if(i[s]===de)return s;throw Error("Could not find renamed property on target object.")}function ue(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function he(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(he).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function pe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=de({__forward_ref__:de});function j(i){return i.__forward_ref__=j,i.toString=function(){return he(this())},i}function K(i){return Ve(i)?i():i}function Ve(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===j}class we extends Error{constructor(s,a){super(function Je(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function ye(i,s){throw new we(-201,!1)}function Vt(i,s){null==i&&function ze(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Gt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Rt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Jt(i){return Nr(i,Ci)||Nr(i,ci)}function Yo(i){return null!==Jt(i)}function Nr(i,s){return i.hasOwnProperty(s)?i[s]:null}function hs(i){return i&&(i.hasOwnProperty(Pr)||i.hasOwnProperty(vo))?i[Pr]:null}const Ci=de({\u0275prov:de}),Pr=de({\u0275inj:de}),ci=de({ngInjectableDef:de}),vo=de({ngInjectorDef:de});var We=(()=>((We=We||{})[We.Default=0]="Default",We[We.Host=1]="Host",We[We.Self=2]="Self",We[We.SkipSelf=4]="SkipSelf",We[We.Optional=8]="Optional",We))();let kr;function Tn(i){const s=kr;return kr=i,s}function li(i,s,a){const c=Jt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&We.Optional?null:void 0!==s?s:void ye(he(i))}function Sn(i){return{toString:i}.toString()}var Hn=(()=>((Hn=Hn||{})[Hn.OnPush=0]="OnPush",Hn[Hn.Default=1]="Default",Hn))(),it=(()=>{return(i=it||(it={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",it;var i})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_r={},yt=[],Hi=de({\u0275cmp:de}),zt=de({\u0275dir:de}),di=de({\u0275pipe:de}),$t=de({\u0275mod:de}),q=de({\u0275fac:de}),B=de({__NG_ELEMENT_ID__:de});let L=0;function $(i){return Sn(()=>{const a=!0===i.standalone,c={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Hn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||yt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||it.Emulated,id:"c"+L++,styles:i.styles||yt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return l.inputs=qt(i.inputs,c),l.outputs=qt(i.outputs),v&&v.forEach(I=>I(l)),l.directiveDefs=f?()=>("function"==typeof f?f():f).map(De).filter(Ue):null,l.pipeDefs=f?()=>("function"==typeof f?f():f).map(On).filter(Ue):null,l})}function De(i){return Tt(i)||fn(i)}function Ue(i){return null!==i}function tt(i){return Sn(()=>({type:i.type,bootstrap:i.bootstrap||yt,declarations:i.declarations||yt,imports:i.imports||yt,exports:i.exports||yt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function qt(i,s){if(null==i)return _r;const a={};for(const c in i)if(i.hasOwnProperty(c)){let l=i[c],f=l;Array.isArray(l)&&(f=l[1],l=l[0]),a[l]=c,s&&(s[l]=f)}return a}const Gn=$;function Ot(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Tt(i){return i[Hi]||null}function fn(i){return i[zt]||null}function On(i){return i[di]||null}function bi(i){const s=Tt(i)||fn(i)||On(i);return null!==s&&s.standalone}function wr(i,s){const a=i[$t]||null;if(!a&&!0===s)throw new Error(`Type ${he(i)} does not have '\u0275mod' property.`);return a}function nr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ir(i){return Array.isArray(i)&&!0===i[1]}function qa(i){return 0!=(8&i.flags)}function Jo(i){return 2==(2&i.flags)}function oc(i){return 1==(1&i.flags)}function fr(i){return null!==i.template}function dh(i){return 0!=(256&i[2])}function Si(i,s){return i.hasOwnProperty(q)?i[q]:null}class zi{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function qi(){return qs}function qs(i){return i.type.prototype.ngOnChanges&&(i.setInput=Za),Xo}function Xo(){const i=ph(this),s=i?.current;if(s){const a=i.previous;if(a===_r)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Za(i,s,a,c){const l=ph(i)||function ea(i,s){return i[dc]=s}(i,{previous:_r,current:null}),f=l.current||(l.current={}),v=l.previous,I=this.declaredInputs[a],E=v[I];f[I]=new zi(E&&E.currentValue,s,v===_r),i[c]=s}qi.ngInherit=!0;const dc="__ngSimpleChanges__";function ph(i){return i[dc]||null}function _n(i){for(;Array.isArray(i);)i=i[0];return i}function Kr(i,s){return _n(s[i])}function Er(i,s){return _n(s[i.index])}function Io(i,s){return i.data[s]}function Ut(i,s){const a=s[i];return nr(a)?a:a[0]}function Ws(i){return 64==(64&i[2])}function pi(i,s){return null==s?null:i[s]}function Xa(i){i[18]=0}function vn(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const vt={lFrame:Ic(null),bindingsEnabled:!0};function Ki(){return vt.bindingsEnabled}function Ce(){return vt.lFrame.lView}function Pt(){return vt.lFrame.tView}function ru(i){return vt.lFrame.contextLView=i,i[8]}function iu(i){return vt.lFrame.contextLView=null,i}function wn(){let i=su();for(;null!==i&&64===i.type;)i=i.parent;return i}function su(){return vt.lFrame.currentTNode}function Yr(i,s){const a=vt.lFrame;a.currentTNode=i,a.isParent=s}function na(){return vt.lFrame.isParent}function Zs(){return vt.lFrame.bindingIndex++}function yp(i,s){const a=vt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ou(s)}function ou(i){vt.lFrame.currentDirectiveIndex=i}function vc(){return vt.lFrame.currentQueryIndex}function aa(i){vt.lFrame.currentQueryIndex=i}function _c(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function au(i,s,a){if(a&We.SkipSelf){let l=s,f=i;for(;!(l=l.parent,null!==l||a&We.Host||(l=_c(f),null===l||(f=f[15],10&l.type))););if(null===l)return!1;s=l,i=f}const c=vt.lFrame=wc();return c.currentTNode=s,c.lView=i,!0}function uu(i){const s=wc(),a=i[1];vt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function wc(){const i=vt.lFrame,s=null===i?null:i.child;return null===s?Ic(i):s}function Ic(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Ec(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Nl=Ec;function Ks(){const i=Ec();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wn(){return vt.lFrame.selectedIndex}function Lr(i){vt.lFrame.selectedIndex=i}function dn(){const i=vt.lFrame;return Io(i.tView,i.selectedIndex)}function bc(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function Do(i,s,a){bo(i,s,3,a)}function Co(i,s,a,c){(3&i[2])===a&&bo(i,s,a,c)}function kl(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function bo(i,s,a,c){const f=c??-1,v=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<v;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<f||-1==f)&&(Fl(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Fl(i,s,a,c){const l=a[c]<0,f=a[c+1],I=i[l?-a[c]:a[c]];if(l){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(I)}finally{}}}else try{f.call(I)}finally{}}class ws{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function So(i,s,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const f=a[c++],v=a[c++],I=a[c++];i.setAttribute(s,v,I,f)}else{const f=l,v=a[++c];pu(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),c++}}return c}function Js(i){return 3===i||4===i||6===i}function pu(i){return 64===i.charCodeAt(0)}function ua(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const l=s[c];"number"==typeof l?a=l:0===a||Vl(i,a,l,null,-1===a||2===a?s[++c]:null)}}return i}function Vl(i,s,a,c,l){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const I=i[f++];if("number"==typeof I){if(I===s){v=-1;break}if(I>s){v=f-1;break}}}for(;f<i.length;){const I=i[f];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==l&&(i[f+1]=l));if(c===i[f+1])return void(i[f+2]=l)}f++,null!==c&&f++,null!==l&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==l&&i.splice(f++,0,l)}function Ul(i){return-1!==i}function rr(i){return 32767&i}function la(i,s){let a=function ca(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let xi=!0;function da(i){const s=xi;return xi=i,s}let An=0;const gi={};function Xs(i,s){const a=mu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,fa(c.data,i),fa(s,null),fa(c.blueprint,null));const l=yu(i,s),f=i.injectorIndex;if(Ul(l)){const v=rr(l),I=la(l,s),E=I[1].data;for(let T=0;T<8;T++)s[f+T]=I[v+T]|E[v+T]}return s[f+8]=l,f}function fa(i,s){i.push(0,0,0,0,0,0,0,0,s)}function mu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function yu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=s;for(;null!==l;){if(c=Mo(l),null===c)return-1;if(a++,l=l[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Is(i,s,a){!function gu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(B)&&(c=a[B]),null==c&&(c=a[B]=An++);const l=255&c;s.data[i+(l>>5)]|=1<<l}(i,s,a)}function Es(i,s,a){if(a&We.Optional||void 0!==i)return i;ye()}function Sc(i,s,a,c){if(a&We.Optional&&void 0===c&&(c=null),0==(a&(We.Self|We.Host))){const l=i[9],f=Tn(void 0);try{return l?l.get(s,c,a&We.Optional):li(s,c,a&We.Optional)}finally{Tn(f)}}return Es(c,0,a)}function eo(i,s,a,c=We.Default,l){if(null!==i){if(1024&s[2]){const v=function xo(i,s,a,c,l){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const I=pa(f,v,a,c|We.Self,gi);if(I!==gi)return I;let E=f.parent;if(!E){const T=v[21];if(T){const M=T.get(a,gi,c);if(M!==gi)return M}E=Mo(v),v=v[15]}f=E}return l}(i,s,a,c,gi);if(v!==gi)return v}const f=pa(i,s,a,c,gi);if(f!==gi)return f}return Sc(s,a,c,l)}function pa(i,s,a,c,l){const f=function Ac(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(B)?i[B]:void 0;return"number"==typeof s?s>=0?255&s:xc:s}(a);if("function"==typeof f){if(!au(s,i,c))return c&We.Host?Es(l,0,c):Sc(s,a,c,l);try{const v=f(c);if(null!=v||c&We.Optional)return v;ye()}finally{Nl()}}else if("number"==typeof f){let v=null,I=mu(i,s),E=-1,T=c&We.Host?s[16][6]:null;for((-1===I||c&We.SkipSelf)&&(E=-1===I?yu(i,s):s[I+8],-1!==E&&ga(c,!1)?(v=s[1],I=rr(E),s=la(E,s)):I=-1);-1!==I;){const M=s[1];if(vu(f,I,M.data)){const P=$l(I,s,a,v,c,T);if(P!==gi)return P}E=s[I+8],-1!==E&&ga(c,s[1].data[I+8]===T)&&vu(f,I,s)?(v=M,I=rr(E),s=la(E,s)):I=-1}}return l}function $l(i,s,a,c,l,f){const v=s[1],I=v.data[i+8],M=Ao(I,v,a,null==c?Jo(I)&&xi:c!=v&&0!=(3&I.type),l&We.Host&&f===I);return null!==M?Qi(s,v,M,I):gi}function Ao(i,s,a,c,l){const f=i.providerIndexes,v=s.data,I=1048575&f,E=i.directiveStart,M=f>>20,H=l?I+M:i.directiveEnd;for(let Q=c?I:I+M;Q<H;Q++){const _e=v[Q];if(Q<E&&a===_e||Q>=E&&_e.type===a)return Q}if(l){const Q=v[E];if(Q&&fr(Q)&&Q.type===a)return E}return null}function Qi(i,s,a,c){let l=i[a];const f=s.data;if(function Qs(i){return i instanceof ws}(l)){const v=l;v.resolving&&function Ze(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new we(-200,`Circular dependency in DI detected for ${i}${a}`)}(function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(f[a]));const I=da(v.canSeeViewProviders);v.resolving=!0;const E=v.injectImpl?Tn(v.injectImpl):null;au(i,c,We.Default);try{l=i[a]=v.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Pl(i,s,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:f}=s.type.prototype;if(c){const v=qs(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}l&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,l),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==E&&Tn(E),da(I),v.resolving=!1,Nl()}}return l}function vu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ga(i,s){return!(i&We.Self||i&We.Host&&s)}class to{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return eo(this._tNode,this._lView,s,c,a)}}function xc(){return new to(wn(),Ce())}function Ji(i){return Sn(()=>{const s=i.prototype.constructor,a=s[q]||_u(s),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const f=l[q]||_u(l);if(f&&f!==a)return f;l=Object.getPrototypeOf(l)}return f=>new f})}function _u(i){return Ve(i)?()=>{const s=_u(K(i));return s&&s()}:Si(i)}function Mo(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function wu(i){return function jl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const f=a[l];if(Js(f))break;if(0===f)l+=2;else if("number"==typeof f)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(f===s)return a[l+1];l+=2}}}return null}(wn(),i)}const Ds="__parameters__";function Oo(i,s,a){return Sn(()=>{const c=function Iu(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(s);function l(...f){if(this instanceof l)return c.apply(this,f),this;const v=new l(...f);return I.annotation=v,I;function I(E,T,M){const P=E.hasOwnProperty(Ds)?E[Ds]:Object.defineProperty(E,Ds,{value:[]})[Ds];for(;P.length<=M;)P.push(null);return(P[M]=P[M]||[]).push(v),E}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}class un{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Gt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),gn(c,s)):s!==i&&s.push(c)}return s}function yi(i,s){i.forEach(a=>Array.isArray(a)?yi(a,s):s(a))}function ya(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Dr(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function rt(i,s,a){let c=Ts(i,s);return c>=0?i[1|c]=a:(c=~c,function Rc(i,s,a,c){let l=i.length;if(l==s)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>s;)i[l]=i[l-2],l--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function _a(i,s){const a=Ts(i,s);if(a>=0)return i[1|a]}function Ts(i,s){return function ko(i,s,a){let c=0,l=i.length>>a;for(;l!==c;){const f=c+(l-c>>1),v=i[f<<a];if(s===v)return f<<a;v>s?l=f:c=f+1}return~(l<<a)}(i,s,1)}const vi={},Pc="__NG_DI_FLAG__",Lo="ngTempTokenPath",Xi=/\n/gm,pr="__source";let xs;function es(i){const s=xs;return xs=i,s}function Vn(i,s=We.Default){if(void 0===xs)throw new we(-203,!1);return null===xs?li(i,void 0,s):xs.get(i,s&We.Optional?null:void 0,s)}function hn(i,s=We.Default){return(function $i(){return kr}()||Vn)(K(i),s)}function D(i,s=We.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),hn(i,s)}function b(i){const s=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new we(900,!1);let l,f=We.Default;for(let v=0;v<c.length;v++){const I=c[v],E=F(I);"number"==typeof E?-1===E?l=I.token:f|=E:l=I}s.push(hn(l,f))}else s.push(hn(c))}return s}function x(i,s){return i[Pc]=s,i.prototype[Pc]=s,i}function F(i){return i[Pc]}const Me=x(Oo("Optional"),8),pt=x(Oo("SkipSelf"),4);let bh;function bp(i){bh=i}class ql{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Oi(i){return i instanceof ql?i.changingThisBreaksApplicationSecurity:i}const cy=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var xn=(()=>((xn=xn||{})[xn.NONE=0]="NONE",xn[xn.HTML=1]="HTML",xn[xn.STYLE=2]="STYLE",xn[xn.SCRIPT=3]="SCRIPT",xn[xn.URL=4]="URL",xn[xn.RESOURCE_URL=5]="RESOURCE_URL",xn))();function Yl(i){const s=function Bc(){const i=Ce();return i&&i[12]}();return s?s.sanitize(xn.URL,i)||"":function Bo(i,s){const a=function Sh(i){return i instanceof ql&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Oi(i):function ba(i){return(i=String(i)).match(cy)?i:"unsafe:"+i}(me(i))}const Jl=new un("ENVIRONMENT_INITIALIZER"),Xl=new un("INJECTOR",-1),ed=new un("INJECTOR_DEF_TYPES");class Ph{get(s,a=vi){if(a===vi){const c=new Error(`NullInjectorError: No provider for ${he(s)}!`);throw c.name="NullInjectorError",c}return a}}function fy(...i){return{\u0275providers:td(0,i)}}function td(i,...s){const a=[],c=new Set;let l;return yi(s,f=>{const v=f;Cr(v,a,[],c)&&(l||(l=[]),l.push(v))}),void 0!==l&&Fp(l,a),a}function Fp(i,s){for(let a=0;a<i.length;a++){const{providers:l}=i[a];yi(l,f=>{s.push(f)})}}function Cr(i,s,a,c){if(!(i=K(i)))return!1;let l=null,f=hs(i);const v=!f&&Tt(i);if(f||v){if(v&&!v.standalone)return!1;l=i}else{const E=i.ngModule;if(f=hs(E),!f)return!1;l=E}const I=c.has(l);if(v){if(I)return!1;if(c.add(l),v.dependencies){const E="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of E)Cr(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let T;c.add(l);try{yi(f.imports,M=>{Cr(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&Fp(T,s)}if(!I){const T=Si(l)||(()=>new l);s.push({provide:l,useFactory:T,deps:yt},{provide:ed,useValue:l,multi:!0},{provide:Jl,useValue:()=>hn(l),multi:!0})}const E=f.providers;null==E||I||yi(E,M=>{s.push(M)})}}return l!==i&&void 0!==i.providers}const kh=de({provide:String,useValue:de});function jc(i){return null!==i&&"object"==typeof i&&kh in i}function Fi(i){return"function"==typeof i}const rd=new un("Set Injector scope."),ns={},$o={};let id;function sd(){return void 0===id&&(id=new Ph),id}class Ps{}class od extends Ps{constructor(s,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Au(s,v=>this.processProvider(v)),this.records.set(Xl,Xr(void 0,this)),l.has("environment")&&this.records.set(Ps,Xr(void 0,this));const f=this.records.get(rd);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(ed.multi,yt,We.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=es(this),c=Tn(void 0);try{return s()}finally{es(a),Tn(c)}}get(s,a=vi,c=We.Default){this.assertNotDestroyed();const l=es(this),f=Tn(void 0);try{if(!(c&We.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function Vp(i){return"function"==typeof i||"object"==typeof i&&i instanceof un}(s)&&Jt(s);I=E&&this.injectableDefInScope(E)?Xr(cr(s),ns):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&We.Self?sd():this.parent).get(s,a=c&We.Optional&&a===vi?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Lo]=v[Lo]||[]).unshift(he(s)),l)throw v;return function Y(i,s,a,c){const l=i[Lo];throw s[pr]&&l.unshift(s[pr]),i.message=function ne(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=he(s);if(Array.isArray(s))l=s.map(he).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let I=s[v];f.push(v+":"+("string"==typeof I?JSON.stringify(I):he(I)))}l=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Xi,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Lo]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{Tn(f),es(l)}}resolveInjectorInitializers(){const s=es(this),a=Tn(void 0);try{const c=this.get(Jl.multi,yt,We.Self);for(const l of c)l()}finally{es(s),Tn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(he(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(s){let a=Fi(s=K(s))?s:K(s&&s.provide);const c=function $c(i){return jc(i)?Xr(void 0,i.useValue):Xr(ud(i),ns)}(s);if(Fi(s)||!0!==s.multi)this.records.get(a);else{let l=this.records.get(a);l||(l=Xr(void 0,ns,!0),l.factory=()=>b(l.multi),this.records.set(a,l)),a=s,l.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===ns&&(a.value=$o,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Lp(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function cr(i){const s=Jt(i),a=null!==s?s.factory:Si(i);if(null!==a)return a;if(i instanceof un)throw new we(204,!1);if(i instanceof Function)return function ad(i){const s=i.length;if(s>0)throw function Cs(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new we(204,!1);const a=function hr(i){const s=i&&(i[Ci]||i[ci]);if(s){const a=function Or(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new we(204,!1)}function ud(i,s,a){let c;if(Fi(i)){const l=K(i);return Si(l)||cr(l)}if(jc(i))c=()=>K(i.useValue);else if(function ki(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...b(i.deps||[]));else if(function Su(i){return!(!i||!i.useExisting)}(i))c=()=>hn(K(i.useExisting));else{const l=K(i&&(i.useClass||i.provide));if(!function oo(i){return!!i.deps}(i))return Si(l)||cr(l);c=()=>new l(...b(i.deps))}return c}function Xr(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Lh(i){return!!i.\u0275providers}function Au(i,s){for(const a of i)Array.isArray(a)?Au(a,s):Lh(a)?Au(a.\u0275providers,s):s(a)}class Vh{}class h{resolveComponentFactory(s){throw function Bp(i){const s=Error(`No component factory found for ${he(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let p=(()=>{class i{}return i.NULL=new h,i})();function _(){return S(wn(),Ce())}function S(i,s){return new N(Er(i,s))}let N=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=_,i})();function W(i){return i instanceof N?i.nativeElement:i}class Fe{}let Ke=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function gt(){const i=Ce(),a=Ut(wn().index,i);return(nr(a)?a:i)[11]}(),i})(),at=(()=>{class i{}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:()=>null}),i})();class Yn{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Li=new Yn("14.2.2"),xu={};function yy(i){return i.ngOriginalError}class Uh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&yy(s);for(;a&&yy(a);)a=yy(a);return a||null}}const vy=new Map;let LD=0;const Wp="__ngContext__";function br(i,s){nr(s)?(i[Wp]=s[20],function UD(i){vy.set(i[20],i)}(s)):i[Wp]=s}function Ma(i){return i instanceof Function?i():i}var Ho=(()=>((Ho=Ho||{})[Ho.Important=1]="Important",Ho[Ho.DashCase=2]="DashCase",Ho))();function Dy(i,s){return undefined(i,s)}function gd(i){const s=i[3];return Ir(s)?s[3]:s}function Yp(i){return Yw(i[13])}function Qp(i){return Yw(i[4])}function Yw(i){for(;null!==i&&!Ir(i);)i=i[4];return i}function md(i,s,a,c,l){if(null!=c){let f,v=!1;Ir(c)?f=c:nr(c)&&(v=!0,c=c[0]);const I=_n(c);0===i&&null!==a?null==l?r0(s,a,I):Go(s,a,I,l||null,!0):1===i&&null!==a?Go(s,a,I,l||null,!0):2===i?function XD(i,s,a){const c=eg(i,s);c&&function JD(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,v):3===i&&s.destroyNode(I),null!=f&&function CA(i,s,a,c,l){const f=a[7];f!==_n(a)&&md(s,i,c,f,l);for(let I=10;I<a.length;I++){const E=a[I];Wc(E[1],E,i,s,c,f)}}(s,i,f,a,l)}}function Jp(i,s,a){return i.createElement(s,a)}function e0(i,s){const a=i[9],c=a.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,vn(l,-1)),a.splice(c,1)}function Sy(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const l=c[17];null!==l&&l!==i&&e0(l,c),s>0&&(i[a-1][4]=c[4]);const f=Dr(i,10+s);!function Ty(i,s){Wc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=f[19];null!==v&&v.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function $h(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Wc(i,s,a,3,null,null),function EA(i){let s=i[13];if(!s)return Xp(i[1],i);for(;s;){let a=null;if(nr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)nr(s)&&Xp(s[1],s),s=s[3];null===s&&(s=i),nr(s)&&Xp(s[1],s),a=s&&s[4]}s=a}}(s)}}function Xp(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function xy(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=s[a[c]];if(!(l instanceof ws)){const f=a[c+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const I=l[f[v]],E=f[v+1];try{E.call(I)}finally{}}else try{f.call(l)}finally{}}}}(i,s),function Ay(i,s){const a=i.cleanup,c=s[7];let l=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],I="function"==typeof v?v(s):_n(s[v]),E=c[l=a[f+2]],T=a[f+3];"boolean"==typeof T?I.removeEventListener(a[f],E,T):T>=0?c[l=T]():c[l=-T].unsubscribe(),f+=2}else{const v=c[l=a[f+1]];a[f].call(v)}if(null!==c){for(let f=l+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Ir(s[3])){a!==s[3]&&e0(a,s);const c=s[19];null!==c&&c.detachView(i)}!function BD(i){vy.delete(i[20])}(s)}}function t0(i,s,a){return function n0(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const l=i.data[c.directiveStart].encapsulation;if(l===it.None||l===it.Emulated)return null}return Er(c,a)}(i,s.parent,a)}function Go(i,s,a,c,l){i.insertBefore(s,a,c,l)}function r0(i,s,a){i.appendChild(s,a)}function s0(i,s,a,c,l){null!==c?Go(i,s,a,c,l):r0(i,s,a)}function eg(i,s){return i.parentNode(s)}let My=function a0(i,s,a){return 40&i.type?Er(i,a):null};function ng(i,s,a,c){const l=t0(i,c,s),f=s[11],I=function Qn(i,s,a){return My(i,s,a)}(c.parent||s[6],c,s);if(null!=l)if(Array.isArray(a))for(let E=0;E<a.length;E++)s0(f,l,a[E],I,!1);else s0(f,l,a,I,!1)}function rg(i,s){if(null!==s){const a=s.type;if(3&a)return Er(s,i);if(4&a)return u0(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return rg(i,c);{const l=i[s.index];return Ir(l)?u0(-1,l):_n(l)}}if(32&a)return Dy(s,i)()||_n(i[s.index]);{const c=Ry(i,s);return null!==c?Array.isArray(c)?c[0]:rg(gd(i[16]),c):rg(i,s.next)}}return null}function Ry(i,s){return null!==s?i[16][6].projection[s.projection]:null}function u0(i,s){const a=10+i+1;if(a<s.length){const c=s[a],l=c[1].firstChild;if(null!==l)return rg(c,l)}return s[7]}function Ny(i,s,a,c,l,f,v){for(;null!=a;){const I=c[a.index],E=a.type;if(v&&0===s&&(I&&br(_n(I),c),a.flags|=4),64!=(64&a.flags))if(8&E)Ny(i,s,a.child,c,l,f,!1),md(s,i,l,I,f);else if(32&E){const T=Dy(a,c);let M;for(;M=T();)md(s,i,l,M,f);md(s,i,l,I,f)}else 16&E?Hh(i,s,c,a,l,f):md(s,i,l,I,f);a=v?a.projectionNext:a.next}}function Wc(i,s,a,c,l,f){Ny(a,c,i.firstChild,s,l,f,!1)}function Hh(i,s,a,c,l,f){const v=a[16],E=v[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)md(s,i,l,E[T],f);else Ny(i,s,E,v[3],l,f,!0)}function Zc(i,s,a){i.setAttribute(s,"style",a)}function Gh(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function eC(i,s,a){let c=i.length;for(;;){const l=i.indexOf(s,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const f=s.length;if(l+f===c||i.charCodeAt(l+f)<=32)return l}a=l+1}}const Oy="ng-template";function Py(i,s,a){let c=0;for(;c<i.length;){let l=i[c++];if(a&&"class"===l){if(l=i[c],-1!==eC(l.toLowerCase(),s,0))return!0}else if(1===l){for(;c<i.length&&"string"==typeof(l=i[c++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function d0(i){return 4===i.type&&i.value!==Oy}function nC(i,s,a){return s===(4!==i.type||a?i.value:Oy)}function rC(i,s,a){let c=4;const l=i.attrs||[],f=function bA(i){for(let s=0;s<i.length;s++)if(Js(i[s]))return s;return i.length}(l);let v=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!v)if(4&c){if(c=2|1&c,""!==E&&!nC(i,E,a)||""===E&&1===s.length){if(ks(c))return!1;v=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!Py(i.attrs,T,a)){if(ks(c))return!1;v=!0}continue}const P=iC(8&c?"class":E,l,d0(i),a);if(-1===P){if(ks(c))return!1;v=!0;continue}if(""!==T){let H;H=P>f?"":l[P+1].toLowerCase();const Q=8&c?H:null;if(Q&&-1!==eC(Q,T,0)||2&c&&T!==H){if(ks(c))return!1;v=!0}}}}else{if(!v&&!ks(c)&&!ks(E))return!1;if(v&&ks(E))continue;v=!1,c=E|1&c}}return ks(c)||v}function ks(i){return 0==(1&i)}function iC(i,s,a,c){if(null===s)return-1;let l=0;if(c||!a){let f=!1;for(;l<s.length;){const v=s[l];if(v===i)return l;if(3===v||6===v)f=!0;else{if(1===v||2===v){let I=s[++l];for(;"string"==typeof I;)I=s[++l];continue}if(4===v)break;if(0===v){l+=4;continue}}l+=f?1:2}return-1}return function h0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function sC(i,s,a=!1){for(let c=0;c<s.length;c++)if(rC(i,s[c],a))return!0;return!1}function f0(i,s){return i?":not("+s.trim()+")":s}function p0(i){let s=i[0],a=1,c=2,l="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];l+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?l+="."+v:4&c&&(l+=" "+v);else""!==l&&!ks(v)&&(s+=f0(f,l),l=""),c=v,f=f||!ks(c);a++}return""!==l&&(s+=f0(f,l)),s}const At={};function g0(i){m0(Pt(),Ce(),Wn()+i,!1)}function m0(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Do(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Co(s,f,0,a)}Lr(a)}function Fy(i,s=null,a=null,c){const l=og(i,s,a,c);return l.resolveInjectorInitializers(),l}function og(i,s=null,a=null,c,l=new Set){const f=[a||yt,fy(i)];return c=c||("object"==typeof i?void 0:he(i)),new od(f,s||sd(),c||null,l)}let Jn=(()=>{class i{static create(a,c){if(Array.isArray(a))return Fy({name:""},c,a,"");{const l=a.name??"";return Fy({name:l},a.parent,a.providers,l)}}}return i.THROW_IF_NOT_FOUND=vi,i.NULL=new Ph,i.\u0275prov=Gt({token:i,providedIn:"any",factory:()=>hn(Xl)}),i.__NG_ELEMENT_ID__=-1,i})();function vd(i,s=We.Default){const a=Ce();return null===a?hn(i,s):eo(wn(),a,K(i),s)}function E0(){throw new Error("invalid")}function qh(i,s){return i<<17|s<<2}function uo(i){return i>>17&32767}function By(i){return 2|i}function Un(i){return(131068&i)>>2}function _d(i,s){return-131069&i|s<<2}function Wh(i){return 1|i}function N0(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const l=a[c],f=a[c+1];if(-1!==f){const v=i.data[f];aa(l),v.contentQueries(2,s[f],f)}}}function Eg(i,s,a,c,l,f,v,I,E,T,M){const P=s.blueprint.slice();return P[0]=l,P[2]=76|c,(null!==M||i&&1024&i[2])&&(P[2]|=1024),Xa(P),P[3]=P[15]=i,P[8]=a,P[10]=v||i&&i[10],P[11]=I||i&&i[11],P[12]=E||i&&i[12]||null,P[9]=T||i&&i[9]||null,P[6]=f,P[20]=function VD(){return LD++}(),P[21]=M,P[16]=2==s.type?i[16]:P,P}function wd(i,s,a,c,l){let f=i.data[s];if(null===f)f=function Ky(i,s,a,c,l){const f=su(),v=na(),E=i.data[s]=function F0(i,s,a,c,l,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,c,l);return null===i.firstChild&&(i.firstChild=E),null!==f&&(v?null==f.child&&null!==E.parent&&(f.child=E):null===f.next&&(f.next=E)),E}(i,s,a,c,l),function mp(){return vt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=c,f.attrs=l;const v=function Eo(){const i=vt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return Yr(f,!0),f}function Id(i,s,a,c){if(0===a)return-1;const l=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return l}function Yy(i,s,a){uu(s);try{const c=i.viewQuery;null!==c&&z0(1,c,a);const l=i.template;null!==l&&Qy(i,s,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&N0(i,s),i.staticViewQueries&&z0(2,i.viewQuery,a);const f=i.components;null!==f&&function xC(i,s){for(let a=0;a<s.length;a++)H0(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,Ks()}}function Yc(i,s,a,c){const l=s[2];if(128!=(128&l)){uu(s);try{Xa(s),function mc(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Qy(i,s,a,2,c);const v=3==(3&l);if(v){const T=i.preOrderCheckHooks;null!==T&&Do(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Co(s,T,0,null),kl(s,0)}if(function kC(i){for(let s=Yp(i);null!==s;s=Qp(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const l=a[c],f=l[3];0==(512&l[2])&&vn(f,1),l[2]|=512}}}(s),function WA(i){for(let s=Yp(i);null!==s;s=Qp(s))for(let a=10;a<s.length;a++){const c=s[a],l=c[1];Ws(c)&&Yc(l,c,l.template,c[8])}}(s),null!==i.contentQueries&&N0(i,s),v){const T=i.contentCheckHooks;null!==T&&Do(s,T)}else{const T=i.contentHooks;null!==T&&Co(s,T,1),kl(s,1)}!function SC(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Lr(~l);else{const f=l,v=a[++c],I=a[++c];yp(v,f),I(2,s[f])}}}finally{Lr(-1)}}(i,s);const I=i.components;null!==I&&function AC(i,s){for(let a=0;a<s.length;a++)$0(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&z0(2,E,c),v){const T=i.viewCheckHooks;null!==T&&Do(s,T)}else{const T=i.viewHooks;null!==T&&Co(s,T,2),kl(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,vn(s[3],-1))}finally{Ks()}}}function Qy(i,s,a,c,l){const f=Wn(),v=2&c;try{Lr(-1),v&&s.length>22&&m0(i,s,22,!1),a(c,l)}finally{Lr(f)}}function Yh(i,s,a){!Ki()||(function sv(i,s,a,c){const l=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Xs(a,s),br(c,s);const v=a.initialInputs;for(let I=l;I<f;I++){const E=i.data[I],T=fr(E);T&&GA(s,a,E);const M=Qi(s,i,I,a);br(M,s),null!==v&&zA(0,I-l,M,E,0,v),T&&(Ut(a.index,s)[8]=M)}}(i,s,a,Er(a,s)),128==(128&a.flags)&&function jA(i,s,a){const c=a.directiveStart,l=a.directiveEnd,f=a.index,v=function yc(){return vt.lFrame.currentDirectiveIndex}();try{Lr(f);for(let I=c;I<l;I++){const E=i.data[I],T=s[I];ou(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&Cg(E,T)}}finally{Lr(-1),ou(v)}}(i,s,a))}function Xy(i,s,a=Er){const c=s.localNames;if(null!==c){let l=s.index+1;for(let f=0;f<c.length;f+=2){const v=c[f+1],I=-1===v?a(s,i):i[v];i[l++]=I}}}function O0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=ev(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function ev(i,s,a,c,l,f,v,I,E,T){const M=22+c,P=M+l,H=function P0(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:At);return a}(M,P),Q="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:I,declTNode:s,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:E,consts:Q,incompleteFirstPass:!1}}function tv(i,s,a,c){const l=q0(s);null===a?l.push(c):(l.push(a),i.firstCreatePass&&ov(i).push(c,l.length-1))}function RC(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const l=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,l):a[c]=[s,l]}return a}function L0(i,s){const c=s.directiveEnd,l=i.data,f=s.attrs,v=[];let I=null,E=null;for(let T=s.directiveStart;T<c;T++){const M=l[T],P=M.inputs,H=null===f||d0(s)?null:qA(P,f);v.push(H),I=RC(P,T,I),E=RC(M.outputs,T,E)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=16),I.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=I,s.outputs=E}function Dg(i,s){const a=Ut(s,i);16&a[2]||(a[2]|=32)}function nv(i,s,a,c){let l=!1;if(Ki()){const f=function $A(i,s,a){const c=i.directiveRegistry;let l=null;if(c)for(let f=0;f<c.length;f++){const v=c[f];sC(a,v.selectors,!1)&&(l||(l=[]),Is(Xs(a,s),i,v.type),fr(v)?(U0(i,a),l.unshift(v)):l.push(v))}return l}(i,s,a),v=null===c?null:{"":-1};if(null!==f){l=!0,B0(a,i.data.length,f.length);for(let M=0;M<f.length;M++){const P=f[M];P.providersResolver&&P.providersResolver(P)}let I=!1,E=!1,T=Id(i,s,f.length,null);for(let M=0;M<f.length;M++){const P=f[M];a.mergedAttrs=ua(a.mergedAttrs,P.hostAttrs),OC(i,a,s,T,P),NC(T,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const H=P.type.prototype;!I&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!E&&(H.ngOnChanges||H.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),T++}L0(i,a)}v&&function HA(i,s,a){if(s){const c=i.localNames=[];for(let l=0;l<s.length;l+=2){const f=a[s[l+1]];if(null==f)throw new we(-301,!1);c.push(s[l],f)}}}(a,c,v)}return a.mergedAttrs=ua(a.mergedAttrs,a.attrs),l}function rv(i,s,a,c,l,f){const v=f.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const E=~s.index;(function iv(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(I)!=E&&I.push(E),I.push(c,l,v)}}function Cg(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function U0(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function NC(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;fr(s)&&(a[""]=i)}}function B0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function OC(i,s,a,c,l){i.data[c]=l;const f=l.factory||(l.factory=Si(l.type)),v=new ws(f,fr(l),vd);i.blueprint[c]=v,a[c]=v,rv(i,s,0,c,Id(i,a,l.hostVars,At),l)}function GA(i,s,a){const c=Er(s,i),l=O0(a),f=i[10],v=Qh(i,Eg(i,l,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=v}function zo(i,s,a,c,l,f){const v=Er(i,s);!function j0(i,s,a,c,l,f,v){if(null==f)i.removeAttribute(s,l,a);else{const I=null==v?me(f):v(f,c||"",l);i.setAttribute(s,l,I,a)}}(s[11],v,f,i.value,a,c,l)}function zA(i,s,a,c,l,f){const v=f[s];if(null!==v){const I=c.setInput;for(let E=0;E<v.length;){const T=v[E++],M=v[E++],P=v[E++];null!==I?c.setInput(a,P,T,M):a[M]=P}}}function qA(i,s){let a=null,c=0;for(;c<s.length;){const l=s[c];if(0!==l)if(5!==l){if("number"==typeof l)break;i.hasOwnProperty(l)&&(null===a&&(a=[]),a.push(l,i[l],s[c+1])),c+=2}else c+=2;else c+=4}return a}function PC(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function $0(i,s){const a=Ut(s,i);if(Ws(a)){const c=a[1];48&a[2]?Yc(c,a,c.template,a[8]):a[5]>0&&bg(a)}}function bg(i){for(let c=Yp(i);null!==c;c=Qp(c))for(let l=10;l<c.length;l++){const f=c[l];if(Ws(f))if(512&f[2]){const v=f[1];Yc(v,f,v.template,f[8])}else f[5]>0&&bg(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const l=Ut(a[c],i);Ws(l)&&l[5]>0&&bg(l)}}function H0(i,s){const a=Ut(s,i),c=a[1];(function G0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Yy(c,a,a[8])}function Qh(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Tg(i){for(;i;){i[2]|=32;const s=gd(i);if(dh(i)&&!s)return i;i=s}return null}function Jh(i,s,a,c=!0){const l=s[10];l.begin&&l.begin();try{Yc(i,s,i.template,a)}catch(v){throw c&&av(s,v),v}finally{l.end&&l.end()}}function z0(i,s,a){aa(0),s(i,a)}function q0(i){return i[7]||(i[7]=[])}function ov(i){return i.cleanup||(i.cleanup=[])}function av(i,s){const a=i[9],c=a?a.get(Uh,null):null;c&&c.handleError(s)}function Oa(i,s,a,c,l){for(let f=0;f<a.length;){const v=a[f++],I=a[f++],E=s[v],T=i.data[v];null!==T.setInput?T.setInput(E,l,c,I):E[I]=l}}function Sg(i,s,a){let c=a?i.styles:null,l=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const I=s[v];"number"==typeof I?f=I:1==f?l=pe(l,I):2==f&&(c=pe(c,I+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}function Xh(i,s,a,c,l=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(_n(f)),Ir(f))for(let I=10;I<f.length;I++){const E=f[I],T=E[1].firstChild;null!==T&&Xh(E[1],E,T,c)}const v=a.type;if(8&v)Xh(i,s,a.child,c);else if(32&v){const I=Dy(a,s);let E;for(;E=I();)c.push(E)}else if(16&v){const I=Ry(s,a);if(Array.isArray(I))c.push(...I);else{const E=gd(s[16]);Xh(E[1],E,I,c,!0)}}a=l?a.projectionNext:a.next}return c}class ef{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Xh(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ir(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Sy(s,c),Dr(a,c))}this._attachedToViewContainer=!1}$h(this._lView[1],this._lView)}onDestroy(s){tv(this._lView[1],this._lView,null,s)}markForCheck(){Tg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Jh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Xw(i,s){Wc(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=s}}class FC extends ef{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Jh(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class uv extends p{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Tt(s);return new Dd(a,this.ngModule)}}function Qc(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Ou{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const l=this.injector.get(s,xu,c);return l!==xu||a===xu?l:this.parentInjector.get(s,a,c)}}class Dd extends Vh{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function aC(i){return i.map(p0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Qc(this.componentDef.inputs)}get outputs(){return Qc(this.componentDef.outputs)}create(s,a,c,l){let f=(l=l||this.ngModule)instanceof Ps?l:l?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new Ou(s,f):s,I=v.get(Fe,null);if(null===I)throw new we(407,!1);const E=v.get(at,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=c?function k0(i,s,a){return i.selectRootElement(s,a===it.ShadowDom)}(T,c,this.componentDef.encapsulation):Jp(I.createRenderer(null,this.componentDef),M,function LC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),H=this.componentDef.onPush?288:272,Q=ev(0,null,null,1,0,null,null,null,null,null),_e=Eg(null,Q,null,H,null,null,I,T,E,v,null);let Re,He;uu(_e);try{const Ye=function Z0(i,s,a,c,l,f){const v=a[1];a[22]=i;const E=wd(v,22,2,"#host",null),T=E.mergedAttrs=s.hostAttrs;null!==T&&(Sg(E,T,!0),null!==i&&(So(l,i,T),null!==E.classes&&Gh(l,i,E.classes),null!==E.styles&&Zc(l,i,E.styles)));const M=c.createRenderer(i,s),P=Eg(a,O0(s),null,s.onPush?32:16,a[22],E,c,M,f||null,null,null);return v.firstCreatePass&&(Is(Xs(E,a),v,s.type),U0(v,E),B0(E,a.length,1)),Qh(a,P),a[22]=P}(P,this.componentDef,_e,I,T);if(P)if(c)So(T,P,["ng-version",Li.full]);else{const{attrs:dt,classes:Te}=function uC(i){const s=[],a=[];let c=1,l=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===l?""!==f&&s.push(f,i[++c]):8===l&&a.push(f);else{if(!ks(l))break;l=f}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);dt&&So(T,P,dt),Te&&Te.length>0&&Gh(T,P,Te.join(" "))}if(He=Io(Q,22),void 0!==a){const dt=He.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const ht=a[Te];dt.push(null!=ht?Array.from(ht):null)}}Re=function K0(i,s,a,c){const l=a[1],f=function V0(i,s,a){const c=wn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),OC(i,c,s,Id(i,s,1,null),a),L0(i,c));const l=Qi(s,i,c.directiveStart,c);br(l,s);const f=Er(c,s);return f&&br(f,s),l}(l,a,s);if(i[8]=a[8]=f,null!==c)for(const I of c)I(f,s);if(s.contentQueries){const I=wn();s.contentQueries(1,f,I.directiveStart)}const v=wn();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Lr(v.index),rv(a[1],v,0,v.directiveStart,v.directiveEnd,s),Cg(s,f)),f}(Ye,this.componentDef,_e,[Y0]),Yy(Q,_e,null)}finally{Ks()}return new VC(this.componentType,Re,S(He,_e),_e,He)}}class VC extends class Up{}{constructor(s,a,c,l,f){super(),this.location=c,this._rootLView=l,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new FC(l),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[s])){const f=this._rootLView;Oa(f[1],f,l,s,a),Dg(f,this._tNode.index)}}get injector(){return new to(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Y0(){const i=wn();bc(Ce()[1],i)}function Ag(i){let s=function cv(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let l;if(fr(i))l=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new we(903,!1);l=s.\u0275dir}if(l){if(a){c.push(l);const v=i;v.inputs=xg(i.inputs),v.declaredInputs=xg(i.declaredInputs),v.outputs=xg(i.outputs);const I=l.hostBindings;I&&X0(i,I);const E=l.viewQuery,T=l.contentQueries;if(E&&J0(i,E),T&&Mg(i,T),ue(i.inputs,l.inputs),ue(i.declaredInputs,l.declaredInputs),ue(i.outputs,l.outputs),fr(l)&&l.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(l.data.animation)}}const f=l.features;if(f)for(let v=0;v<f.length;v++){const I=f[v];I&&I.ngInherit&&I(i),I===Ag&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Q0(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=s+=l.hostVars,l.hostAttrs=ua(l.hostAttrs,a=ua(a,l.hostAttrs))}}(c)}function xg(i){return i===_r?{}:i===yt?[]:i}function J0(i,s){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{s(c,l),a(c,l)}:s}function Mg(i,s){const a=i.contentQueries;i.contentQueries=a?(c,l,f)=>{s(c,l,f),a(c,l,f)}:s}function X0(i,s){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{s(c,l),a(c,l)}:s}let Rg=null;function Pu(){if(!Rg){const i=tn.Symbol;if(i&&i.iterator)Rg=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Rg=c)}}}return Rg}function Xc(i){return!!Ng(i)&&(Array.isArray(i)||!(i instanceof Map)&&Pu()in i)}function Ng(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function gr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function jr(i,s,a,c){const l=Ce();return gr(l,Zs(),s)&&(Pt(),zo(dn(),l,i,s,a,c)),jr}function aI(i,s,a,c,l,f,v,I){const E=Ce(),T=Pt(),M=i+22,P=T.firstCreatePass?function oI(i,s,a,c,l,f,v,I,E){const T=s.consts,M=wd(s,i,4,v||null,pi(T,I));nv(s,a,M,pi(T,E)),bc(s,M);const P=M.tViews=ev(2,M,c,l,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),P.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,l,f,v):T.data[M];Yr(P,!1);const H=E[11].createComment("");ng(T,E,H,P),br(H,E),Qh(E,E[M]=PC(H,E,H,P)),oc(P)&&Yh(T,E,P),null!=v&&Xy(E,P,I)}function sf(i,s,a){const c=Ce();return gr(c,Zs(),s)&&function Fs(i,s,a,c,l,f,v,I){const E=Er(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[c])?(Oa(i,a,M,c,l),Jo(s)&&Dg(a,s.index)):3&s.type&&(c=function VA(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=v?v(l,s.value||"",c):l,f.setProperty(E,c,l))}(Pt(),dn(),c,i,s,c[11],a,!1),sf}function nl(i,s,a,c,l){const v=l?"class":"style";Oa(i,a,s.inputs[v],v,c)}function Fa(i,s,a,c){const l=Ce(),f=Pt(),v=22+i,I=l[11],E=l[v]=Jp(I,s,function lu(){return vt.lFrame.currentNamespace}()),T=f.firstCreatePass?function Pg(i,s,a,c,l,f,v){const I=s.consts,T=wd(s,i,2,l,pi(I,f));return nv(s,a,T,pi(I,v)),null!==T.attrs&&Sg(T,T.attrs,!1),null!==T.mergedAttrs&&Sg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,f,l,0,s,a,c):f.data[v];Yr(T,!0);const M=T.mergedAttrs;null!==M&&So(I,E,M);const P=T.classes;null!==P&&Gh(I,E,P);const H=T.styles;return null!==H&&Zc(I,E,H),64!=(64&T.flags)&&ng(f,l,E,T),0===function tu(){return vt.lFrame.elementDepthCount}()&&br(E,l),function nu(){vt.lFrame.elementDepthCount++}(),oc(T)&&(Yh(f,l,T),function Jy(i,s,a){if(qa(s)){const l=s.directiveEnd;for(let f=s.directiveStart;f<l;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,T,l)),null!==c&&Xy(l,T),Fa}function Vu(){let i=wn();na()?function ra(){vt.lFrame.isParent=!1}():(i=i.parent,Yr(i,!1));const s=i;!function hc(){vt.lFrame.elementDepthCount--}();const a=Pt();return a.firstCreatePass&&(bc(a,i),qa(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function fu(i){return 0!=(16&i.flags)}(s)&&nl(a,s,Ce(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ll(i){return 0!=(32&i.flags)}(s)&&nl(a,s,Ce(),s.stylesWithoutHost,!1),Vu}function af(i,s,a,c){return Fa(i,s,a,c),Vu(),af}function dv(){return Ce()}function Fg(i){return!!i&&"function"==typeof i.then}function hv(i){return!!i&&"function"==typeof i.subscribe}const Td=hv;function cI(i,s,a,c){const l=Ce(),f=Pt(),v=wn();return function JC(i,s,a,c,l,f,v,I){const E=oc(c),M=i.firstCreatePass&&ov(i),P=s[8],H=q0(s);let Q=!0;if(3&c.type||I){const He=Er(c,s),Ye=I?I(He):He,dt=H.length,Te=I?sn=>I(_n(sn[c.index])):c.index;let ht=null;if(!I&&E&&(ht=function QC(i,s,a,c){const l=i.cleanup;if(null!=l)for(let f=0;f<l.length-1;f+=2){const v=l[f];if(v===a&&l[f+1]===c){const I=s[7],E=l[f+2];return I.length>E?I[E]:null}"string"==typeof v&&(f+=2)}return null}(i,s,l,c.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=f,ht.__ngLastListenerFn__=f,Q=!1;else{f=Sd(c,s,P,f,!1);const sn=a.listen(Ye,l,f);H.push(f,sn),M&&M.push(l,Te,dt,dt+1)}}else f=Sd(c,s,P,f,!1);const _e=c.outputs;let Re;if(Q&&null!==_e&&(Re=_e[l])){const He=Re.length;if(He)for(let Ye=0;Ye<He;Ye+=2){const Nn=s[Re[Ye]][Re[Ye+1]].subscribe(f),on=H.length;H.push(f,Nn),M&&M.push(l,c.index,on,-(on+1))}}}(f,l,l[11],v,i,s,0,c),cI}function lf(i,s,a,c){try{return!1!==a(c)}catch(l){return av(i,l),!1}}function Sd(i,s,a,c,l){return function f(v){if(v===Function)return c;Tg(2&i.flags?Ut(i.index,s):s);let E=lf(s,0,c,v),T=f.__ngNextListenerFn__;for(;T;)E=lf(s,0,T,v)&&E,T=T.__ngNextListenerFn__;return l&&!1===E&&(v.preventDefault(),v.returnValue=!1),E}}function df(i=1){return function Ys(i){return(vt.lFrame.contextLView=function cu(i,s){for(;i>0;)s=s[15],i--;return s}(i,vt.lFrame.contextLView))[8]}(i)}function _v(i,s,a,c,l){const f=i[a+1],v=null===s;let I=c?uo(f):Un(f),E=!1;for(;0!==I&&(!1===E||v);){const M=i[I+1];wv(i[I],s)&&(E=!0,i[I+1]=c?Wh(M):By(M)),I=c?uo(M):Un(M)}E&&(i[a+1]=c?By(f):Wh(f))}function wv(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ts(i,s)>=0}function Ug(i,s){return function lo(i,s,a,c){const l=Ce(),f=Pt(),v=function Yi(i){const s=vt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function ab(i,s,a,c){const l=i.data;if(null===l[a+1]){const f=l[Wn()],v=function vI(i,s){return s>=i.expandoStartIndex}(i,a);(function jg(i,s){return 0!=(i.flags&(s?16:32))})(f,c)&&null===s&&!v&&(s=!1),s=function _I(i,s,a,c){const l=function oa(i){const s=vt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===l)0===(c?s.classBindings:s.styleBindings)&&(a=rl(a=Bg(null,i,s,a,c),s.attrs,c),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==l)if(a=Bg(l,i,s,a,c),null===f){let E=function ub(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==Un(c))return i[uo(c)]}(i,s,c);void 0!==E&&Array.isArray(E)&&(E=Bg(null,i,s,E[1],c),E=rl(E,s.attrs,c),function wI(i,s,a,c){i[uo(a?s.classBindings:s.styleBindings)]=c}(i,s,c,E))}else f=function cb(i,s,a){let c;const l=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<l;f++)c=rl(c,i[f].hostAttrs,a);return rl(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(l,f,s,c),function vv(i,s,a,c,l,f){let v=f?s.classBindings:s.styleBindings,I=uo(v),E=Un(v);i[c]=a;let M,T=!1;if(Array.isArray(a)){const P=a;M=P[1],(null===M||Ts(P,M)>0)&&(T=!0)}else M=a;if(l)if(0!==E){const H=uo(i[I+1]);i[c+1]=qh(H,I),0!==H&&(i[H+1]=_d(i[H+1],c)),i[I+1]=function vC(i,s){return 131071&i|s<<17}(i[I+1],c)}else i[c+1]=qh(I,0),0!==I&&(i[I+1]=_d(i[I+1],c)),I=c;else i[c+1]=qh(E,0),0===I?I=c:i[E+1]=_d(i[E+1],c),E=c;T&&(i[c+1]=By(i[c+1])),_v(i,M,c,!0),_v(i,M,c,!1),function tb(i,s,a,c,l){const f=l?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Ts(f,s)>=0&&(a[c+1]=Wh(a[c+1]))}(s,M,i,c,f),v=qh(I,E),f?s.classBindings=v:s.styleBindings=v}(l,f,s,a,v,c)}}(f,i,v,c),s!==At&&gr(l,v,s)&&function Ad(i,s,a,c,l,f,v,I){if(!(3&s.type))return;const E=i.data,T=E[I+1];xd(function jy(i){return 1==(1&i)}(T)?II(E,s,a,l,Un(T),v):void 0)||(xd(f)||function C0(i){return 2==(2&i)}(T)&&(f=II(E,null,a,l,I,v)),function l0(i,s,a,c,l){if(s)l?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Ho.DashCase;null==l?i.removeStyle(a,c,f):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),f|=Ho.Important),i.setStyle(a,c,l,f))}}(c,v,Kr(Wn(),a),l,f))}(f,f.data[Wn()],l,l[11],i,l[v+1]=function hb(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=he(Oi(i)))),i}(s,a),c,v)}(i,s,null,!0),Ug}function Bg(i,s,a,c,l){let f=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(f=s[I],c=rl(c,f.hostAttrs,l),f!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function rl(i,s,a){const c=a?1:2;let l=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?l=v:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),rt(i,v,!!a||s[++f]))}return void 0===i?null:i}function II(i,s,a,c,l,f){const v=null===s;let I;for(;l>0;){const E=i[l],T=Array.isArray(E),M=T?E[1]:E,P=null===M;let H=a[l+1];H===At&&(H=P?yt:void 0);let Q=P?_a(H,c):M===c?H:void 0;if(T&&!xd(Q)&&(Q=_a(E,c)),xd(Q)&&(I=Q,v))return I;const _e=i[l+1];l=v?uo(_e):Un(_e)}if(null!==s){let E=f?s.residualClasses:s.residualStyles;null!=E&&(I=_a(E,c))}return I}function xd(i){return void 0!==i}function Cv(i,s=""){const a=Ce(),c=Pt(),l=i+22,f=c.firstCreatePass?wd(c,l,1,s,null):c.data[l],v=a[l]=function by(i,s){return i.createText(s)}(a[11],s);ng(c,a,v,f),Yr(f,!1)}function bv(i){return il("",i,""),bv}function il(i,s,a){const c=Ce(),l=function tl(i,s,a,c){return gr(i,Zs(),a)?s+me(a)+c:At}(c,i,s,a);return l!==At&&function Tr(i,s,a){const c=Kr(s,i);!function Qw(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Wn(),l),il}const Md=void 0;var JA=["en",[["a","p"],["AM","PM"],Md],[["AM","PM"],Md,Md],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Md,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Md,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Md,"{1} 'at' {0}",Md],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QA(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let gf={};function UI(i){const s=function Db(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=BI(s);if(a)return a;const c=s.split("-")[0];if(a=BI(c),a)return a;if("en"===c)return JA;throw new we(701,!1)}function Hg(i){return UI(i)[mt.PluralCase]}function BI(i){return i in gf||(gf[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),gf[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Rd="en-US";let jI=Rd;function Cf(i,s,a,c,l){if(i=K(i),Array.isArray(i))for(let f=0;f<i.length;f++)Cf(i[f],s,a,c,l);else{const f=Pt(),v=Ce();let I=Fi(i)?i:K(i.provide),E=ud(i);const T=wn(),M=1048575&T.providerIndexes,P=T.directiveStart,H=T.providerIndexes>>20;if(Fi(i)||!i.multi){const Q=new ws(E,l,vd),_e=im(I,s,l?M:M+H,P);-1===_e?(Is(Xs(T,v),f,I),Yv(f,i,s.length),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(Q),v.push(Q)):(a[_e]=Q,v[_e]=Q)}else{const Q=im(I,s,M+H,P),_e=im(I,s,M,M+H),Re=Q>=0&&a[Q],He=_e>=0&&a[_e];if(l&&!He||!l&&!Re){Is(Xs(T,v),f,I);const Ye=function Qv(i,s,a,c,l){const f=new ws(i,a,vd);return f.multi=[],f.index=s,f.componentProviders=0,rm(f,l,c&&!a),f}(l?sm:$b,a.length,l,c,E);!l&&He&&(a[_e].providerFactory=Ye),Yv(f,i,s.length,0),s.push(I),T.directiveStart++,T.directiveEnd++,l&&(T.providerIndexes+=1048576),a.push(Ye),v.push(Ye)}else Yv(f,i,Q>-1?Q:_e,rm(a[l?_e:Q],E,!l&&c));!l&&c&&He&&a[_e].componentProviders++}}}function Yv(i,s,a,c){const l=Fi(s),f=function Fh(i){return!!i.useClass}(s);if(l||f){const E=(f?K(s.useClass):s).prototype.ngOnDestroy;if(E){const T=i.destroyHooks||(i.destroyHooks=[]);if(!l&&s.multi){const M=T.indexOf(a);-1===M?T.push(a,[c,E]):T[M+1].push(c,E)}else T.push(a,E)}}}function rm(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function im(i,s,a,c){for(let l=a;l<c;l++)if(s[l]===i)return l;return-1}function $b(i,s,a,c){return bf(this.multi,[])}function sm(i,s,a,c){const l=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Qi(a,a[1],this.providerFactory.index,c);f=I.slice(0,v),bf(l,f);for(let E=v;E<I.length;E++)f.push(I[E])}else f=[],bf(l,f);return f}function bf(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Jv(i,s=[]){return a=>{a.providersResolver=(c,l)=>function tE(i,s,a){const c=Pt();if(c.firstCreatePass){const l=fr(i);Cf(a,c.data,c.blueprint,l,!0),Cf(s,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,s)}}class Pd{}class kd{}function nE(i,s){return new Xv(i,s??null)}class Xv extends Pd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new uv(this);const c=wr(s);this._bootstrapComponents=Ma(c.bootstrap),this._r3Injector=og(s,a,[{provide:Pd,useValue:this},{provide:p,useValue:this.componentFactoryResolver}],he(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Fd extends kd{constructor(s){super(),this.moduleType=s}create(s){return new Xv(this.moduleType,s)}}class Gb extends Pd{constructor(s,a,c){super(),this.componentFactoryResolver=new uv(this),this.instance=null;const l=new od([...s,{provide:Pd,useValue:this},{provide:p,useValue:this.componentFactoryResolver}],a||sd(),c,new Set(["environment"]));this.injector=l,l.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function e_(i,s,a=null){return new Gb(i,s,a).injector}let Ld=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=td(0,a.type),l=c.length>0?e_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,l)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Gt({token:i,providedIn:"environment",factory:()=>new i(hn(Ps))}),i})();function rE(i){i.getStandaloneInjector=s=>s.get(Ld).getOrCreateStandaloneInjector(i)}function lE(i,s,a,c,l,f){const v=s+a;return gr(i,v,l)?function co(i,s,a){return i[s]=a}(i,v+1,f?c.call(f,l):c(l)):function Ud(i,s){const a=i[s];return a===At?void 0:a}(i,v+1)}function ju(i,s){const a=Pt();let c;const l=i+22;a.firstCreatePass?(c=function f_(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[l]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(l,c.onDestroy)):c=a.data[l];const f=c.factory||(c.factory=Si(c.type)),v=Tn(vd);try{const I=da(!1),E=f();return da(I),function ZC(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,Ce(),l,E),E}finally{Tn(v)}}function dE(i,s,a){const c=i+22,l=Ce(),f=function Zi(i,s){return i[s]}(l,c);return function os(i,s){return i[1].data[s].pure}(l,c)?lE(l,function In(){const i=vt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,f.transform,a,f):f.transform(a)}function $d(i){return s=>{setTimeout(i,void 0,s)}}const fo=class cm extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let l=s,f=a||(()=>null),v=c;if(s&&"object"==typeof s){const E=s;l=E.next?.bind(E),f=E.error?.bind(E),v=E.complete?.bind(E)}this.__isAsync&&(f=$d(f),l&&(l=$d(l)),v&&(v=$d(v)));const I=super.subscribe({next:l,error:f,complete:v});return s instanceof ee.w0&&s.add(I),I}};function Mn(){return this._results[Pu()]()}class Hd{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Pu(),c=Hd.prototype;c[a]||(c[a]=Mn)}get changes(){return this._changes||(this._changes=new fo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const l=gn(s);(this._changesDetected=!function Qr(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],f=s[c];if(a&&(l=a(l),f=a(f)),f!==l)return!1}return!0}(c._results,l,a))&&(c._results=l,c.length=l.length,c.last=l[this.length-1],c.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ua=(()=>{class i{}return i.__NG_ELEMENT_ID__=pE,i})();const Mf=Ua,Zb=class extends Mf{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,l=Eg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);l[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(l[19]=v.createEmbeddedView(c)),Yy(c,l,s),new ef(l)}};function pE(){return lm(wn(),Ce())}function lm(i,s){return 4&i.type?new Zb(s,i,S(i,s)):null}let dm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Kb,i})();function Kb(){return p_(wn(),Ce())}const Yb=dm,Gd=class extends Yb{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return S(this._hostTNode,this._hostLView)}get injector(){return new to(this._hostTNode,this._hostLView)}get parentInjector(){const s=yu(this._hostTNode,this._hostLView);if(Ul(s)){const a=la(s,this._hostLView),c=rr(s);return new to(a[1].data[c+8],a)}return new to(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Ba(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let l,f;"number"==typeof c?l=c:null!=c&&(l=c.index,f=c.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,l),v}createComponent(s,a,c,l,f){const v=s&&!function mi(i){return"function"==typeof i}(s);let I;if(v)I=a;else{const P=a||{};I=P.index,c=P.injector,l=P.projectableNodes,f=P.environmentInjector||P.ngModuleRef}const E=v?s:new Dd(Tt(s)),T=c||this.parentInjector;if(!f&&null==E.ngModule){const H=(v?T:this.parentInjector).get(Ps,null);H&&(f=H)}const M=E.create(T,l,void 0,f);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,l=c[1];if(function Ja(i){return Ir(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const P=c[3],H=new Gd(P,P[6],P[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function YD(i,s,a,c){const l=10+c,f=a.length;c>0&&(a[l-1][4]=s),c<f-10?(s[4]=a[l],ya(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function QD(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(l,c,v,f);const I=u0(f,v),E=c[11],T=eg(E,v[7]);return null!==T&&function Jw(i,s,a,c,l,f){c[0]=l,c[6]=s,Wc(i,c,a,1,l,f)}(l,v[6],E,c,T,I),s.attachToViewContainerRef(),ya(hm(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Ba(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Sy(this._lContainer,a);c&&(Dr(hm(this._lContainer),a),$h(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Sy(this._lContainer,a);return c&&null!=Dr(hm(this._lContainer),a)?new ef(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Ba(i){return i[8]}function hm(i){return i[8]||(i[8]=[])}function p_(i,s){let a;const c=s[i.index];if(Ir(c))a=c;else{let l;if(8&i.type)l=_n(c);else{const f=s[11];l=f.createComment("");const v=Er(i,s);Go(f,eg(f,v),l,function o0(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=PC(c,s,l,i),Qh(s,a)}return new Gd(a,i,s)}class g_{constructor(s){this.queryList=s,this.matches=null}clone(){return new g_(this.queryList)}setDirty(){this.queryList.setDirty()}}class fm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,l=[];for(let f=0;f<c;f++){const v=a.getByIndex(f);l.push(this.queries[v.indexInDeclarationView].clone())}return new fm(l)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Wd(s,a).matches&&this.queries[a].setDirty()}}class mE{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class pm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,l);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new pm(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class gm{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new gm(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const f=c[l];this.matchTNodeWithReadOption(s,a,m_(a,f)),this.matchTNodeWithReadOption(s,a,Ao(a,s,f,!1,!1))}else c===Ua?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ao(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===N||l===dm||l===Ua&&4&a.type)this.addMatch(a.index,-2);else{const f=Ao(a,s,l,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function m_(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function yE(i,s,a,c){return-1===a?function y_(i,s){return 11&i.type?S(i,s):4&i.type?lm(i,s):null}(s,i):-2===a?function vE(i,s,a){return a===N?S(s,i):a===Ua?lm(s,i):a===dm?p_(s,i):void 0}(i,s,c):Qi(i,i[1],a,s)}function mm(i,s,a,c){const l=s[19].queries[c];if(null===l.matches){const f=i.data,v=a.matches,I=[];for(let E=0;E<v.length;E+=2){const T=v[E];I.push(T<0?null:yE(s,f[T],v[E+1],a.metadata.read))}l.matches=I}return l.matches}function v_(i,s,a,c){const l=i.queries.getByIndex(a),f=l.matches;if(null!==f){const v=mm(i,s,l,a);for(let I=0;I<f.length;I+=2){const E=f[I];if(E>0)c.push(v[I/2]);else{const T=f[I+1],M=s[-E];for(let P=10;P<M.length;P++){const H=M[P];H[17]===H[3]&&v_(H[1],H,T,c)}if(null!==M[9]){const P=M[9];for(let H=0;H<P.length;H++){const Q=P[H];v_(Q[1],Q,T,c)}}}}}return c}function _E(i){const s=Ce(),a=Pt(),c=vc();aa(c+1);const l=Wd(a,c);if(i.dirty&&function Qa(i){return 4==(4&i[2])}(s)===(2==(2&l.metadata.flags))){if(null===l.matches)i.reset([]);else{const f=l.crossesNgTemplate?v_(a,s,c,[]):mm(a,s,l,c);i.reset(f,W),i.notifyOnChanges()}return!0}return!1}function Rf(i,s,a,c){const l=Pt();if(l.firstCreatePass){const f=wn();(function __(i,s,a){null===i.queries&&(i.queries=new pm),i.queries.track(new gm(s,a))})(l,new mE(s,a,c),f.index),function Nf(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(l,i),2==(2&a)&&(l.staticContentQueries=!0)}!function vm(i,s,a){const c=new Hd(4==(4&a));tv(i,s,c,c.destroy),null===s[19]&&(s[19]=new fm),s[19].queries.push(new g_(c))}(l,Ce(),a)}function qd(){return function ym(i,s){return i[19].queries[s].queryList}(Ce(),vc())}function Wd(i,s){return i.queries.getByIndex(s)}function Qe(...i){}const PE=new un("Application Initializer");let Ge=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Qe,this.reject=Qe,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,l)=>{this.resolve=c,this.reject=l})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const f=this.appInits[l]();if(Fg(f))a.push(f);else if(Td(f)){const v=new Promise((I,E)=>{f.subscribe({complete:I,error:E})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(hn(PE,8))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const le=new un("AppId",{providedIn:"root",factory:function xe(){return`${wm()}${wm()}${wm()}`}});function wm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const kE=new un("Platform Initializer"),aT=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),FE=new un("appBootstrapListener");let LE=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const P_=new un("LocaleId",{providedIn:"root",factory:()=>D(P_,We.Optional|We.SkipSelf)||function uT(){return typeof $localize<"u"&&$localize.locale||Rd}()}),cT=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class VE{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Rn=(()=>{class i{compileModuleSync(a){return new Fd(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=Ma(wr(a).declarations).reduce((v,I)=>{const E=Tt(I);return E&&v.push(new Dd(E)),v},[]);return new VE(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const k_=(()=>Promise.resolve(0))();function ja(i){typeof Zone>"u"?k_.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ii{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fo(!1),this.onMicrotaskEmpty=new fo(!1),this.onStable=new fo(!1),this.onError=new fo(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function dT(){let i=tn.requestAnimationFrame,s=tn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function jE(i){const s=()=>{!function BE(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ei(i),i.isCheckStableRunning=!0,fl(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ei(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,f,v,I)=>{try{return Em(i),a.invokeTask(l,f,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),F_(i)}},onInvoke:(a,c,l,f,v,I,E)=>{try{return Em(i),a.invoke(l,f,v,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),F_(i)}},onHasTask:(a,c,l,f)=>{a.hasTask(l,f),c===l&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Ei(i),fl(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,l,f)=>(a.handleError(l,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ii.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Ii.isInAngularZone())throw new we(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,l){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+l,s,hT,Qe,Qe);try{return f.runTask(v,a,c)}finally{f.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const hT={};function fl(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ei(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Em(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function F_(i){i._nesting--,fl(i)}class $E{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fo,this.onMicrotaskEmpty=new fo,this.onStable=new fo,this.onError=new fo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,l){return s.apply(a,c)}}const $a=new un(""),Dm=new un("");let L_,se=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,L_||(function go(i){L_=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ii.assertNotInAngularZone(),ja(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ja(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}}return i.\u0275fac=function(a){return new(a||i)(hn(Ii),hn(Uf),hn(Dm))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac}),i})(),Uf=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return L_?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Us=null;const Ha=new un("AllowMultipleToken"),V_=new un("PlatformDestroyListeners");class pT{constructor(s,a){this.name=s,this.token=a}}function jn(i,s,a=[]){const c=`Platform: ${s}`,l=new un(c);return(f=[])=>{let v=bm();if(!v||v.injector.get(Ha,!1)){const I=[...a,...f,{provide:l,useValue:!0}];i?i(I):function Ui(i){if(Us&&!Us.get(Ha,!1))throw new we(400,!1);Us=i;const s=i.get(pl);(function Gu(i){const s=i.get(kE,null);s&&s.forEach(a=>a())})(i)}(function xr(i=[],s){return Jn.create({name:s,providers:[{provide:rd,useValue:"platform"},{provide:V_,useValue:new Set([()=>Us=null])},...i]})}(I,c))}return function Cm(i){const s=bm();if(!s)throw new we(401,!1);return s}()}}function bm(){return Us?.get(pl)??null}let pl=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function qE(i,s){let a;return a="noop"===i?new $E:("zone.js"===i?void 0:i)||new Ii(s),a}(c?.ngZone,function Bi(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Ii,useValue:l}];return l.run(()=>{const v=Jn.create({providers:f,parent:this.injector,name:a.moduleType.name}),I=a.create(v),E=I.injector.get(Uh,null);if(!E)throw new we(402,!1);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{Dn(this._modules,I),T.unsubscribe()})}),function dr(i,s,a){try{const c=a();return Fg(c)?c.catch(l=>{throw s.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=I.injector.get(Ge);return T.runInitializers(),T.donePromise.then(()=>(function Wo(i){Vt(i,"Expected localeId to be defined"),"string"==typeof i&&(jI=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(P_,Rd)||Rd),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const l=WE({},c);return function HE(i,s,a){const c=new Fd(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,l))}_moduleDoBootstrap(a){const c=a.injector.get(mo);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(V_,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(hn(Jn))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function WE(i,s){return Array.isArray(s)?s.reduce(WE,i):{...i,...s}}let mo=(()=>{class i{constructor(a,c,l){this._zone=a,this._injector=c,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Ii.assertNotInAngularZone(),ja(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Ii.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,oe.T)(f,v.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof Vh;if(!this._injector.get(Ge).done)throw!l&&bi(a),new we(405,false);let v;v=l?a:this._injector.get(p).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function fT(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Pd),T=v.create(Jn.NULL,[],c||v.selector,I),M=T.location.nativeElement,P=T.injector.get($a,null);return P?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),Dn(this.components,T),P?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Dn(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(FE,[]).concat(this._bootstrapListeners).forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Dn(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(hn(Ii),hn(Ps),hn(Uh))},i.\u0275prov=Gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Dn(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let B_=!0,Xd=!1;function mT(){return Xd=!0,B_}function qu(){if(Xd)throw new Error("Cannot enable prod mode after platform setup.");B_=!1}let Wu=(()=>{class i{}return i.__NG_ELEMENT_ID__=Am,i})();function Am(i){return function gl(i,s,a){if(Jo(i)&&!a){const c=Ut(i.index,s);return new ef(c,c)}return 47&i.type?new ef(s[16],s):null}(wn(),Ce(),16==(16&i))}class q_{constructor(){}supports(s){return Xc(s)}create(s){return new wT(s)}}const vl=(i,s)=>s;class wT{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||vl}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,l=0,f=null;for(;a||c;){const v=!c||a&&a.currentIndex<W_(c,l,f)?a:c,I=W_(v,l,f),E=v.currentIndex;if(v===c)l--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)l++;else{f||(f=[]);const T=I-l,M=E-l;if(T!=M){for(let H=0;H<T;H++){const Q=H<f.length?f[H]:f[H]=0,_e=Q+H;M<=_e&&_e<T&&(f[H]=Q+1)}f[v.previousIndex]=M-T}}I!==E&&s(v,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Xc(s))throw new we(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,f,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)f=s[I],v=this._trackByFn(I,f),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,f,v,I)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,I),c=!0),a=a._next}else l=0,function lv(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Pu()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{v=this._trackByFn(l,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,l)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,l){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,l)):s=this._addAfter(new Gf(a,c),f,l),s}_verifyReinsertion(s,a,c,l){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,f=s._nextRemoved;return null===l?this._removalsHead=f:l._nextRemoved=f,null===f?this._removalsTail=l:f._prevRemoved=l,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const l=null===a?this._itHead:a._next;return s._next=l,s._prev=a,null===l?this._itTail=s:l._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new zf),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zf),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Gf{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Nm{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class zf{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new Nm,this.map.set(a,c)),c.add(s)}get(s,a){const l=this.map.get(s);return l?l.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function W_(i,s,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+s+l}class Z_{constructor(){}supports(s){return s instanceof Map||Ng(s)}create(){return new Gr}}class Gr{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ng(s)))throw new we(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,a);const f=l._prev,v=l._next;return f&&(f._next=v),v&&(v._prev=f),l._next=null,l._prev=null,l}const c=new IT(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class IT{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ZE(){return new K_([new q_])}let K_=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||ZE()),deps:[[i,new pt,new Me]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new we(901,!1)}}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:ZE}),i})();function KE(){return new Y_([new Z_])}let Y_=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||KE()),deps:[[i,new pt,new Me]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new we(901,!1)}}return i.\u0275prov=Gt({token:i,providedIn:"root",factory:KE}),i})();const bT=jn(null,"core",[]);let YE=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(hn(mo))},i.\u0275mod=tt({type:i}),i.\u0275inj=Rt({}),i})();function QE(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(st,be,k)=>{k.d(be,{Z:()=>we});var g=k(2090),ee=k(4859),O=k(9681),oe=k(1877);class re{constructor(me,fe){this._delegate=me,this.firebase=fe,(0,O._addComponent)(me,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(me,fe=O._DEFAULT_ENTRY_NAME){var Ze;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(me);return!et.isInitialized()&&"EXPLICIT"===(null===(Ze=et.getComponent())||void 0===Ze?void 0:Ze.instantiationMode)&&et.initialize(),et.getImmediate({identifier:fe})}_removeServiceInstance(me,fe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(fe)}_addComponent(me){(0,O._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,O._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function pe(){const Je=function he(Je){const me={},fe={__esModule:!0,initializeApp:function Se(je,V={}){const ge=O.initializeApp(je,V);if((0,g.r3)(me,ge.name))return me[ge.name];const Z=new Je(ge,fe);return me[ge.name]=Z,Z},app:et,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ee(je){const V=je.name,ge=V.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const Z=(X=et())=>{if("function"!=typeof X[ge])throw ue.create("invalid-app-argument",{appName:V});return X[ge]()};void 0!==je.serviceProps&&(0,g.ZB)(Z,je.serviceProps),fe[ge]=Z,Je.prototype[ge]=function(...X){return this._getService.bind(this,V).apply(this,je.multipleInstances?X:[])}}return"PUBLIC"===je.type?fe[ge]:null},removeApp:function Ze(je){delete me[je]},useAsService:function Be(je,V){return"serverAuth"===V?null:V},modularAPIs:O}};function et(je){if(!(0,g.r3)(me,je=je||O._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:je});return me[je]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function ye(){return Object.keys(me).map(je=>me[je])}}),et.App=Je,fe}(re);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function me(fe){(0,g.ZB)(Je,fe)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Je}(),j=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=U;!function Ae(Je){(0,O.registerVersion)("@firebase/app-compat","0.1.34",Je)}()},9681:(st,be,k)=>{k.r(be),k.d(be,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>hs,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>Ht,_addOrOverwriteComponent:()=>Gt,_apps:()=>en,_clearComponents:()=>Yo,_components:()=>bn,_getProvider:()=>Rt,_registerComponent:()=>vr,_removeServiceInstance:()=>Jt,deleteApp:()=>vo,getApp:()=>Pr,getApps:()=>ci,initializeApp:()=>Ci,onLog:()=>$i,registerVersion:()=>kr,setLogLevel:()=>Tn});var g=k(5861),ee=k(4859),O=k(1877),oe=k(2090),re=k(8766);class de{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(z=>{if(function ue(L){return"VERSION"===L.getComponent()?.type}(z)){const De=z.getImmediate();return`${De.library}/${De.version}`}return null}).filter(z=>z).join(" ")}}const he="@firebase/app",U=new O.Yd("@firebase/app"),Vt="[DEFAULT]",ze={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,bn=new Map;function Ht(L,$){try{L.container.addComponent($)}catch(z){U.debug(`Component ${$.name} failed to register with FirebaseApp ${L.name}`,z)}}function Gt(L,$){L.container.addOrOverwriteComponent($)}function vr(L){const $=L.name;if(bn.has($))return U.debug(`There were multiple attempts to register component ${$}.`),!1;bn.set($,L);for(const z of en.values())Ht(z,L);return!0}function Rt(L,$){const z=L.container.getProvider("heartbeat").getImmediate({optional:!0});return z&&z.triggerHeartbeat(),L.container.getProvider($)}function Jt(L,$,z=Vt){Rt(L,$).clearInstance(z)}function Yo(){bn.clear()}const hr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Or{constructor($,z,De){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},z),this._name=z.name,this._automaticDataCollectionEnabled=z.automaticDataCollectionEnabled,this._container=De,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}const hs="9.10.0";function Ci(L,$={}){"object"!=typeof $&&($={name:$});const z=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},$),De=z.name;if("string"!=typeof De||!De)throw hr.create("bad-app-name",{appName:String(De)});const Ue=en.get(De);if(Ue){if((0,oe.vZ)(L,Ue.options)&&(0,oe.vZ)(z,Ue.config))return Ue;throw hr.create("duplicate-app",{appName:De})}const tt=new ee.H0(De);for(const qt of bn.values())tt.addComponent(qt);const an=new Or(L,z,tt);return en.set(De,an),an}function Pr(L=Vt){const $=en.get(L);if(!$)throw hr.create("no-app",{appName:L});return $}function ci(){return Array.from(en.values())}function vo(L){return We.apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(L){const $=L.name;en.has($)&&(en.delete($),yield Promise.all(L.container.getProviders().map(z=>z.delete())),L.isDeleted=!0)})).apply(this,arguments)}function kr(L,$,z){var De;let Ue=null!==(De=ze[L])&&void 0!==De?De:L;z&&(Ue+=`-${z}`);const tt=Ue.match(/\s|\//),an=$.match(/\s|\//);if(tt||an){const qt=[`Unable to register library "${Ue}" with version "${$}":`];return tt&&qt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),tt&&an&&qt.push("and"),an&&qt.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void U.warn(qt.join(" "))}vr(new ee.wA(`${Ue}-version`,()=>({library:Ue,version:$}),"VERSION"))}function $i(L,$){if(null!==L&&"function"!=typeof L)throw hr.create("invalid-log-argument");(0,O.Am)(L,$)}function Tn(L){(0,O.Ub)(L)}const Sn="firebase-heartbeat-store";let Hn=null;function cn(){return Hn||(Hn=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(L,$)=>{0===$&&L.createObjectStore(Sn)}}).catch(L=>{throw hr.create("idb-open",{originalErrorMessage:L.message})})),Hn}function it(){return(it=(0,g.Z)(function*(L){var $;try{return(yield cn()).transaction(Sn).objectStore(Sn).get(tr(L))}catch(z){if(z instanceof oe.ZR)U.warn(z.message);else{const De=hr.create("idb-get",{originalErrorMessage:null===($=z)||void 0===$?void 0:$.message});U.warn(De.message)}}})).apply(this,arguments)}function tn(L,$){return er.apply(this,arguments)}function er(){return(er=(0,g.Z)(function*(L,$){var z;try{const Ue=(yield cn()).transaction(Sn,"readwrite");return yield Ue.objectStore(Sn).put($,tr(L)),Ue.done}catch(De){if(De instanceof oe.ZR)U.warn(De.message);else{const Ue=hr.create("idb-set",{originalErrorMessage:null===(z=De)||void 0===z?void 0:z.message});U.warn(Ue.message)}}})).apply(this,arguments)}function tr(L){return`${L.name}!${L.options.appId}`}class Hi{constructor($){this.container=$,this._heartbeatsCache=null;const z=this.container.getProvider("app").getImmediate();this._storage=new $t(z),this._heartbeatsCachePromise=this._storage.read().then(De=>(this._heartbeatsCache=De,De))}triggerHeartbeat(){var $=this;return(0,g.Z)(function*(){const De=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=zt();if(null===$._heartbeatsCache&&($._heartbeatsCache=yield $._heartbeatsCachePromise),$._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!$._heartbeatsCache.heartbeats.some(tt=>tt.date===Ue))return $._heartbeatsCache.heartbeats.push({date:Ue,agent:De}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(tt=>{const an=new Date(tt.date).valueOf();return Date.now()-an<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,g.Z)(function*(){if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null===$._heartbeatsCache||0===$._heartbeatsCache.heartbeats.length)return"";const z=zt(),{heartbeatsToSend:De,unsentEntries:Ue}=function di(L,$=1024){const z=[];let De=L.slice();for(const Ue of L){const tt=z.find(an=>an.agent===Ue.agent);if(tt){if(tt.dates.push(Ue.date),q(z)>$){tt.dates.pop();break}}else if(z.push({agent:Ue.agent,dates:[Ue.date]}),q(z)>$){z.pop();break}De=De.slice(1)}return{heartbeatsToSend:z,unsentEntries:De}}($._heartbeatsCache.heartbeats),tt=(0,oe.L)(JSON.stringify({version:2,heartbeats:De}));return $._heartbeatsCache.lastSentHeartbeatDate=z,Ue.length>0?($._heartbeatsCache.heartbeats=Ue,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),tt})()}}function zt(){return(new Date).toISOString().substring(0,10)}class $t{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,g.Z)(function*(){return(yield $._canUseIndexedDBPromise)&&(yield function lt(L){return it.apply(this,arguments)}($.app))||{heartbeats:[]}})()}overwrite($){var z=this;return(0,g.Z)(function*(){var De;if(yield z._canUseIndexedDBPromise){const tt=yield z.read();return tn(z.app,{lastSentHeartbeatDate:null!==(De=$.lastSentHeartbeatDate)&&void 0!==De?De:tt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var z=this;return(0,g.Z)(function*(){var De;if(yield z._canUseIndexedDBPromise){const tt=yield z.read();return tn(z.app,{lastSentHeartbeatDate:null!==(De=$.lastSentHeartbeatDate)&&void 0!==De?De:tt.lastSentHeartbeatDate,heartbeats:[...tt.heartbeats,...$.heartbeats]})}})()}}function q(L){return(0,oe.L)(JSON.stringify({version:2,heartbeats:L})).length}!function B(L){vr(new ee.wA("platform-logger",$=>new de($),"PRIVATE")),vr(new ee.wA("heartbeat",$=>new Hi($),"PRIVATE")),kr(he,"0.7.33",L),kr(he,"0.7.33","esm2017"),kr("fire-js","")}("")},4859:(st,be,k)=>{k.d(be,{H0:()=>he,wA:()=>O});var g=k(5861),ee=k(2090);class O{constructor(U,j,K){this.name=U,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const oe="[DEFAULT]";class re{constructor(U,j){this.name=U,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const j=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(j)){const K=new ee.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:j});Ve&&K.resolve(Ve)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate(U){var j;const K=this.normalizeInstanceIdentifier(U?.identifier),Ve=null!==(j=U?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Ae){if(Ve)return null;throw Ae}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if(function ue(pe){return"EAGER"===pe.instantiationMode}(U))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier(j);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ve});K.resolve(Ae)}catch{}}}}clearInstance(U=oe){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,g.Z)(function*(){const j=Array.from(U.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=oe){return this.instances.has(U)}getOptions(U=oe){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:j={}}=U,K=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[Ae,we]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(Ae)&&we.resolve(Ve);return Ve}onInit(U,j){var K;const Ve=this.normalizeInstanceIdentifier(j),Ae=null!==(K=this.onInitCallbacks.get(Ve))&&void 0!==K?K:new Set;Ae.add(U),this.onInitCallbacks.set(Ve,Ae);const we=this.instances.get(Ve);return we&&U(we,Ve),()=>{Ae.delete(U)}}invokeOnInitCallbacks(U,j){const K=this.onInitCallbacks.get(j);if(K)for(const Ve of K)try{Ve(U,j)}catch{}}getOrInitializeService({instanceIdentifier:U,options:j={}}){let K=this.instances.get(U);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=U,pe===oe?void 0:pe),options:j}),this.instances.set(U,K),this.instancesOptions.set(U,j),this.invokeOnInitCallbacks(K,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,K)}catch{}var pe;return K||null}normalizeInstanceIdentifier(U=oe){return this.component?this.component.multipleInstances?U:oe:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const j=this.getProvider(U.name);if(j.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);j.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const j=new re(U,this);return this.providers.set(U,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(st,be,k)=>{k.d(be,{Am:()=>pe,Ub:()=>he,Yd:()=>ue,in:()=>ee});const g=[];var ee=(()=>{return(U=ee||(ee={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",ee;var U})();const O={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},oe=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},de=(U,j,...K)=>{if(j<U.logLevel)return;const Ve=(new Date).toISOString(),Ae=re[j];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ae](`[${Ve}]  ${U.name}:`,...K)};class ue{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=de,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in ee))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...j),this._logHandler(this,ee.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...j),this._logHandler(this,ee.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...j),this._logHandler(this,ee.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...j),this._logHandler(this,ee.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...j),this._logHandler(this,ee.ERROR,...j)}}function he(U){g.forEach(j=>{j.setLogLevel(U)})}function pe(U,j){for(const K of g){let Ve=null;j&&j.level&&(Ve=O[j.level]),K.userLogHandler=null===U?null:(Ae,we,...Je)=>{const me=Je.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch{return null}}).filter(fe=>fe).join(" ");we>=(Ve??Ae.logLevel)&&U({level:ee[we].toLowerCase(),message:me,args:Je,type:Ae.name})}}}},8766:(st,be,k)=>{k.d(be,{Lj:()=>Se,X3:()=>et});var g=k(5861);let O,oe;const ue=new WeakMap,he=new WeakMap,pe=new WeakMap,U=new WeakMap,j=new WeakMap;let Ae={get(V,ge,Z){if(V instanceof IDBTransaction){if("done"===ge)return he.get(V);if("objectStoreNames"===ge)return V.objectStoreNames||pe.get(V);if("store"===ge)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return fe(V[ge])},set:(V,ge,Z)=>(V[ge]=Z,!0),has:(V,ge)=>V instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in V};function me(V){return"function"==typeof V?function Je(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ge){return V.apply(Ze(this),ge),fe(ue.get(this))}:function(...ge){return fe(V.apply(Ze(this),ge))}:function(ge,...Z){const X=V.call(Ze(this),ge,...Z);return pe.set(X,ge.sort?ge.sort():[ge]),fe(X)}}(V):(V instanceof IDBTransaction&&function Ve(V){if(he.has(V))return;const ge=new Promise((Z,X)=>{const ie=()=>{V.removeEventListener("complete",te),V.removeEventListener("error",ke),V.removeEventListener("abort",ke)},te=()=>{Z(),ie()},ke=()=>{X(V.error||new DOMException("AbortError","AbortError")),ie()};V.addEventListener("complete",te),V.addEventListener("error",ke),V.addEventListener("abort",ke)});he.set(V,ge)}(V),((V,ge)=>ge.some(Z=>V instanceof Z))(V,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ae):V)}function fe(V){if(V instanceof IDBRequest)return function K(V){const ge=new Promise((Z,X)=>{const ie=()=>{V.removeEventListener("success",te),V.removeEventListener("error",ke)},te=()=>{Z(fe(V.result)),ie()},ke=()=>{X(V.error),ie()};V.addEventListener("success",te),V.addEventListener("error",ke)});return ge.then(Z=>{Z instanceof IDBCursor&&ue.set(Z,V)}).catch(()=>{}),j.set(ge,V),ge}(V);if(U.has(V))return U.get(V);const ge=me(V);return ge!==V&&(U.set(V,ge),j.set(ge,V)),ge}const Ze=V=>j.get(V);function et(V,ge,{blocked:Z,upgrade:X,blocking:ie,terminated:te}={}){const ke=indexedDB.open(V,ge),Oe=fe(ke);return X&&ke.addEventListener("upgradeneeded",ct=>{X(fe(ke.result),ct.oldVersion,ct.newVersion,fe(ke.transaction))}),Z&&ke.addEventListener("blocked",()=>Z()),Oe.then(ct=>{te&&ct.addEventListener("close",()=>te()),ie&&ct.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Oe}function Se(V,{blocked:ge}={}){const Z=indexedDB.deleteDatabase(V);return ge&&Z.addEventListener("blocked",()=>ge()),fe(Z).then(()=>{})}const ye=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Be=new Map;function je(V,ge){if(!(V instanceof IDBDatabase)||ge in V||"string"!=typeof ge)return;if(Be.get(ge))return Be.get(ge);const Z=ge.replace(/FromIndex$/,""),X=ge!==Z,ie=Ee.includes(Z);if(!(Z in(X?IDBIndex:IDBObjectStore).prototype)||!ie&&!ye.includes(Z))return;const te=function(){var ke=(0,g.Z)(function*(Oe,...ct){const Bt=this.transaction(Oe,ie?"readwrite":"readonly");let Vt=Bt.store;return X&&(Vt=Vt.index(ct.shift())),(yield Promise.all([Vt[Z](...ct),ie&&Bt.done]))[0]});return function(ct){return ke.apply(this,arguments)}}();return Be.set(ge,te),te}!function we(V){Ae=V(Ae)}(V=>({...V,get:(ge,Z,X)=>je(ge,Z)||V.get(ge,Z,X),has:(ge,Z)=>!!je(ge,Z)||V.has(ge,Z)}))},5861:(st,be,k)=>{function g(O,oe,re,de,ue,he,pe){try{var U=O[he](pe),j=U.value}catch(K){return void re(K)}U.done?oe(j):Promise.resolve(j).then(de,ue)}function ee(O){return function(){var oe=this,re=arguments;return new Promise(function(de,ue){var he=O.apply(oe,re);function pe(j){g(he,de,ue,pe,U,"next",j)}function U(j){g(he,de,ue,pe,U,"throw",j)}pe(void 0)})}}k.d(be,{Z:()=>ee})}},st=>{st(st.s=2040)}]);